import{Q as C}from"./QHeader.1d41df4b.js";import{r as f,F as w,a7 as x,B as L,w as D,a8 as d,q as c,G as p,H as a,v as o,I as i,K as P,ae as q,s as g,ac as I,ad as F,ab as _,x as v,y as V}from"./index.44ff7f36.js";import{Q as E,a as Q}from"./QItem.ca93871c.js";import{Q as b}from"./QItemLabel.07b36e9b.js";import{Q as M}from"./QList.843a2d7e.js";import{Q as S}from"./QPage.01f0db4e.js";import{Q as H,a as R}from"./QLayout.36e57c24.js";import{u as U}from"./use-quasar.5b0bf7b9.js";import{g as B}from"./locationUtils.25dc967c.js";import{s as y,a as G}from"./clubs.b2f7216c.js";import{P as j}from"./PlayerNavigationMenu.073d5db4.js";import{N as A}from"./NotificationBell.d889e136.js";import{B as K}from"./BannerPromoScrolling.38e1cc22.js";import{D as T}from"./DesktopNavigation.70841f70.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.62935925.js";import"./QTabs.b7b4d746.js";import"./rtl.276c3f1b.js";import"./QFooter.f84d141a.js";import"./QBadge.dc626f3f.js";import"./api.2af71db3.js";import"./admin.c99b9bfe.js";import"./QTooltip.81e13844.js";import"./position-engine.6138d72b.js";import"./selection.fc24a828.js";const J={components:{PlayerNavigationMenu:j,BannerPromoScrolling:K,NotificationBell:A,DesktopNavigation:T},setup(){const r=f([]),n=w(),h=x(),s=f(""),u=f(!1),m=U();return L(async()=>{u.value=!0;try{console.log("Attempting to get user location...");const t=await B();console.log("User location obtained:",t),r.value=await y("",t),console.log("Nearby clubs found:",r.value)}catch(t){console.error("Geolocation error:",t.message),m.notify({type:"warning",message:"No se pudo obtener tu ubicaci\xF3n. Mostrando clubes generales.",icon:"location_off"});try{console.log("Fetching first 10 clubs as fallback..."),r.value=await G(10),console.log("Fallback clubs found:",r.value)}catch(l){console.error("Error fetching first clubs:",l),m.notify({type:"negative",message:"No se pudieron cargar los clubes."}),r.value=[]}}finally{u.value=!1}}),D(s,async t=>{u.value=!0;let l=null;try{l=await B()}catch(e){console.warn("Could not get location for search query:",t,e.message),m.notify({type:"info",message:"Buscando sin ubicaci\xF3n precisa."})}try{r.value=await y(t,l)}catch(e){console.error("Error al buscar clubes:",e.message),m.notify({type:"negative",message:"Error durante la b\xFAsqueda."}),r.value=[]}finally{u.value=!1}}),{clubs:r,searchClubs:y,searchQuery:s,searching:u,viewClubDetails:t=>{const e=h.query.from==="lessons"?"publiclessons":"reservations";n.push({path:`/club/${t}`,query:{tab:e}})},goBack:()=>{n.back()}}}},O={class:"header-content"},W={class:"header-icons"},X={class:"search-bar"},Y={class:"clubs-list"},Z=["src"],$={key:1,class:"text-center"},ee={key:2,class:"text-center"};function oe(r,n,h,s,u,m){const k=d("NotificationBell"),N=d("BannerPromoScrolling"),t=d("PlayerNavigationMenu"),l=d("DesktopNavigation");return c(),p(H,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:a(()=>[o(C,{elevated:"",class:"text-white"},{default:a(()=>[i("div",O,[n[1]||(n[1]=i("div",{class:"greeting"},[i("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),i("div",W,[o(k)])]),o(N)]),_:1}),o(R,null,{default:a(()=>[o(S,{class:"q-pa-md"},{default:a(()=>[i("div",X,[o(P,{modelValue:s.searchQuery,"onUpdate:modelValue":n[0]||(n[0]=e=>s.searchQuery=e),filled:"",dense:"",placeholder:"Buscar por nombre o ubicaci\xF3n",onInput:s.searchClubs,class:"text-dark"},{prepend:a(()=>[o(q,{name:"search",class:"text-primary"})]),_:1},8,["modelValue","onInput"])]),i("div",Y,[s.clubs.length>0?(c(),p(M,{key:0,class:"q-mt-md"},{default:a(()=>[(c(!0),g(F,null,I(s.clubs,e=>(c(),p(E,{key:e.id,clickable:"",onClick:ae=>s.viewClubDetails(e.id),class:"club-card"},{default:a(()=>[o(Q,{avatar:""},{default:a(()=>[i("img",{src:e.logo_url||"/logo.jpeg",alt:"Club Logo",class:"club-logo"},null,8,Z)]),_:2},1024),o(Q,null,{default:a(()=>[o(b,{class:"club-name"},{default:a(()=>[_(v(e.name),1)]),_:2},1024),o(b,{caption:""},{default:a(()=>[_(v(e.address),1)]),_:2},1024),e.distance?(c(),p(b,{key:0,caption:""},{default:a(()=>[_(" Distancia: "+v((e.distance/1e3).toFixed(2))+" km ",1)]),_:2},1024)):V("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):s.searching?(c(),g("div",$,"Buscando...")):(c(),g("div",ee,"No se encontraron clubes."))])]),_:1})]),_:1}),o(t),o(l)]),_:1})}var Le=z(J,[["render",oe]]);export{Le as default};
