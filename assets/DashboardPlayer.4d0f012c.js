import{Q as N}from"./QHeader.56feab89.js";import{bA as k,F as B,r as f,B as M,a8 as v,q as l,G as T,H as y,v as r,I as t,ab as b,x as p,s as _,ac as E,ad as x,ae as w}from"./index.e023fc86.js";import{Q as I,a as L}from"./QLayout.5de9f2c5.js";import{u as j}from"./use-quasar.116c74f8.js";import{N as D}from"./NotificationBell.5c9292ad.js";import{P as C}from"./PlayerNavigationMenu.2e382568.js";import{P as S}from"./PlayerTopMenu.74000845.js";import{B as Q}from"./BannerPromoScrolling.bfd76df5.js";import{u as F}from"./userStore.3700a688.js";import{a as R}from"./api.2af71db3.js";import{f as W}from"./dateUtils.02ed3671.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBadge.8ff69d7d.js";import"./QTabs.5da5ba79.js";import"./rtl.276c3f1b.js";import"./QFooter.1e0bb873.js";import"./QItem.67c7d6d6.js";import"./QList.367328e6.js";import"./QBtnDropdown.a28adf48.js";import"./QMenu.25ad741b.js";import"./position-engine.28b0865b.js";import"./selection.709b2df1.js";import"./admin.c99b9bfe.js";import"./pinia.eb62d3f8.js";async function V(a,s,i=500,n={}){var d;if(!a||typeof((d=a.loading)==null?void 0:d.show)!="function"){console.error("runTaskWithMinLoading: Se requiere el objeto $q con el plugin Loading.");try{return await s()}catch(o){throw k.create({type:"negative",message:"Ocurri\xF3 un error inesperado.",caption:o.message}),o}}if(typeof s!="function"){const o=new Error('runTaskWithMinLoading: el par\xE1metro "task" debe ser una funci\xF3n as\xEDncrona.');return console.error(o),Promise.reject(o)}a.loading.show(n);const m=new Promise(o=>setTimeout(o,i));let u,c;const g=s().then(o=>{u=o}).catch(o=>{c=o,console.error("Error durante la ejecuci\xF3n de la tarea en runTaskWithMinLoading:",o),k.create({type:"negative",message:"Fall\xF3 la operaci\xF3n.",caption:(o==null?void 0:o.message)||"Error desconocido"})});try{await Promise.all([g,m])}finally{a.loading.hide()}if(c)throw c;return u}const q=async a=>{try{return(await R.get("/events/player/upcoming_events/")).data}catch(s){return console.error("Error fetching upcoming player events from API:",s),[]}};const z={name:"DashboardPlayer",components:{NotificationBell:D,NavigationMenu:C,PlayerTopMenu:S,BannerPromoScrolling:Q},setup(){const a=j(),s=B(),i=f([]),n=f(null),m=f(!0),u=F(),c=[{name:"Reserva tu cancha",icon:"edit_calendar",image_url:"/menu/reserva.jpeg",route:"reservas"},{name:"\xDAnete a un partido",icon:"sports_tennis",image_url:"/menu/unete.jpeg",route:"unete"},{name:"Inscr\xEDbete a torneos",icon:"o_emoji_events",image_url:"/menu/torneos.jpeg",route:"torneos"},{name:"Clases de P\xE1del",icon:"o_school",image_url:"/menu/clases.jpeg",route:"reservas"}],g=async()=>await q(u.userId),d=e=>{e.type==="match"?s.push(`/player/match/${e.id}`):e.type==="lesson"&&e.lesson_type==="private"?s.push(`/player/privatelesson/${e.id}`):e.type==="lesson"&&e.lesson_type==="public"&&s.push(`/player/detallessesion/${e.id}`)},o=e=>{s.push(`/player/${e}`)};return M(async()=>{m.value=!0,i.value=[];try{const e=await V(a,g,2e3);i.value=e||[]}catch(e){console.error("Error fetching upcoming events:",e),i.value=[]}finally{m.value=!1}}),{full_name:n,options:c,upcomingEvents:i,isInitiallyLoading:m,formatDate:W,goToEventDetails:d,navigateTo:o,userStore:u}}},A={class:"header-content"},O={class:"greeting"},U={class:"header-icons"},G={class:"player-container"},$={class:"home"},J={class:"options-grid"},K=["onClick"],X=["src"],Y={class:"next-events-section"},Z={class:"events-container"},ee={key:0,class:"empty-events"},oe={key:1,class:"events-carousel"},te=["onClick"],se={class:"event-info"},ne={class:"event-date"},ae={class:"event-time"},re={class:"event-club"},ie={class:"event-court"};function ce(a,s,i,n,m,u){const c=v("NotificationBell"),g=v("PlayerTopMenu"),d=v("BannerPromoScrolling"),o=v("NavigationMenu");return l(),T(I,{view:"hHh lpR fFf"},{default:y(()=>[r(N,{elevated:"",class:"text-white"},{default:y(()=>[t("div",A,[t("div",O,[s[0]||(s[0]=t("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"},null,-1)),b(" Bienvenido "+p(n.userStore.fullName),1)]),t("div",U,[r(c),r(g)])]),r(d)]),_:1}),r(L,null,{default:y(()=>[t("div",G,[t("div",$,[t("div",J,[(l(!0),_(x,null,E(n.options,e=>(l(),_("div",{key:e.name,class:"option-card",onClick:h=>n.navigateTo(e.route)},[t("img",{src:e.image_url,alt:"Option Image",class:"option-image"},null,8,X),t("h3",null,p(e.name),1),r(w,{name:e.icon,size:"xl",class:"option-icon"},null,8,["name"])],8,K))),128))]),t("div",Y,[s[2]||(s[2]=t("div",{class:"next-events"},[t("h4",null,"Mis Eventos:")],-1)),t("div",Z,[n.upcomingEvents.length===0&&!n.isInitiallyLoading?(l(),_("div",ee,s[1]||(s[1]=[t("div",{class:"q-pa-md text-center text-grey"}," No tienes pr\xF3ximos eventos registrados. ",-1)]))):(l(),_("div",oe,[(l(!0),_(x,null,E(n.upcomingEvents,e=>{var h,P;return l(),_("div",{key:e.id,class:"event-card",onClick:le=>n.goToEventDetails(e)},[r(w,{name:e.type==="match"?e.tournament_id?"emoji_events":"sports_tennis":"o_school",class:"event-icon material-icons-outlined",size:"35px"},null,8,["name"]),t("div",se,[t("p",ne,p(n.formatDate(e.match_date||e.lesson_date)),1),t("p",ae,p(e.match_time||e.lesson_time),1),t("p",re,p((h=e.clubs)==null?void 0:h.name),1),t("p",ie,p((P=e.courts)==null?void 0:P.name),1)])],8,te)}),128))]))])])])])]),_:1}),r(o)]),_:1})}var Ce=H(z,[["render",ce],["__scopeId","data-v-2ed06e07"]]);export{Ce as default};
