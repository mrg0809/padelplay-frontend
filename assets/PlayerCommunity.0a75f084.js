import{Q as A}from"./QHeader.fafcae42.js";import{Q as M}from"./QInnerLoading.c65cd0c5.js";import{F as U,r as m,w as q,y as j,aa as N,k as t,G as d,H as r,p as e,I as u,l as f,K as z,ag as H,aO as G,af as I,ae as S,bG as C,ad as y,q as v,J as F,aW as L}from"./index.63dc7e23.js";import{Q as R,a as x}from"./QTabs.6a3d63d5.js";import{Q as B,a as g}from"./QItem.0839bf79.js";import{Q as h}from"./QItemLabel.8574eb87.js";import{Q as T}from"./QList.e359b89a.js";import{a as J,Q as V}from"./QTabPanel.9ba55c34.js";import{Q as K}from"./QPage.2aaa1d93.js";import{Q as O,a as W}from"./QLayout.554612a4.js";import{u as X}from"./userStore.45e0b5eb.js";import{n as Y}from"./navigationUtils.2c4b9dee.js";import{P as Z}from"./PlayerNavigationMenu.f00bb1db.js";import{N as $}from"./NotificationBell.7dc8c9be.js";import{B as ee}from"./BannerPromoScrolling.c3a2856e.js";import{f as oe,a as ae,b as re,i as le,c as te,u as se}from"./community.981ae100.js";import{s as ne}from"./commun.a0af06ea.js";import{_ as ie}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./use-panel.7f1e0e99.js";import"./touch.9135741d.js";import"./selection.f8391a45.js";import"./use-render-cache.3aae9b27.js";import"./pinia.53eba05e.js";import"./QFooter.9d6e02eb.js";import"./QBadge.4d5b740f.js";import"./api.e96a150b.js";import"./index.c98ef0da.js";import"./admin.48eb7fea.js";import"./supabase.87115abf.js";const ce=n=>n?`${n.first_name||""} ${n.last_name||""}`.trim()||"Usuario":"",de=n=>n||"https://cdn.quasar.dev/img/avatar.png";const ue={components:{PlayerNavigationMenu:Z,BannerPromoScrolling:ee,NotificationBell:$},setup(){const n=U(),s=m(""),_=m(!1),a=m("following"),i=X(),w=m([]),k=m([]),P=m([]),p=m(!0),o=async()=>{try{console.log("Loading following for user:",i.userId),w.value=await oe(i.userId)}catch(l){console.error("Error loading following:",l)}},c=async()=>{try{k.value=await ae(i.userId)}catch(l){console.error("Error loading followers:",l)}},Q=async()=>{_.value=!0;try{P.value=await re(i.userId)}catch(l){console.error("Error loading suggested players:",l)}finally{_.value=!1}},D=async()=>{_.value=!0;try{const l=await ne(s.value.trim());a.value==="suggestions"&&(P.value=l)}catch(l){console.error("Error searching players:",l)}finally{_.value=!1}},E=l=>w.value&&le(w.value,l);return q(a,l=>{l==="following"?o():l==="followers"?c():l==="suggestions"&&Q()}),j(()=>{i.userId?(p.value=!1,o(),c(),Q()):(console.error("No user ID found in userStore"),p.value=!1)}),{searchQuery:s,searching:_,selectedTab:a,following:w,followers:k,isLoading:p,suggestedPlayers:P,searchPlayers:D,isFollowing:E,viewPlayerProfile:l=>{n.push(`/player/${l}`)},followPlayer:async l=>{try{await te(i.userId,l),o(),c(),Q()}catch(b){console.error("Error following player:",b)}},unfollowPlayer:async l=>{try{await se(i.userId,l),o(),c(),Q()}catch(b){console.error("Error unfollowing player:",b)}},getPlayerAvatar:de,formatPlayerName:ce,goToDashboard:()=>{Y(n,i)}}}},fe={class:"header-content"},me={class:"greeting"},ge={class:"header-icons"},_e={key:0},ye={key:1},ve={class:"search-bar"},he=["src"],we={key:1,class:"text-center"},Pe=["src"],pe={key:1,class:"text-center"},ke=["src"],Qe={key:1,class:"text-center"};function be(n,s,_,a,i,w){const k=N("NotificationBell"),P=N("BannerPromoScrolling"),p=N("PlayerNavigationMenu");return t(),d(O,{view:"hHh lpR fFf",class:"text-white"},{default:r(()=>[e(A,{elevated:"",class:"text-white"},{default:r(()=>[u("div",fe,[u("div",me,[u("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:s[0]||(s[0]=(...o)=>a.goToDashboard&&a.goToDashboard(...o))})]),u("div",ge,[e(k)])]),e(P)]),_:1}),e(W,{class:"home"},{default:r(()=>[e(K,{class:"q-pa-md"},{default:r(()=>[a.isLoading?(t(),f("div",_e,[e(M,{showing:!0,size:"xl",color:"primary"})])):(t(),f("div",ye,[u("div",ve,[e(z,{modelValue:a.searchQuery,"onUpdate:modelValue":s[1]||(s[1]=o=>a.searchQuery=o),filled:"",dense:"",placeholder:"Buscar jugador por nombre",onInput:a.searchPlayers,class:"text-dark"},{prepend:r(()=>[e(H,{name:"search",class:"text-primary",color:"white"})]),_:1},8,["modelValue","onInput"])]),e(R,{modelValue:a.selectedTab,"onUpdate:modelValue":s[2]||(s[2]=o=>a.selectedTab=o),align:"justify",class:"text-white"},{default:r(()=>[e(x,{name:"following",label:"Siguiendo"}),e(x,{name:"followers",label:"Seguidores"}),e(x,{name:"suggestions",label:"Sugerencias"})]),_:1},8,["modelValue"]),e(G,{class:"q-my-md",color:"white"}),e(J,{modelValue:a.selectedTab,"onUpdate:modelValue":s[3]||(s[3]=o=>a.selectedTab=o),animated:""},{default:r(()=>[e(V,{name:"following"},{default:r(()=>[a.following.length>0?(t(),d(T,{key:0},{default:r(()=>[(t(!0),f(I,null,S(a.following,o=>(t(),d(B,{key:o.user_id,clickable:"",onClick:c=>a.viewPlayerProfile(o.user_id)},{default:r(()=>[e(g,{avatar:""},{default:r(()=>[e(C,null,{default:r(()=>[u("img",{src:a.getPlayerAvatar(o.photo_url)},null,8,he)]),_:2},1024)]),_:2},1024),e(g,null,{default:r(()=>[e(h,null,{default:r(()=>[y(v(a.formatPlayerName(o)),1)]),_:2},1024),e(h,{caption:""},{default:r(()=>[y(v(o.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(t(),f("div",we,"No est\xE1s siguiendo a nadie."))]),_:1}),e(V,{name:"followers"},{default:r(()=>[a.followers.length>0?(t(),d(T,{key:0},{default:r(()=>[(t(!0),f(I,null,S(a.followers,o=>(t(),d(B,{key:o.user_id,clickable:"",onClick:c=>a.viewPlayerProfile(o.user_id)},{default:r(()=>[e(g,{avatar:""},{default:r(()=>[e(C,null,{default:r(()=>[u("img",{src:a.getPlayerAvatar(o.photo_url)},null,8,Pe)]),_:2},1024)]),_:2},1024),e(g,null,{default:r(()=>[e(h,null,{default:r(()=>[y(v(a.formatPlayerName(o)),1)]),_:2},1024),e(h,{caption:""},{default:r(()=>[y(v(o.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(t(),f("div",pe,"No tienes seguidores."))]),_:1}),e(V,{name:"suggestions"},{default:r(()=>[a.suggestedPlayers.length>0?(t(),d(T,{key:0},{default:r(()=>[(t(!0),f(I,null,S(a.suggestedPlayers,o=>(t(),d(B,{key:o.user_id,clickable:"",onClick:c=>a.viewPlayerProfile(o.user_id)},{default:r(()=>[e(g,{avatar:""},{default:r(()=>[e(C,null,{default:r(()=>[u("img",{src:a.getPlayerAvatar(o.photo_url)},null,8,ke)]),_:2},1024)]),_:2},1024),e(g,null,{default:r(()=>[e(h,null,{default:r(()=>[y(v(a.formatPlayerName(o)),1)]),_:2},1024),e(h,{caption:""},{default:r(()=>[y(v(o.category),1)]),_:2},1024)]),_:2},1024),e(g,{side:""},{default:r(()=>[a.isFollowing(o.user_id)?(t(),d(F,{key:1,color:"red",label:"Dejar de seguir",size:"sm",onClick:L(c=>a.unfollowPlayer(o.user_id),["stop"])},null,8,["onClick"])):(t(),d(F,{key:0,color:"primary",label:"Seguir",size:"sm",onClick:L(c=>a.followPlayer(o.user_id),["stop"])},null,8,["onClick"]))]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(t(),f("div",Qe,"No hay sugerencias."))]),_:1})]),_:1},8,["modelValue"])]))]),_:1})]),_:1}),e(p)]),_:1})}var to=ie(ue,[["render",be]]);export{to as default};
