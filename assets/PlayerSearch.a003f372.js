import{r as d,w as v,o as n,z as c,A as a,d as t,a7 as k,a8 as B,B as p,E as P,a as S,ab as w,aa as x,bE as y,a9 as g,t as i,e as D,ad as E,ae as N,D as A,af as I}from"./index.687b44e8.js";import{Q as L,a as _}from"./QItem.eb9291fb.js";import{Q}from"./QItemLabel.bbebea39.js";import{Q as j}from"./QList.1288e946.js";import{C as z}from"./ClosePopup.89fae5e1.js";import{s as F}from"./players.d11af278.js";const T=["src"],K={__name:"PlayerSearch",props:{modelValue:Boolean},emits:["update:modelValue","playerSelected"],setup(V,{emit:b}){const m=V,f=b,s=d(m.modelValue),r=d(""),u=d([]);v(()=>m.modelValue,e=>{s.value=e}),v(s,e=>{f("update:modelValue",e),e||(r.value="",u.value=[])});const h=async()=>{if(r.value.trim()===""){u.value=[];return}try{const e=await F(r.value);console.log("Search results from database:",e),u.value=e}catch(e){console.error("Error al buscar jugadores:",e)}},C=e=>{console.log("Player selected in PlayerSearch:",e),console.log("Player email:",e==null?void 0:e.email),f("playerSelected",e),s.value=!1};return(e,o)=>(n(),c(I,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value=l)},{default:a(()=>[t(k,{style:{"min-width":"300px"},class:"bg-black"},{default:a(()=>[t(B,null,{default:a(()=>[o[2]||(o[2]=p("div",{class:"text-h6"},"Buscar Jugador",-1)),t(P,{modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=l=>r.value=l),h],label:"Nombre, Apellido, Email o Tel\xE9fono",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),u.value.length>0?(n(),c(j,{key:0,bordered:"",separator:""},{default:a(()=>[(n(!0),S(w,null,x(u.value,l=>(n(),c(L,{key:l.id,clickable:"",onClick:U=>C(l)},{default:a(()=>[t(_,{avatar:""},{default:a(()=>[t(y,{size:"48px"},{default:a(()=>[p("img",{src:l.photo_url,alt:"Foto del jugador",style:{"border-radius":"50%"}},null,8,T)]),_:2},1024)]),_:2},1024),t(_,null,{default:a(()=>[t(Q,null,{default:a(()=>[g(i(l.first_name)+" "+i(l.last_name),1)]),_:2},1024),t(Q,{caption:""},{default:a(()=>[g(i(l.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):D("",!0),t(E,{align:"right"},{default:a(()=>[N(t(A,{flat:"",label:"Cancelar",color:"negative"},null,512),[[z]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{K as _};
