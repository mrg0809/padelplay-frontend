import{x as Z,y as $,r as d,h as ee,a6 as ae,o as n,z as s,A as r,d as a,B as u,a9 as S,D as C,a7 as O,a8 as p,a as L,aa as N,ab as q,e as m,E as g,ad as oe,ae as le,af as re,bG as te,t as w,aI as ne}from"./index.39adb644.js";import{Q as se}from"./QHeader.3330d6d5.js";import{Q as P,a as Q}from"./QItem.87198ca3.js";import{Q as D}from"./QItemLabel.24f30c08.js";import{Q as R}from"./QList.aedeb71d.js";import{Q as ce}from"./QPage.28b7989a.js";import{Q as ie,a as de}from"./QLayout.136fc703.js";import{Q as ue}from"./QSelect.abc13108.js";import{C as me}from"./ClosePopup.51e688f1.js";import{s as fe}from"./supabase.6e6ca5a2.js";import{n as pe}from"./navigationUtils.2c4b9dee.js";import{C as ge}from"./ClubNavigationMenu.0f9de636.js";import{a as j}from"./api.65c10df7.js";import{_ as _e}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.4e1820bf.js";import"./QMenu.5f547e53.js";import"./position-engine.8dba34ce.js";import"./selection.365c2d2e.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./QTabs.de2e2033.js";import"./QFooter.c2826d80.js";const he={name:"ManageCoaches",components:{ClubNavigationMenu:ge},setup(){const v=Z(),o=$(),F=d([]),e=d([]),k=d([]),y=d(!1),_=d(null),l=d(null),c=d(null),f=d(null),x=d(null),T=d(""),U=d(""),V=d(1),A=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"],E=d(Array(7).fill(null).map(()=>({is_open:!1,start_time:"09:00",end_time:"13:00"}))),H=t=>{console.log("ir al coach"),v.push({name:"CoachProfile",params:{id:t}})},z=()=>{v.back()},B=async()=>{try{const{data:t,error:h}=await fe.from("coaches").select(`
                id, 
                name, 
                coach_focus, 
                players(gender, photo_url, category)
            `).eq("club_id",o.clubId).eq("is_active",!0);if(h)throw h;F.value=t.map(i=>{var b,I,M;return{id:i.id,name:i.name,coach_focus:i.coach_focus,gender:((b=i.players)==null?void 0:b.gender)||"Desconocido",photo_url:((I=i.players)==null?void 0:I.photo_url)||null,category:((M=i.players)==null?void 0:M.category)||"No especificado"}})}catch(t){console.error("Error obteniendo coaches:",t.message)}},W=async()=>{try{const t=await j.get("/coaches/search-coaches");e.value=t.data,k.value=t.data}catch(t){console.error("Error obteniendo coaches disponibles:",t.message)}},G=(t,h)=>{h(()=>{const i=t.toLowerCase();k.value=e.value.filter(b=>b.name.toLowerCase().indexOf(i)>-1)})},J=async()=>{await W(),y.value=!0,V.value=1},K=()=>{V.value++},X=()=>{V.value--},Y=async()=>{if(!_.value){console.error("Debes seleccionar un jugador.");return}try{const t={user_id:_.value.user_id,club_id:o.clubId,name:_.value.name,price_for_one:l.value,price_for_two:c.value,price_for_three:f.value,price_for_four:x.value,coach_resume:T.value,coach_focus:U.value,availability:E.value.filter(i=>i.is_open).map((i,b)=>({day:A[b],start_time:i.start_time,end_time:i.end_time}))},h=await j.post("/coaches/add-coach",t);console.log("Coach agregado:",h.data),B(),y.value=!1}catch(t){console.error("Error agregando coach:",t.message)}};return ee(B),{goBack:z,coaches:F,isCoachDialogOpen:y,openCoachDialog:J,availableCoaches:e,filteredAvailableCoaches:k,selectedCoach:_,priceForOne:l,priceForTwo:c,priceForThree:f,priceForFour:x,coachResume:T,coachFocus:U,currentStep:V,nextStep:K,previousStep:X,addCoach:Y,filterCoaches:G,daysOfWeek:A,generalSchedule:E,goToCoachProfile:H,goToDashboard:()=>{pe(v,o)}}}},be={class:"header-content"},Ce={class:"greeting"},ve={class:"header-icons"},ke={class:"q-mb-md"},ye=["src"],Ve={class:"text-bold"};function Se(v,o,F,e,k,y){const _=ae("ClubNavigationMenu");return n(),s(ie,{view:"hHh lpR fFf"},{default:r(()=>[a(se,{elevated:"",class:"bg-primary text-white"},{default:r(()=>[u("div",be,[u("div",Ce,[u("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:o[0]||(o[0]=(...l)=>e.goToDashboard&&e.goToDashboard(...l))}),o[9]||(o[9]=S(" Instructores ",-1))]),u("div",ve,[a(C,{flat:"",round:"",icon:"arrow_back",onClick:e.goBack},null,8,["onClick"])])])]),_:1}),a(de,null,{default:r(()=>[a(ce,{class:"q-pa-md"},{default:r(()=>[u("div",ke,[a(O,{class:"transparent-card"},{default:r(()=>[a(p,null,{default:r(()=>[...o[10]||(o[10]=[u("h5",{class:"text-white"},"Coaches:",-1)])]),_:1}),e.coaches.length>0?(n(),s(p,{key:0},{default:r(()=>[a(R,{bordered:"",separator:""},{default:r(()=>[(n(!0),L(q,null,N(e.coaches,l=>(n(),s(P,{key:l.id},{default:r(()=>[a(Q,{avatar:""},{default:r(()=>[a(te,null,{default:r(()=>[u("img",{src:l.photo_url||"default-avatar.png"},null,8,ye)]),_:2},1024)]),_:2},1024),a(Q,{onClick:c=>e.goToCoachProfile(l.id)},{default:r(()=>[a(D,{class:"text-white"},{default:r(()=>[S(w(l.name),1)]),_:2},1024),l.coach_focus?(n(),s(D,{key:0,class:"text-white"},{default:r(()=>[S(w(l.coach_focus),1)]),_:2},1024)):m("",!0)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):(n(),s(p,{key:1},{default:r(()=>[a(D,{class:"text-center text-black"},{default:r(()=>[...o[11]||(o[11]=[S(" A\xFAn no tienes coaches disponibles ",-1)])]),_:1})]),_:1}))]),_:1})]),a(C,{glossy:"",round:"",size:"lg",color:"black",icon:"add",class:"fixed-bottom-right q-mb-xl",onClick:e.openCoachDialog},null,8,["onClick"])]),_:1})]),_:1}),a(_),a(re,{modelValue:e.isCoachDialogOpen,"onUpdate:modelValue":o[8]||(o[8]=l=>e.isCoachDialogOpen=l),persistent:"","full-width":""},{default:r(()=>[a(O,{class:"bg-black"},{default:r(()=>[a(p,null,{default:r(()=>[...o[12]||(o[12]=[u("div",{class:"text-h6"},"Agregar Coach",-1)])]),_:1}),e.currentStep===1?(n(),s(p,{key:0},{default:r(()=>[a(ue,{modelValue:e.selectedCoach,"onUpdate:modelValue":o[1]||(o[1]=l=>e.selectedCoach=l),options:e.filteredAvailableCoaches,"option-label":"name","option-value":"user_id",label:"Buscar jugador",filled:"","use-input":"",onFilter:e.filterCoaches,class:"custom-select"},null,8,["modelValue","options","onFilter"])]),_:1})):m("",!0),e.currentStep===2?(n(),s(p,{key:1},{default:r(()=>[a(g,{modelValue:e.priceForOne,"onUpdate:modelValue":o[2]||(o[2]=l=>e.priceForOne=l),label:"Entrenamiento individual",filled:"",type:"number"},null,8,["modelValue"]),a(g,{modelValue:e.priceForTwo,"onUpdate:modelValue":o[3]||(o[3]=l=>e.priceForTwo=l),label:"Entrenamiento pareja",filled:"",type:"number"},null,8,["modelValue"]),a(g,{modelValue:e.priceForThree,"onUpdate:modelValue":o[4]||(o[4]=l=>e.priceForThree=l),label:"Entrenamiento 3 jugadores",filled:"",type:"number"},null,8,["modelValue"]),a(g,{modelValue:e.priceForFour,"onUpdate:modelValue":o[5]||(o[5]=l=>e.priceForFour=l),label:"Entrenamiento 4 jugadores",filled:"",type:"number"},null,8,["modelValue"])]),_:1})):m("",!0),e.currentStep===3?(n(),s(p,{key:2},{default:r(()=>[a(g,{modelValue:e.coachResume,"onUpdate:modelValue":o[6]||(o[6]=l=>e.coachResume=l),label:"Resumen del Coach",filled:"",type:"textarea"},null,8,["modelValue"]),a(g,{modelValue:e.coachFocus,"onUpdate:modelValue":o[7]||(o[7]=l=>e.coachFocus=l),label:"Enfoque del Coach",filled:"",type:"textarea"},null,8,["modelValue"])]),_:1})):m("",!0),e.currentStep===4?(n(),s(p,{key:3},{default:r(()=>[a(R,{bordered:""},{default:r(()=>[(n(!0),L(q,null,N(e.generalSchedule,(l,c)=>(n(),s(P,{key:c,class:"q-mb-md"},{default:r(()=>[a(Q,null,{default:r(()=>[u("div",Ve,w(e.daysOfWeek[c]),1),a(ne,{modelValue:e.generalSchedule[c].is_open,"onUpdate:modelValue":f=>e.generalSchedule[c].is_open=f,label:"\xBFDisponible?",dense:"",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e.generalSchedule[c].is_open?(n(),s(Q,{key:0},{default:r(()=>[a(g,{modelValue:e.generalSchedule[c].start_time,"onUpdate:modelValue":f=>e.generalSchedule[c].start_time=f,label:"Hora de inicio",dense:"",outlined:"",color:"black",class:"text-black",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"]),a(g,{modelValue:e.generalSchedule[c].end_time,"onUpdate:modelValue":f=>e.generalSchedule[c].end_time=f,label:"Hora de fin",dense:"",outlined:"",color:"black",class:"text-black",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):m("",!0),a(oe,{align:"right"},{default:r(()=>[le(a(C,{flat:"",label:"Cancelar",color:"red"},null,512),[[me]]),e.currentStep>1?(n(),s(C,{key:0,flat:"",label:"Anterior",color:"blue",onClick:e.previousStep},null,8,["onClick"])):m("",!0),e.currentStep<4?(n(),s(C,{key:1,flat:"",label:"Siguiente",color:"green",onClick:e.nextStep},null,8,["onClick"])):m("",!0),e.currentStep===4?(n(),s(C,{key:2,flat:"",label:"Agregar",color:"green",onClick:e.addCoach},null,8,["onClick"])):m("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Je=_e(he,[["render",Se],["__scopeId","data-v-15f446d8"]]);export{Je as default};
