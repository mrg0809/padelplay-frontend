import{F as X,a7 as Y,r as b,B as Z,a8 as $,q as v,G as y,H as a,v as e,I as c,ab as i,J as p,bC as ee,x as f,a9 as V,aa as u,af as h,s as N,ac as S,ad as L,K as g,ag as k,ah as w,aK as ae,y as le}from"./index.ab1a8de1.js";import{Q as oe}from"./QHeader.69bcea6e.js";import{Q as re,a as P}from"./QTabs.c3b133c4.js";import{Q as n}from"./QItemLabel.3781138b.js";import{a as te,Q}from"./QTabPanel.1a96f54e.js";import{Q as M,a as E}from"./QItem.c727f074.js";import{Q as T}from"./QList.a3c715df.js";import{Q as ie}from"./QPage.5e199c97.js";import{Q as ne,a as se}from"./QLayout.c9e50c75.js";import{C as I}from"./ClosePopup.e42519e0.js";import{C as de}from"./ClubNavigationMenu.bf322301.js";import{a as U}from"./api.92f95132.js";import{s as ue}from"./supabase.e2fff660.js";import{_ as ce}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./use-panel.104d6abf.js";import"./use-render-cache.770e5fe8.js";import"./selection.134da567.js";import"./QFooter.2ac9c73e.js";const fe={name:"CoachProfile",components:{ClubNavigationMenu:de},setup(){const A=X(),o=Y(),O=b("info"),l=b({id:null,name:"",photo_url:"",coach_focus:"",resume:"",focus:"",category:"",gender:"",price_for_one:null,price_for_two:null,price_for_three:null,price_for_four:null,schedule:[]}),C=b(!1),x=b(!1),D=b(!1),r=b({resume:"",focus:""}),s=b({price_for_one:null,price_for_two:null,price_for_three:null,price_for_four:null}),_=b([]),q=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"],G=async()=>{const d=o.params.id;try{const{data:t,error:m}=await ue.from("coaches").select(`
              id, 
              name,
              price_for_one,
              price_for_two,
              price_for_three,
              price_for_four,
              coach_resume,
              coach_focus,
              availability, 
              players(gender, photo_url, category)
            `).eq("id",d).single();if(m)throw m;l.value={id:t.id,name:t.name,photo_url:t.players.photo_url,coach_focus:t.coach_focus,resume:t.coach_resume,focus:t.coach_focus,category:t.players.category,gender:t.players.gender,price_for_one:t.price_for_one,price_for_two:t.price_for_two,price_for_three:t.price_for_three,price_for_four:t.price_for_four,schedule:t.availability||[]},r.value={resume:t.coach_resume,focus:t.coach_focus},s.value={price_for_one:t.price_for_one,price_for_two:t.price_for_two,price_for_three:t.price_for_three,price_for_four:t.price_for_four},_.value=q.map(B=>t.availability.find(W=>W.day===B)||{day:B,is_open:!1,start_time:"",end_time:""})}catch(t){console.error("Error obteniendo datos del coach:",t.message)}},H=()=>{r.value={resume:l.value.resume,focus:l.value.focus},C.value=!0},R=()=>{s.value={price_for_one:l.value.price_for_one,price_for_two:l.value.price_for_two,price_for_three:l.value.price_for_three,price_for_four:l.value.price_for_four},x.value=!0},z=()=>{_.value=q.map(d=>l.value.schedule.find(m=>m.day===d)||{day:d,is_open:!1,start_time:"",end_time:""}),D.value=!0},j=async()=>{try{(await U.put(`coaches/edit-info/${l.value.id}`,{coach_resume:r.value.resume,coach_focus:r.value.focus})).data&&(l.value.resume=r.value.resume,l.value.focus=r.value.focus,C.value=!1)}catch(d){console.error("Error actualizando informaci\xF3n:",d.message)}},F=async()=>{try{(await U.put(`coaches/edit-prices/${l.value.id}`,{price_for_one:s.value.price_for_one,price_for_two:s.value.price_for_two,price_for_three:s.value.price_for_three,price_for_four:s.value.price_for_four})).data&&(l.value.price_for_one=s.value.price_for_one,l.value.price_for_two=s.value.price_for_two,l.value.price_for_three=s.value.price_for_three,l.value.price_for_four=s.value.price_for_four,x.value=!1)}catch(d){console.error("Error actualizando precios:",d.message)}},J=async()=>{try{const d=_.value.filter(m=>m.is_open).map(m=>({day:m.day,start_time:m.start_time,end_time:m.end_time}));(await U.put(`coaches/edit-availability/${l.value.id}`,{availability:d})).data&&(l.value.schedule=d,D.value=!1)}catch(d){console.error("Error actualizando disponibilidad:",d.message)}},K=()=>{A.back()};return Z(G),{coach:l,tab:O,isEditInfoDialogOpen:C,isEditPricesDialogOpen:x,isEditAvailabilityDialogOpen:D,editInfoData:r,editPricesData:s,editAvailabilityData:_,openEditInfoDialog:H,openEditPricesDialog:R,openEditAvailabilityDialog:z,saveInfo:j,savePrices:F,saveAvailability:J,goBack:K}}},_e={class:"header-content"},me={class:"header-icons"},pe={class:"q-mb-md text-center"},be=["src"],ve={class:"text-h5"},ge={class:"text-caption text-white"},ye={class:"text-bold"},Ve={class:"text-bold"};function he(A,o,O,l,C,x){const D=$("ClubNavigationMenu");return v(),y(ne,{view:"hHh lpR fFf",class:"body text-white"},{default:a(()=>[e(oe,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[c("div",_e,[o[11]||(o[11]=c("div",{class:"greeting"},[c("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),i(" Perfil del Coach ")],-1)),c("div",me,[e(p,{flat:"",round:"",icon:"arrow_back",onClick:l.goBack},null,8,["onClick"])])])]),_:1}),e(se,null,{default:a(()=>[e(ie,{class:"q-pa-md"},{default:a(()=>[c("div",pe,[e(ee,{size:"200px",class:"q-mb-md"},{default:a(()=>[c("img",{src:l.coach.photo_url||"default-avatar.png"},null,8,be)]),_:1}),c("div",ve,f(l.coach.name),1),c("div",ge,f(l.coach.coach_focus),1)]),e(re,{modelValue:l.tab,"onUpdate:modelValue":o[0]||(o[0]=r=>l.tab=r),align:"justify",class:"bg-black text-white"},{default:a(()=>[e(P,{name:"info",label:"Informaci\xF3n"}),e(P,{name:"prices",label:"Precios"}),e(P,{name:"availability",label:"Disponibilidad"})]),_:1},8,["modelValue"]),e(te,{modelValue:l.tab,"onUpdate:modelValue":o[1]||(o[1]=r=>l.tab=r),animated:"",class:"bg-black"},{default:a(()=>[e(Q,{name:"info"},{default:a(()=>[e(V,{class:"bg-transparent"},{default:a(()=>[e(u,null,{default:a(()=>[e(n,{class:"text-bold"},{default:a(()=>o[12]||(o[12]=[i("Resumen:")])),_:1}),e(n,null,{default:a(()=>[i(f(l.coach.resume),1)]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{class:"text-bold"},{default:a(()=>o[13]||(o[13]=[i("Categor\xEDa Jugador:")])),_:1}),e(n,null,{default:a(()=>[i(f(l.coach.category),1)]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{class:"text-bold"},{default:a(()=>o[14]||(o[14]=[i("G\xE9nero:")])),_:1}),e(n,null,{default:a(()=>[i(f(l.coach.gender),1)]),_:1})]),_:1}),e(h,{align:"right"},{default:a(()=>[e(p,{color:"primary",label:"Editar",onClick:l.openEditInfoDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),e(Q,{name:"prices"},{default:a(()=>[e(V,{class:"bg-transparent"},{default:a(()=>[e(u,null,{default:a(()=>[e(n,{class:"text-bold"},{default:a(()=>o[15]||(o[15]=[i("Individual:")])),_:1}),e(n,null,{default:a(()=>[i("$ "+f(l.coach.price_for_one),1)]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{class:"text-bold"},{default:a(()=>o[16]||(o[16]=[i("Pareja:")])),_:1}),e(n,null,{default:a(()=>[i("$ "+f(l.coach.price_for_two),1)]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{class:"text-bold"},{default:a(()=>o[17]||(o[17]=[i("3 personas:")])),_:1}),e(n,null,{default:a(()=>[i("$ "+f(l.coach.price_for_three),1)]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{class:"text-bold"},{default:a(()=>o[18]||(o[18]=[i("4 personas:")])),_:1}),e(n,null,{default:a(()=>[i("$ "+f(l.coach.price_for_four),1)]),_:1})]),_:1}),e(h,{align:"right"},{default:a(()=>[e(p,{color:"primary",label:"Editar",onClick:l.openEditPricesDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),e(Q,{name:"availability"},{default:a(()=>[e(V,{class:"bg-transparent"},{default:a(()=>[e(u,null,{default:a(()=>[e(T,{bordered:""},{default:a(()=>[(v(!0),N(L,null,S(l.coach.schedule,(r,s)=>(v(),y(M,{key:s,class:"q-mb-md"},{default:a(()=>[e(E,null,{default:a(()=>[c("div",ye,f(r.day),1),r.start_time&&r.end_time?(v(),y(n,{key:0},{default:a(()=>[i(f(r.start_time)+" - "+f(r.end_time),1)]),_:2},1024)):(v(),y(n,{key:1},{default:a(()=>o[19]||(o[19]=[i(" No disponible ")])),_:1}))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(h,{align:"right"},{default:a(()=>[e(p,{color:"primary",label:"Editar",onClick:l.openEditAvailabilityDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(w,{modelValue:l.isEditInfoDialogOpen,"onUpdate:modelValue":o[4]||(o[4]=r=>l.isEditInfoDialogOpen=r)},{default:a(()=>[e(V,{class:"bg-black text-white"},{default:a(()=>[e(u,null,{default:a(()=>o[20]||(o[20]=[c("div",{class:"text-h6"},"Editar Informaci\xF3n",-1)])),_:1}),e(u,null,{default:a(()=>[e(g,{modelValue:l.editInfoData.resume,"onUpdate:modelValue":o[2]||(o[2]=r=>l.editInfoData.resume=r),label:"Resumen",filled:"",type:"textarea"},null,8,["modelValue"]),e(g,{modelValue:l.editInfoData.focus,"onUpdate:modelValue":o[3]||(o[3]=r=>l.editInfoData.focus=r),label:"Enfoque",filled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(h,{align:"right"},{default:a(()=>[k(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[I]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:l.saveInfo},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(w,{modelValue:l.isEditPricesDialogOpen,"onUpdate:modelValue":o[9]||(o[9]=r=>l.isEditPricesDialogOpen=r)},{default:a(()=>[e(V,{class:"bg-black text-white"},{default:a(()=>[e(u,null,{default:a(()=>o[21]||(o[21]=[c("div",{class:"text-h6"},"Editar Precios",-1)])),_:1}),e(u,null,{default:a(()=>[e(g,{modelValue:l.editPricesData.price_for_one,"onUpdate:modelValue":o[5]||(o[5]=r=>l.editPricesData.price_for_one=r),label:"Individual",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:l.editPricesData.price_for_two,"onUpdate:modelValue":o[6]||(o[6]=r=>l.editPricesData.price_for_two=r),label:"Pareja",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:l.editPricesData.price_for_three,"onUpdate:modelValue":o[7]||(o[7]=r=>l.editPricesData.price_for_three=r),label:"3 personas",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:l.editPricesData.price_for_four,"onUpdate:modelValue":o[8]||(o[8]=r=>l.editPricesData.price_for_four=r),label:"4 personas",filled:"",type:"number"},null,8,["modelValue"])]),_:1}),e(h,{align:"right"},{default:a(()=>[k(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[I]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:l.savePrices},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(w,{modelValue:l.isEditAvailabilityDialogOpen,"onUpdate:modelValue":o[10]||(o[10]=r=>l.isEditAvailabilityDialogOpen=r)},{default:a(()=>[e(V,{class:"bg-black text-white"},{default:a(()=>[e(u,null,{default:a(()=>o[22]||(o[22]=[c("div",{class:"text-h6"},"Editar Disponibilidad",-1)])),_:1}),e(u,null,{default:a(()=>[e(T,{bordered:""},{default:a(()=>[(v(!0),N(L,null,S(l.editAvailabilityData,(r,s)=>(v(),y(M,{key:s,class:"q-mb-md"},{default:a(()=>[e(E,null,{default:a(()=>[c("div",Ve,f(r.day),1),e(ae,{modelValue:r.is_open,"onUpdate:modelValue":_=>r.is_open=_,label:"\xBFDisponible?",dense:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),r.is_open?(v(),y(E,{key:0},{default:a(()=>[e(g,{modelValue:r.start_time,"onUpdate:modelValue":_=>r.start_time=_,label:"Hora de inicio",filled:"",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"]),e(g,{modelValue:r.end_time,"onUpdate:modelValue":_=>r.end_time=_,label:"Hora de fin",filled:"",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):le("",!0)]),_:2},1024))),128))]),_:1})]),_:1}),e(h,{align:"right"},{default:a(()=>[k(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[I]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:l.saveAvailability},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(D)]),_:1})}var He=ce(fe,[["render",he],["__scopeId","data-v-905c04f4"]]);export{He as default};
