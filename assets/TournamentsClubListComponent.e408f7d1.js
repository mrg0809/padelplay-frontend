import{Q as M}from"./QItemLabel.30a3dfed.js";import{Q as $}from"./QChip.d99417f0.js";import{Q as R,a as h}from"./QItem.cafd0d6f.js";import{r as q,w as B,o as n,z as p,A as o,a as d,aa as y,ab as C,d as u,a9 as w,t as c,B as l,e as Q,ae as E,ac as S}from"./index.44d6004f.js";import{Q as j}from"./QList.8f6ea51c.js";import{Q as A}from"./QBtnDropdown.9d90b70a.js";import{C as N}from"./ClosePopup.8579e57c.js";import{a as x}from"./api.dcb17b1f.js";import{b as T}from"./dateUtils.b30b2858.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";function V(t,_,a=null){const i=q({});return{isMenuVisible:i,toggleMenu:e=>{i.value[e]=!i.value[e]},setReaction:async(e,s)=>{try{const r=t.value.find(f=>f.id===s);if(!r){console.warn("Post no encontrado para reaccionar:",s);return}const m=r.user_reaction,k=m===e;k?await x.delete("community/unreact",{data:{post_id:s,player_id:_}}):(m&&await x.delete("community/unreact",{data:{post_id:s,player_id:_}}),await x.post("community/react",{post_id:s,player_id:_,reaction_type:e})),t.value=t.value.map(f=>{if(f.id!==s)return f;const v={...f.reactions};if(m){const L=(v[m]||1)-1;L<=0?delete v[m]:v[m]=L}return k||(v[e]=(v[e]||0)+1),{...f,reactions:v,user_reaction:k?null:e}}),typeof a=="function"&&a(t.value)}catch(r){console.error("Error al manejar la reacci\xF3n:",r)}}}}const F={props:{posts:{type:Array,default:()=>[]},reactionEmojis:Object,selectedReaction:String,playerId:String},emits:["update:posts"],setup(t,{emit:_}){const a=q(t.posts?[...t.posts]:[]);B(()=>t.posts,e=>{e&&Array.isArray(e)&&(a.value=[...e])},{deep:!0});const{setReaction:i}=V(a,t.playerId,e=>_("update:posts",e)),g={like:"Me gusta",love:"Me encanta",laugh:"Me divierte",wow:"Me asombra",sad:"Me entristece",angry:"Me enoja"};return{formatDateString:T,setReaction:i,reactionLabel:e=>g[e]||e}}},W={key:0,class:"q-mt-sm"},z=["src"],G={class:"q-mt-sm"},I={class:"reaction-row q-mt-sm"},O={class:"reaction-picker-emoji"};function H(t,_,a,i,g,b){return n(),p(j,{bordered:"",class:"q-mt-md"},{default:o(()=>[(n(!0),d(C,null,y(a.posts,e=>(n(),p(R,{key:e.id,class:"q-mb-sm post"},{default:o(()=>[u(h,null,{default:o(()=>[u(M,null,{default:o(()=>[w(c(e.content),1)]),_:2},1024),u(M,{caption:""},{default:o(()=>[w(c(i.formatDateString(e.created_at)),1)]),_:2},1024),e.media_url?(n(),d("div",W,[l("img",{src:e.media_url,style:{"max-width":"100%","border-radius":"8px"},alt:"Imagen del post"},null,8,z)])):Q("",!0),l("div",G,[(n(!0),d(C,null,y(e.reactions,(s,r)=>(n(),p($,{key:r,color:"transparent"},{default:o(()=>[l("span",null,c(a.reactionEmojis[r])+" "+c(s),1)]),_:2},1024))),128))]),l("div",I,[u(A,{flat:"","no-caps":"",color:"primary",label:e.user_reaction?`${a.reactionEmojis[e.user_reaction]} Tu reacci\xF3n`:"Reaccionar",icon:e.user_reaction?void 0:"add_reaction",class:"reaction-btn","dropdown-icon":"arrow_drop_down"},{default:o(()=>[u(j,{class:"reaction-list"},{default:o(()=>[(n(!0),d(C,null,y(a.reactionEmojis,(s,r)=>E((n(),p(R,{key:r,clickable:"",active:e.user_reaction===r,"active-class":"reaction-active",onClick:m=>i.setReaction(r,e.id)},{default:o(()=>[u(h,{avatar:""},{default:o(()=>[l("span",O,c(s),1)]),_:2},1024),u(h,null,{default:o(()=>[w(c(i.reactionLabel(r)),1)]),_:2},1024),e.user_reaction===r?(n(),p(h,{key:0,side:""},{default:o(()=>[u(S,{name:"check",color:"primary"})]),_:1})):Q("",!0)]),_:2},1032,["active","onClick"])),[[N]])),128))]),_:2},1024)]),_:2},1032,["label","icon"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})}var ce=D(F,[["render",H],["__scopeId","data-v-647f5d82"]]);const J={props:{tournaments:{type:Array,default:()=>[]}},methods:{goToTournamentDetails(t){this.$emit("go-to-tournament-details",t)}}},K={class:"q-mt-md tournament-list"},U=["onClick"],X={key:0,class:"text-center q-mt-md text-black"};function Y(t,_,a,i,g,b){return n(),d("div",K,[(n(!0),d(C,null,y(a.tournaments,e=>(n(),d("div",{key:e.id,class:"tournament-card",onClick:s=>b.goToTournamentDetails(e.id)},[l("h5",null,c(e.name),1),l("p",null,"Fecha: "+c(e.start_date),1),l("p",null,"Categor\xEDa: "+c(e.category),1),l("p",null,"G\xE9nero: "+c(e.gender),1)],8,U))),128)),a.tournaments.length?Q("",!0):(n(),d("p",X," No hay torneos programados en este club. "))])}var le=D(J,[["render",Y],["__scopeId","data-v-239b1245"]]);export{ce as C,le as T,V as u};
