import{Q as U}from"./QHeader.84613758.js";import{Q as A}from"./QInnerLoading.a976421d.js";import{F as q,r as m,w as j,B as z,a8 as N,q as t,G as i,H as o,v as e,I as d,s as f,K as D,ae as H,aM as R,ad as I,ac as S,bC as x,ab as y,x as v,J as L,aU as T}from"./index.926cdc30.js";import{Q as G,a as C}from"./QTabs.b974ffab.js";import{Q as B,a as g}from"./QItem.2901f214.js";import{Q as w}from"./QItemLabel.1b922da2.js";import{Q as V}from"./QList.5a79a3d2.js";import{a as J,Q as F}from"./QTabPanel.3c0dc4fb.js";import{Q as K}from"./QPage.761f77aa.js";import{Q as O,a as W}from"./QLayout.4f822e59.js";import{u as X}from"./userStore.8829b966.js";import{P as Y}from"./PlayerNavigationMenu.a926540a.js";import{N as Z}from"./NotificationBell.b2a442c1.js";import{B as $}from"./BannerPromoScrolling.214141a2.js";import{f as ee,a as oe,b as ae,i as le,c as re,u as te}from"./community.e3bbc3b4.js";import{s as se}from"./commun.be7a9be8.js";import{_ as ne}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./use-panel.b2782bc2.js";import"./use-render-cache.770e5fe8.js";import"./selection.db442573.js";import"./pinia.a55bf2ba.js";import"./QFooter.fc71ab7d.js";import"./QBadge.7aa301e7.js";import"./api.92f95132.js";import"./admin.dfdc6f99.js";import"./supabase.f21eeafd.js";const ie=c=>c?`${c.first_name||""} ${c.last_name||""}`.trim()||"Usuario":"",ce=c=>c||"https://cdn.quasar.dev/img/avatar.png";const ue={components:{PlayerNavigationMenu:Y,BannerPromoScrolling:$,NotificationBell:Z},setup(){const c=q(),s=m(""),_=m(!1),l=m("following"),u=X(),h=m([]),k=m([]),P=m([]),p=m(!0),a=async()=>{try{console.log("Loading following for user:",u.userId),h.value=await ee(u.userId)}catch(r){console.error("Error loading following:",r)}},n=async()=>{try{k.value=await oe(u.userId)}catch(r){console.error("Error loading followers:",r)}},Q=async()=>{_.value=!0;try{P.value=await ae(u.userId)}catch(r){console.error("Error loading suggested players:",r)}finally{_.value=!1}},E=async()=>{_.value=!0;try{const r=await se(s.value.trim());l.value==="suggestions"&&(P.value=r)}catch(r){console.error("Error searching players:",r)}finally{_.value=!1}},M=r=>h.value&&le(h.value,r);return j(l,r=>{r==="following"?a():r==="followers"?n():r==="suggestions"&&Q()}),z(()=>{u.userId?(p.value=!1,a(),n(),Q()):(console.error("No user ID found in userStore"),p.value=!1)}),{searchQuery:s,searching:_,selectedTab:l,following:h,followers:k,isLoading:p,suggestedPlayers:P,searchPlayers:E,isFollowing:M,viewPlayerProfile:r=>{c.push(`/player/${r}`)},followPlayer:async r=>{try{await re(u.userId,r),a(),n(),Q()}catch(b){console.error("Error following player:",b)}},unfollowPlayer:async r=>{try{await te(u.userId,r),a(),n(),Q()}catch(b){console.error("Error unfollowing player:",b)}},getPlayerAvatar:ce,formatPlayerName:ie}}},de={class:"header-content"},fe={class:"header-icons"},me={key:0},ge={key:1},_e={class:"search-bar"},ye=["src"],ve={key:1,class:"text-center"},we=["src"],he={key:1,class:"text-center"},Pe=["src"],pe={key:1,class:"text-center"};function ke(c,s,_,l,u,h){const k=N("NotificationBell"),P=N("BannerPromoScrolling"),p=N("PlayerNavigationMenu");return t(),i(O,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:o(()=>[e(U,{elevated:"",class:"text-white"},{default:o(()=>[d("div",de,[s[3]||(s[3]=d("div",{class:"greeting"},[d("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),d("div",fe,[e(k)])]),e(P)]),_:1}),e(W,{class:"home"},{default:o(()=>[e(K,{class:"q-pa-md"},{default:o(()=>[l.isLoading?(t(),f("div",me,[e(A,{showing:!0,size:"xl",color:"primary"})])):(t(),f("div",ge,[d("div",_e,[e(D,{modelValue:l.searchQuery,"onUpdate:modelValue":s[0]||(s[0]=a=>l.searchQuery=a),filled:"",dense:"",placeholder:"Buscar jugador por nombre",onInput:l.searchPlayers,class:"text-dark"},{prepend:o(()=>[e(H,{name:"search",class:"text-primary"})]),_:1},8,["modelValue","onInput"])]),e(G,{modelValue:l.selectedTab,"onUpdate:modelValue":s[1]||(s[1]=a=>l.selectedTab=a),align:"justify",class:"text-white"},{default:o(()=>[e(C,{name:"following",label:"Siguiendo"}),e(C,{name:"followers",label:"Seguidores"}),e(C,{name:"suggestions",label:"Sugerencias"})]),_:1},8,["modelValue"]),e(R,{class:"q-my-md",color:"white"}),e(J,{modelValue:l.selectedTab,"onUpdate:modelValue":s[2]||(s[2]=a=>l.selectedTab=a),animated:""},{default:o(()=>[e(F,{name:"following"},{default:o(()=>[l.following.length>0?(t(),i(V,{key:0},{default:o(()=>[(t(!0),f(I,null,S(l.following,a=>(t(),i(B,{key:a.user_id,clickable:"",onClick:n=>l.viewPlayerProfile(a.user_id)},{default:o(()=>[e(g,{avatar:""},{default:o(()=>[e(x,null,{default:o(()=>[d("img",{src:l.getPlayerAvatar(a.photo_url)},null,8,ye)]),_:2},1024)]),_:2},1024),e(g,null,{default:o(()=>[e(w,null,{default:o(()=>[y(v(l.formatPlayerName(a)),1)]),_:2},1024),e(w,{caption:""},{default:o(()=>[y(v(a.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(t(),f("div",ve,"No est\xE1s siguiendo a nadie."))]),_:1}),e(F,{name:"followers"},{default:o(()=>[l.followers.length>0?(t(),i(V,{key:0},{default:o(()=>[(t(!0),f(I,null,S(l.followers,a=>(t(),i(B,{key:a.user_id,clickable:"",onClick:n=>l.viewPlayerProfile(a.user_id)},{default:o(()=>[e(g,{avatar:""},{default:o(()=>[e(x,null,{default:o(()=>[d("img",{src:l.getPlayerAvatar(a.photo_url)},null,8,we)]),_:2},1024)]),_:2},1024),e(g,null,{default:o(()=>[e(w,null,{default:o(()=>[y(v(l.formatPlayerName(a)),1)]),_:2},1024),e(w,{caption:""},{default:o(()=>[y(v(a.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(t(),f("div",he,"No tienes seguidores."))]),_:1}),e(F,{name:"suggestions"},{default:o(()=>[l.suggestedPlayers.length>0?(t(),i(V,{key:0},{default:o(()=>[(t(!0),f(I,null,S(l.suggestedPlayers,a=>(t(),i(B,{key:a.user_id,clickable:"",onClick:n=>l.viewPlayerProfile(a.user_id)},{default:o(()=>[e(g,{avatar:""},{default:o(()=>[e(x,null,{default:o(()=>[d("img",{src:l.getPlayerAvatar(a.photo_url)},null,8,Pe)]),_:2},1024)]),_:2},1024),e(g,null,{default:o(()=>[e(w,null,{default:o(()=>[y(v(l.formatPlayerName(a)),1)]),_:2},1024),e(w,{caption:""},{default:o(()=>[y(v(a.category),1)]),_:2},1024)]),_:2},1024),e(g,{side:""},{default:o(()=>[l.isFollowing(a.user_id)?(t(),i(L,{key:1,color:"red",label:"Dejar de seguir",size:"sm",onClick:T(n=>l.unfollowPlayer(a.user_id),["stop"])},null,8,["onClick"])):(t(),i(L,{key:0,color:"primary",label:"Seguir",size:"sm",onClick:T(n=>l.followPlayer(a.user_id),["stop"])},null,8,["onClick"]))]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(t(),f("div",pe,"No hay sugerencias."))]),_:1})]),_:1},8,["modelValue"])]))]),_:1})]),_:1}),e(p)]),_:1})}var Ze=ne(ue,[["render",ke]]);export{Ze as default};
