import{f as M,bH as yt,bI as Bt,g as Mt,b0 as Dt,aq as _t,as as bt,bv as wt,r as J,bb as Et,w as ge,j as m,T as Ce,k as xt,l as kt,br as Yt,J as it,D as te,bh as Zt,v as Lt,ae as zt}from"./index.7e1eb1fb.js";import{u as Qt}from"./use-render-cache.3aae9b27.js";import{p as C}from"./format.de7e9769.js";import{T as Pt}from"./TouchPan.00aafd0b.js";const ce=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Rt(e,u,h){return Object.prototype.toString.call(e)==="[object Date]"&&(h=e.getDate(),u=e.getMonth()+1,e=e.getFullYear()),Wt(ct(e,u,h))}function ft(e,u,h){return St(Xt(e,u,h))}function Kt(e){return Jt(e)===0}function Ue(e,u){return u<=6?31:u<=11||Kt(e)?30:29}function Jt(e){const u=ce.length;let h=ce[0],c,d,i,b,v;if(e<h||e>=ce[u-1])throw new Error("Invalid Jalaali year "+e);for(v=1;v<u&&(c=ce[v],d=c-h,!(e<c));v+=1)h=c;return b=e-h,d-b<6&&(b=b-d+I(d+4,33)*33),i=X(X(b+1,33)-1,4),i===-1&&(i=4),i}function qt(e,u){const h=ce.length,c=e+621;let d=-14,i=ce[0],b,v,D,j,y;if(e<i||e>=ce[h-1])throw new Error("Invalid Jalaali year "+e);for(y=1;y<h&&(b=ce[y],v=b-i,!(e<b));y+=1)d=d+I(v,33)*8+I(X(v,33),4),i=b;j=e-i,d=d+I(j,33)*8+I(X(j,33)+3,4),X(v,33)===4&&v-j===4&&(d+=1);const S=I(c,4)-I((I(c,100)+1)*3,4)-150,z=20+d-S;return u||(v-j<6&&(j=j-v+I(v+4,33)*33),D=X(X(j+1,33)-1,4),D===-1&&(D=4)),{leap:D,gy:c,march:z}}function Xt(e,u,h){const c=qt(e,!0);return ct(c.gy,3,c.march)+(u-1)*31-I(u,7)*(u-7)+h-1}function Wt(e){const u=St(e).gy;let h=u-621,c,d,i;const b=qt(h,!1),v=ct(u,3,b.march);if(i=e-v,i>=0){if(i<=185)return d=1+I(i,31),c=X(i,31)+1,{jy:h,jm:d,jd:c};i-=186}else h-=1,i+=179,b.leap===1&&(i+=1);return d=7+I(i,30),c=X(i,30)+1,{jy:h,jm:d,jd:c}}function ct(e,u,h){let c=I((e+I(u-8,6)+100100)*1461,4)+I(153*X(u+9,12)+2,5)+h-34840408;return c=c-I(I(e+100100+I(u-8,6),100)*3,4)+752,c}function St(e){let u=4*e+139361631;u=u+I(I(4*e+183187720,146097)*3,4)*4-3908;const h=I(X(u,1461),4)*5+308,c=I(X(h,153),5)+1,d=X(I(h,153),12)+1;return{gy:I(u,1461)-100100+I(8-d,6),gm:d,gd:c}}function I(e,u){return~~(e/u)}function X(e,u){return e-~~(e/u)*u}const Ut=["gregorian","persian"],pe={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ut.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ct=["update:modelValue"];function ue(e){return e.year+"/"+C(e.month)+"/"+C(e.day)}function Ht(e,u){const h=M(()=>e.disable!==!0&&e.readonly!==!0),c=M(()=>h.value===!0?0:-1),d=M(()=>{const v=[];return e.color!==void 0&&v.push(`bg-${e.color}`),e.textColor!==void 0&&v.push(`text-${e.textColor}`),v.join(" ")});function i(){return e.locale!==void 0?{...u.lang.date,...e.locale}:u.lang.date}function b(v){const D=new Date,j=v===!0?null:0;if(e.calendar==="persian"){const y=Rt(D);return{year:y.jy,month:y.jm,day:y.jd}}return{year:D.getFullYear(),month:D.getMonth()+1,day:D.getDate(),hour:j,minute:j,second:j,millisecond:j}}return{editable:h,tabindex:c,headerClass:d,getLocale:i,getCurrentDate:b}}const Ot=864e5,pt=36e5,st=6e4,It="YYYY-MM-DDTHH:mm:ss.SSSZ",Gt=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,ea=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,lt={};function ta(e,u){const h="("+u.days.join("|")+")",c=e+h;if(lt[c]!==void 0)return lt[c];const d="("+u.daysShort.join("|")+")",i="("+u.months.join("|")+")",b="("+u.monthsShort.join("|")+")",v={};let D=0;const j=e.replace(ea,S=>{switch(D++,S){case"YY":return v.YY=D,"(-?\\d{1,2})";case"YYYY":return v.YYYY=D,"(-?\\d{1,4})";case"M":return v.M=D,"(\\d{1,2})";case"Mo":return v.M=D++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return v.M=D,"(\\d{2})";case"MMM":return v.MMM=D,b;case"MMMM":return v.MMMM=D,i;case"D":return v.D=D,"(\\d{1,2})";case"Do":return v.D=D++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return v.D=D,"(\\d{2})";case"H":return v.H=D,"(\\d{1,2})";case"HH":return v.H=D,"(\\d{2})";case"h":return v.h=D,"(\\d{1,2})";case"hh":return v.h=D,"(\\d{2})";case"m":return v.m=D,"(\\d{1,2})";case"mm":return v.m=D,"(\\d{2})";case"s":return v.s=D,"(\\d{1,2})";case"ss":return v.s=D,"(\\d{2})";case"S":return v.S=D,"(\\d{1})";case"SS":return v.S=D,"(\\d{2})";case"SSS":return v.S=D,"(\\d{3})";case"A":return v.A=D,"(AM|PM)";case"a":return v.a=D,"(am|pm)";case"aa":return v.aa=D,"(a\\.m\\.|p\\.m\\.)";case"ddd":return d;case"dddd":return h;case"Q":case"d":case"E":return"(\\d{1})";case"do":return D++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return D++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return D++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return v.Z=D,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return v.ZZ=D,"(Z|[+-]\\d{2}\\d{2})";case"X":return v.X=D,"(-?\\d+)";case"x":return v.x=D,"(-?\\d{4,})";default:return D--,S[0]==="["&&(S=S.substring(1,S.length-1)),S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),y={map:v,regex:new RegExp("^"+j)};return lt[c]=y,y}function Vt(e,u){return e!==void 0?e:u!==void 0?u.date:Bt.date}function mt(e,u=""){const h=e>0?"-":"+",c=Math.abs(e),d=Math.floor(c/60),i=c%60;return h+C(d)+u+C(i)}function Ee(e,u,h,c,d){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(d!==void 0&&Object.assign(i,d),e==null||e===""||typeof e!="string")return i;u===void 0&&(u=It);const b=Vt(h,yt.props),v=b.months,D=b.monthsShort,{regex:j,map:y}=ta(u,b),S=e.match(j);if(S===null)return i;let z="";if(y.X!==void 0||y.x!==void 0){const B=parseInt(S[y.X!==void 0?y.X:y.x],10);if(isNaN(B)===!0||B<0)return i;const Q=new Date(B*(y.X!==void 0?1e3:1));i.year=Q.getFullYear(),i.month=Q.getMonth()+1,i.day=Q.getDate(),i.hour=Q.getHours(),i.minute=Q.getMinutes(),i.second=Q.getSeconds(),i.millisecond=Q.getMilliseconds()}else{if(y.YYYY!==void 0)i.year=parseInt(S[y.YYYY],10);else if(y.YY!==void 0){const B=parseInt(S[y.YY],10);i.year=B<0?B:2e3+B}if(y.M!==void 0){if(i.month=parseInt(S[y.M],10),i.month<1||i.month>12)return i}else y.MMM!==void 0?i.month=D.indexOf(S[y.MMM])+1:y.MMMM!==void 0&&(i.month=v.indexOf(S[y.MMMM])+1);if(y.D!==void 0){if(i.day=parseInt(S[y.D],10),i.year===null||i.month===null||i.day<1)return i;const B=c!=="persian"?new Date(i.year,i.month,0).getDate():Ue(i.year,i.month);if(i.day>B)return i}y.H!==void 0?i.hour=parseInt(S[y.H],10)%24:y.h!==void 0&&(i.hour=parseInt(S[y.h],10)%12,(y.A&&S[y.A]==="PM"||y.a&&S[y.a]==="pm"||y.aa&&S[y.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),y.m!==void 0&&(i.minute=parseInt(S[y.m],10)%60),y.s!==void 0&&(i.second=parseInt(S[y.s],10)%60),y.S!==void 0&&(i.millisecond=parseInt(S[y.S],10)*10**(3-S[y.S].length)),(y.Z!==void 0||y.ZZ!==void 0)&&(z=y.Z!==void 0?S[y.Z].replace(":",""):S[y.ZZ],i.timezoneOffset=(z[0]==="+"?-1:1)*(60*z.slice(1,3)+1*z.slice(3,5)))}return i.dateHash=C(i.year,4)+"/"+C(i.month)+"/"+C(i.day),i.timeHash=C(i.hour)+":"+C(i.minute)+":"+C(i.second)+z,i}function ut(e){const u=new Date(e.getFullYear(),e.getMonth(),e.getDate());u.setDate(u.getDate()-(u.getDay()+6)%7+3);const h=new Date(u.getFullYear(),0,4);h.setDate(h.getDate()-(h.getDay()+6)%7+3);const c=u.getTimezoneOffset()-h.getTimezoneOffset();u.setHours(u.getHours()-c);const d=(u-h)/(Ot*7);return 1+Math.floor(d)}function oe(e,u,h){const c=new Date(e),d=`set${h===!0?"UTC":""}`;switch(u){case"year":case"years":c[`${d}Month`](0);case"month":case"months":c[`${d}Date`](1);case"day":case"days":case"date":c[`${d}Hours`](0);case"hour":case"hours":c[`${d}Minutes`](0);case"minute":case"minutes":c[`${d}Seconds`](0);case"second":case"seconds":c[`${d}Milliseconds`](0)}return c}function We(e,u,h){return(e.getTime()-e.getTimezoneOffset()*st-(u.getTime()-u.getTimezoneOffset()*st))/h}function Tt(e,u,h="days"){const c=new Date(e),d=new Date(u);switch(h){case"years":case"year":return c.getFullYear()-d.getFullYear();case"months":case"month":return(c.getFullYear()-d.getFullYear())*12+c.getMonth()-d.getMonth();case"days":case"day":case"date":return We(oe(c,"day"),oe(d,"day"),Ot);case"hours":case"hour":return We(oe(c,"hour"),oe(d,"hour"),pt);case"minutes":case"minute":return We(oe(c,"minute"),oe(d,"minute"),st);case"seconds":case"second":return We(oe(c,"second"),oe(d,"second"),1e3)}}function ot(e){return Tt(e,oe(e,"year"),"days")+1}function qe(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const ht={YY(e,u,h){const c=this.YYYY(e,u,h)%100;return c>=0?C(c):"-"+C(Math.abs(c))},YYYY(e,u,h){return h!=null?h:e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return qe(e.getMonth()+1)},MM(e){return C(e.getMonth()+1)},MMM(e,u){return u.monthsShort[e.getMonth()]},MMMM(e,u){return u.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return qe(this.Q(e))},D(e){return e.getDate()},Do(e){return qe(e.getDate())},DD(e){return C(e.getDate())},DDD(e){return ot(e)},DDDo(e){return qe(ot(e))},DDDD(e){return C(ot(e),3)},d(e){return e.getDay()},do(e){return qe(e.getDay())},dd(e,u){return u.days[e.getDay()].slice(0,2)},ddd(e,u){return u.daysShort[e.getDay()]},dddd(e,u){return u.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return ut(e)},wo(e){return qe(ut(e))},ww(e){return C(ut(e))},H(e){return e.getHours()},HH(e){return C(e.getHours())},h(e){const u=e.getHours();return u===0?12:u>12?u%12:u},hh(e){return C(this.h(e))},m(e){return e.getMinutes()},mm(e){return C(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return C(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return C(Math.floor(e.getMilliseconds()/10))},SSS(e){return C(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,u,h,c){const d=c==null?e.getTimezoneOffset():c;return mt(d,":")},ZZ(e,u,h,c){const d=c==null?e.getTimezoneOffset():c;return mt(d)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function jt(e,u,h,c,d){if(e!==0&&!e||e===1/0||e===-1/0)return;const i=new Date(e);if(isNaN(i))return;u===void 0&&(u=It);const b=Vt(h,yt.props);return u.replace(Gt,(v,D)=>v in ht?ht[v](i,b,c,d):D===void 0?v:D.split("\\]").join("]"))}const le=20,aa=["Calendar","Years","Months"],gt=e=>aa.includes(e),rt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Se=" \u2014 ";function se(e){return e.year+"/"+C(e.month)}var sa=Mt({name:"QDate",props:{...pe,...Dt,..._t,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...pe.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:rt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:rt},navigationMaxYearMonth:{type:String,validator:rt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:gt}},emits:[...Ct,"rangeStart","rangeEnd","navigation"],setup(e,{slots:u,emit:h}){const{proxy:c}=kt(),{$q:d}=c,i=bt(e,d),{getCache:b}=Qt(),{tabindex:v,headerClass:D,getLocale:j,getCurrentDate:y}=Ht(e,d);let S;const z=wt(e),B=Yt(z),Q=J(null),W=J(Je()),V=J(j()),Ze=M(()=>Je()),ye=M(()=>j()),w=M(()=>y()),o=J(l(W.value,V.value)),H=J(e.defaultView),Le=M(()=>d.lang.rtl===!0?"right":"left"),re=J(Le.value),E=J(Le.value),He=o.value.year,de=J(He-He%le-(He<0?le:0)),Z=J(null),ve=M(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(i.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),U=M(()=>e.color||"primary"),p=M(()=>e.textColor||"white"),L=M(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ae=M(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),N=M(()=>ae.value.filter(t=>typeof t=="string").map(t=>Ne(t,W.value,V.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),G=M(()=>{const t=a=>Ne(a,W.value,V.value);return ae.value.filter(a=>Et(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Me=M(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=ft(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),Oe=M(()=>e.calendar==="persian"?ue:(t,a,n)=>jt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?W.value:a,n===void 0?V.value:n,t.year,t.timezoneOffset)),ie=M(()=>N.value.length+G.value.reduce((t,a)=>t+1+Tt(Me.value(a.to),Me.value(a.from)),0)),fe=M(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(Z.value!==null){const n=Z.value.init,s=Me.value(n);return V.value.daysShort[s.getDay()]+", "+V.value.monthsShort[n.month-1]+" "+n.day+Se+"?"}if(ie.value===0)return Se;if(ie.value>1)return`${ie.value} ${V.value.pluralDay}`;const t=N.value[0],a=Me.value(t);return isNaN(a.valueOf())===!0?Se:V.value.headerTitle!==void 0?V.value.headerTitle(a,t):V.value.daysShort[a.getDay()]+", "+V.value.monthsShort[t.month-1]+" "+t.day}),ze=M(()=>N.value.concat(G.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),Ie=M(()=>N.value.concat(G.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),Qe=M(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ie.value===0)return Se;if(ie.value>1){const t=ze.value,a=Ie.value,n=V.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+Se+n[a.month-1]+" ":t.month!==a.month?Se+n[a.month-1]:"")+" "+a.year}return N.value[0].year}),De=M(()=>{const t=[d.iconSet.datetime.arrowLeft,d.iconSet.datetime.arrowRight];return d.lang.rtl===!0?t.reverse():t}),_e=M(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):V.value.firstDayOfWeek),Ve=M(()=>{const t=V.value.daysShort,a=_e.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),ee=M(()=>{const t=o.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ue(t.year,t.month)}),Pe=M(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),A=M(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),F=M(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Te=M(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return A.value!==null&&A.value.year>=o.value.year&&(t.year.prev=!1,A.value.year===o.value.year&&A.value.month>=o.value.month&&(t.month.prev=!1)),F.value!==null&&F.value.year<=o.value.year&&(t.year.next=!1,F.value.year===o.value.year&&F.value.month<=o.value.month&&(t.month.next=!1)),t}),be=M(()=>{const t={};return N.value.forEach(a=>{const n=se(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),Re=M(()=>{const t={};return G.value.forEach(a=>{const n=se(a.from),s=se(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===s?a.to.day:void 0,range:a}),n<s){let f;const{year:k,month:g}=a.from,x=g<12?{year:k,month:g+1}:{year:k+1,month:1};for(;(f=se(x))<=s;)t[f]===void 0&&(t[f]=[]),t[f].push({from:void 0,to:f===s?a.to.day:void 0,range:a}),x.month++,x.month>12&&(x.year++,x.month=1)}}),t}),me=M(()=>{if(Z.value===null)return;const{init:t,initHash:a,final:n,finalHash:s}=Z.value,[f,k]=a<=s?[t,n]:[n,t],g=se(f),x=se(k);if(g!==P.value&&x!==P.value)return;const O={};return g===P.value?(O.from=f.day,O.includeFrom=!0):O.from=1,x===P.value?(O.to=k.day,O.includeTo=!0):O.to=ee.value,O}),P=M(()=>se(o.value)),Ge=M(()=>{const t={};if(e.options===void 0){for(let n=1;n<=ee.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=ee.value;n++){const s=P.value+"/"+C(n);t[n]=a(s)}return t}),et=M(()=>{const t={};if(e.events===void 0)for(let a=1;a<=ee.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=ee.value;n++){const s=P.value+"/"+C(n);t[n]=a(s)===!0&&Pe.value(s)}}return t}),we=M(()=>{let t,a;const{year:n,month:s}=o.value;if(e.calendar!=="persian")t=new Date(n,s-1,1),a=new Date(n,s-1,0).getDate();else{const f=ft(n,s,1);t=new Date(f.gy,f.gm-1,f.gd);let k=s-1,g=n;k===0&&(k=12,g--),a=Ue(g,k)}return{days:t.getDay()-_e.value-1,endDay:a}}),he=M(()=>{const t=[],{days:a,endDay:n}=we.value,s=a<0?a+7:a;if(s<6)for(let g=n-s;g<=n;g++)t.push({i:g,fill:!0});const f=t.length;for(let g=1;g<=ee.value;g++){const x={i:g,event:et.value[g],classes:[]};Ge.value[g]===!0&&(x.in=!0,x.flat=!0),t.push(x)}if(be.value[P.value]!==void 0&&be.value[P.value].forEach(g=>{const x=f+g-1;Object.assign(t[x],{selected:!0,unelevated:!0,flat:!1,color:U.value,textColor:p.value})}),Re.value[P.value]!==void 0&&Re.value[P.value].forEach(g=>{if(g.from!==void 0){const x=f+g.from-1,O=f+(g.to||ee.value)-1;for(let Be=x;Be<=O;Be++)Object.assign(t[Be],{range:g.range,unelevated:!0,color:U.value,textColor:p.value});Object.assign(t[x],{rangeFrom:!0,flat:!1}),g.to!==void 0&&Object.assign(t[O],{rangeTo:!0,flat:!1})}else if(g.to!==void 0){const x=f+g.to-1;for(let O=f;O<=x;O++)Object.assign(t[O],{range:g.range,unelevated:!0,color:U.value,textColor:p.value});Object.assign(t[x],{flat:!1,rangeTo:!0})}else{const x=f+ee.value-1;for(let O=f;O<=x;O++)Object.assign(t[O],{range:g.range,unelevated:!0,color:U.value,textColor:p.value})}}),me.value!==void 0){const g=f+me.value.from-1,x=f+me.value.to-1;for(let O=g;O<=x;O++)t[O].color=U.value,t[O].editRange=!0;me.value.includeFrom===!0&&(t[g].editRangeFrom=!0),me.value.includeTo===!0&&(t[x].editRangeTo=!0)}o.value.year===w.value.year&&o.value.month===w.value.month&&(t[f+w.value.day-1].today=!0);const k=t.length%7;if(k>0){const g=7-k;for(let x=1;x<=g;x++)t.push({i:x,fill:!0})}return t.forEach(g=>{let x="q-date__calendar-item ";g.fill===!0?x+="q-date__calendar-item--fill":(x+=`q-date__calendar-item--${g.in===!0?"in":"out"}`,g.range!==void 0&&(x+=` q-date__range${g.rangeTo===!0?"-to":g.rangeFrom===!0?"-from":""}`),g.editRange===!0&&(x+=` q-date__edit-range${g.editRangeFrom===!0?"-from":""}${g.editRangeTo===!0?"-to":""}`),(g.range!==void 0||g.editRange===!0)&&(x+=` text-${g.color}`)),g.classes=x}),t}),xe=M(()=>e.disable===!0?{"aria-disabled":"true"}:{});ge(()=>e.modelValue,t=>{if(S===JSON.stringify(t))S=0;else{const a=l(W.value,V.value);R(a.year,a.month,a)}}),ge(H,()=>{Q.value!==null&&c.$el.contains(document.activeElement)===!0&&Q.value.focus()}),ge(()=>o.value.year+"|"+o.value.month,()=>{h("navigation",{year:o.value.year,month:o.value.month})}),ge(Ze,t=>{vt(t,V.value,"mask"),W.value=t}),ge(ye,t=>{vt(W.value,t,"locale"),V.value=t});function je(t){S=JSON.stringify(t)}function $e(){const{year:t,month:a,day:n}=w.value,s={...o.value,year:t,month:a,day:n},f=be.value[se(s)];(f===void 0||f.includes(s.day)===!1)&&tt(s),ne(s.year,s.month)}function Ke(t){gt(t)===!0&&(H.value=t)}function Ae(t,a){["month","year"].includes(t)&&(t==="month"?_:Y)(a===!0?-1:1)}function ne(t,a){H.value="Calendar",R(t,a)}function Fe(t,a){if(e.range===!1||!t){Z.value=null;return}const n=Object.assign({...o.value},t),s=a!==void 0?Object.assign({...o.value},a):n;Z.value={init:n,initHash:ue(n),final:s,finalHash:ue(s)},ne(n.year,n.month)}function Je(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ne(t,a,n){return Ee(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function l(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return r();const s=n[n.length-1],f=Ne(s.from!==void 0?s.from:s,t,a);return f.dateHash===null?r():f}function r(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=w.value!==void 0?w.value:y();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+C(a)+"/01"}}function _(t){let a=o.value.year,n=Number(o.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),R(a,n),L.value===!0&&ke("month")}function Y(t){const a=Number(o.value.year)+t;R(a,o.value.month),L.value===!0&&ke("year")}function T(t){R(t,o.value.month),H.value=e.defaultView==="Years"?"Months":"Calendar",L.value===!0&&ke("year")}function K(t){R(o.value.year,t),H.value="Calendar",L.value===!0&&ke("month")}function q(t,a){const n=be.value[a];((n==null?void 0:n.includes(t.day))===!0?at:tt)(t)}function $(t){return{year:t.year,month:t.month,day:t.day}}function R(t,a,n){if(A.value!==null&&t<=A.value.year&&((a<A.value.month||t<A.value.year)&&(a=A.value.month),t=A.value.year),F.value!==null&&t>=F.value.year&&((a>F.value.month||t>F.value.year)&&(a=F.value.month),t=F.value.year),n!==void 0){const{hour:f,minute:k,second:g,millisecond:x,timezoneOffset:O,timeHash:Be}=n;Object.assign(o.value,{hour:f,minute:k,second:g,millisecond:x,timezoneOffset:O,timeHash:Be})}const s=t+"/"+C(a)+"/01";s!==o.value.dateHash&&(re.value=o.value.dateHash<s==(d.lang.rtl!==!0)?"left":"right",t!==o.value.year&&(E.value=re.value),it(()=>{de.value=t-t%le-(t<0?le:0),Object.assign(o.value,{year:t,month:a,day:1,dateHash:s})}))}function Xe(t,a,n){const s=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:f,details:k}=dt(a,n);je(s),h("update:modelValue",s,f,k)}function ke(t){const a=N.value[0]!==void 0&&N.value[0].dateHash!==null?{...N.value[0]}:{...o.value};it(()=>{a.year=o.value.year,a.month=o.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ue(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const s=Ye(a),{details:f}=dt("",a);je(s),h("update:modelValue",s,t,f)})}function dt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...$(a.target),from:$(a.from),to:$(a.to)}}:{reason:`${t}-day`,details:$(a)}}function Ye(t,a,n){return t.from!==void 0?{from:Oe.value(t.from,a,n),to:Oe.value(t.to,a,n)}:Oe.value(t,a,n)}function tt(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=ue(t.from),s=ue(t.to),f=N.value.filter(g=>g.dateHash<n||g.dateHash>s),k=G.value.filter(({from:g,to:x})=>x.dateHash<n||g.dateHash>s);a=f.concat(k).concat(t).map(g=>Ye(g))}else{const n=ae.value.slice();n.push(Ye(t)),a=n}else a=Ye(t);Xe(a,"add",t)}function at(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=Ye(t);t.from!==void 0?a=e.modelValue.filter(s=>s.from!==void 0?s.from!==n.from&&s.to!==n.to:!0):a=e.modelValue.filter(s=>s!==n),a.length===0&&(a=null)}Xe(a,"remove",t)}function vt(t,a,n){const s=N.value.concat(G.value).map(k=>Ye(k,t,a)).filter(k=>k.from!==void 0?k.from.dateHash!==null&&k.to.dateHash!==null:k.dateHash!==null),f=(e.multiple===!0?s:s[0])||null;je(f),h("update:modelValue",f,n)}function $t(){if(e.minimal!==!0)return m("div",{class:"q-date__header "+D.value},[m("div",{class:"relative-position"},[m(Ce,{name:"q-transition--fade"},()=>m("div",{key:"h-yr-"+Qe.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:v.value,...b("vY",{onClick(){H.value="Years"},onKeyup(t){t.keyCode===13&&(H.value="Years")}})},[Qe.value]))]),m("div",{class:"q-date__header-title relative-position flex no-wrap"},[m("div",{class:"relative-position col"},[m(Ce,{name:"q-transition--fade"},()=>m("div",{key:"h-sub"+fe.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:v.value,...b("vC",{onClick(){H.value="Calendar"},onKeyup(t){t.keyCode===13&&(H.value="Calendar")}})},[fe.value]))]),e.todayBtn===!0?m(te,{class:"q-date__header-today self-start",icon:d.iconSet.datetime.today,"aria-label":d.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:v.value,onClick:$e}):null])])}function nt({label:t,type:a,key:n,dir:s,goTo:f,boundaries:k,cls:g}){return[m("div",{class:"row items-center q-date__arrow"},[m(te,{round:!0,dense:!0,size:"sm",flat:!0,icon:De.value[0],"aria-label":a==="Years"?d.lang.date.prevYear:d.lang.date.prevMonth,tabindex:v.value,disable:k.prev===!1,...b("go-#"+a,{onClick(){f(-1)}})})]),m("div",{class:"relative-position overflow-hidden flex flex-center"+g},[m(Ce,{name:"q-transition--jump-"+s},()=>m("div",{key:n},[m(te,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:v.value,...b("view#"+a,{onClick:()=>{H.value=a}})})]))]),m("div",{class:"row items-center q-date__arrow"},[m(te,{round:!0,dense:!0,size:"sm",flat:!0,icon:De.value[1],"aria-label":a==="Years"?d.lang.date.nextYear:d.lang.date.nextMonth,tabindex:v.value,disable:k.next===!1,...b("go+#"+a,{onClick(){f(1)}})})])]}const At={Calendar:()=>[m("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[m("div",{class:"q-date__navigation row items-center no-wrap"},nt({label:V.value.months[o.value.month-1],type:"Months",key:o.value.month,dir:re.value,goTo:_,boundaries:Te.value.month,cls:" col"}).concat(nt({label:o.value.year,type:"Years",key:o.value.year,dir:E.value,goTo:Y,boundaries:Te.value.year,cls:""}))),m("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ve.value.map(t=>m("div",{class:"q-date__calendar-item"},[m("div",t)]))),m("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[m(Ce,{name:"q-transition--slide-"+re.value},()=>m("div",{key:P.value,class:"q-date__calendar-days fit"},he.value.map(t=>m("div",{class:t.classes},[t.in===!0?m(te,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:v.value,...b("day#"+t.i,{onClick:()=>{Ft(t.i)},onMouseover:()=>{Nt(t.i)}})},t.event!==!1?()=>m("div",{class:"q-date__event bg-"+t.event}):null):m("div",""+t.i)]))))])])],Months(){const t=o.value.year===w.value.year,a=s=>A.value!==null&&o.value.year===A.value.year&&A.value.month>s||F.value!==null&&o.value.year===F.value.year&&F.value.month<s,n=V.value.monthsShort.map((s,f)=>{const k=o.value.month===f+1;return m("div",{class:"q-date__months-item flex flex-center"},[m(te,{class:t===!0&&w.value.month===f+1?"q-date__today":null,flat:k!==!0,label:s,unelevated:k,color:k===!0?U.value:null,textColor:k===!0?p.value:null,tabindex:v.value,disable:a(f+1),...b("month#"+f,{onClick:()=>{K(f+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(m("div",{class:"row no-wrap full-width"},[nt({label:o.value.year,type:"Years",key:o.value.year,dir:E.value,goTo:Y,boundaries:Te.value.year,cls:" col"})])),m("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=de.value,a=t+le,n=[],s=f=>A.value!==null&&A.value.year>f||F.value!==null&&F.value.year<f;for(let f=t;f<=a;f++){const k=o.value.year===f;n.push(m("div",{class:"q-date__years-item flex flex-center"},[m(te,{key:"yr"+f,class:w.value.year===f?"q-date__today":null,flat:!k,label:f,dense:!0,unelevated:k,color:k===!0?U.value:null,textColor:k===!0?p.value:null,tabindex:v.value,disable:s(f),...b("yr#"+f,{onClick:()=>{T(f)}})})]))}return m("div",{class:"q-date__view q-date__years flex flex-center"},[m("div",{class:"col-auto"},[m(te,{round:!0,dense:!0,flat:!0,icon:De.value[0],"aria-label":d.lang.date.prevRangeYears(le),tabindex:v.value,disable:s(t),...b("y-",{onClick:()=>{de.value-=le}})})]),m("div",{class:"q-date__years-content col self-stretch row items-center"},n),m("div",{class:"col-auto"},[m(te,{round:!0,dense:!0,flat:!0,icon:De.value[1],"aria-label":d.lang.date.nextRangeYears(le),tabindex:v.value,disable:s(a),...b("y+",{onClick:()=>{de.value+=le}})})])])}};function Ft(t){const a={...o.value,day:t};if(e.range===!1){q(a,P.value);return}if(Z.value===null){const n=he.value.find(f=>f.fill!==!0&&f.i===t);if(e.noUnset!==!0&&n.range!==void 0){at({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){at(a);return}const s=ue(a);Z.value={init:a,initHash:s,final:a,finalHash:s},h("rangeStart",$(a))}else{const n=Z.value.initHash,s=ue(a),f=n<=s?{from:Z.value.init,to:a}:{from:a,to:Z.value.init};Z.value=null,tt(n===s?a:{target:a,...f}),h("rangeEnd",{from:$(f.from),to:$(f.to)})}}function Nt(t){if(Z.value!==null){const a={...o.value,day:t};Object.assign(Z.value,{final:a,finalHash:ue(a)})}}return Object.assign(c,{setToday:$e,setView:Ke,offsetCalendar:Ae,setCalendarTo:ne,setEditingRange:Fe}),()=>{const t=[m("div",{class:"q-date__content col relative-position"},[m(Ce,{name:"q-transition--fade"},At[H.value])])],a=xt(u.default);return a!==void 0&&t.push(m("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&B(t,"push"),m("div",{class:ve.value,...xe.value},[$t(),m("div",{ref:Q,class:"q-date__main col column",tabindex:-1},t)])}}});function na(e,u){if(e.hour!==null){if(e.minute===null)return"minute";if(u===!0&&e.second===null)return"second"}return"hour"}function la(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var ca=Mt({name:"QTime",props:{..._t,...Dt,...pe,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...pe.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Ct,setup(e,{slots:u,emit:h}){const c=kt(),{$q:d}=c.proxy,i=bt(e,d),{tabindex:b,headerClass:v,getLocale:D,getCurrentDate:j}=Ht(e,d),y=wt(e),S=Yt(y);let z,B;const Q=J(null),W=M(()=>Qe()),V=M(()=>D()),Ze=M(()=>De()),ye=Ee(e.modelValue,W.value,V.value,e.calendar,Ze.value),w=J(na(ye)),o=J(ye),H=J(ye.hour===null||ye.hour<12),Le=M(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(i.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),re=M(()=>{const l=o.value;return{hour:l.hour===null?"--":E.value===!0?C(l.hour):String(H.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":C(l.minute),second:l.second===null?"--":C(l.second)}}),E=M(()=>e.format24h!==null?e.format24h:d.lang.date.format24h),He=M(()=>{const l=w.value==="hour",r=l===!0?12:60,_=o.value[w.value];let T=`rotate(${Math.round(_*(360/r))-180}deg) translateX(-50%)`;return l===!0&&E.value===!0&&o.value.hour>=12&&(T+=" scale(.7)"),{transform:T}}),de=M(()=>o.value.hour!==null),Z=M(()=>de.value===!0&&o.value.minute!==null),ve=M(()=>e.hourOptions!==void 0?l=>e.hourOptions.includes(l):e.options!==void 0?l=>e.options(l,null,null):null),U=M(()=>e.minuteOptions!==void 0?l=>e.minuteOptions.includes(l):e.options!==void 0?l=>e.options(o.value.hour,l,null):null),p=M(()=>e.secondOptions!==void 0?l=>e.secondOptions.includes(l):e.options!==void 0?l=>e.options(o.value.hour,o.value.minute,l):null),L=M(()=>{if(ve.value===null)return null;const l=fe(0,11,ve.value),r=fe(12,11,ve.value);return{am:l,pm:r,values:l.values.concat(r.values)}}),ae=M(()=>U.value!==null?fe(0,59,U.value):null),N=M(()=>p.value!==null?fe(0,59,p.value):null),G=M(()=>{switch(w.value){case"hour":return L.value;case"minute":return ae.value;case"second":return N.value}}),Me=M(()=>{let l,r,_=0,Y=1;const T=G.value!==null?G.value.values:void 0;w.value==="hour"?E.value===!0?(l=0,r=23):(l=0,r=11,H.value===!1&&(_=12)):(l=0,r=55,Y=5);const K=[];for(let q=l,$=l;q<=r;q+=Y,$++){const R=q+_,Xe=(T==null?void 0:T.includes(R))===!1,ke=w.value==="hour"&&q===0?E.value===!0?"00":"12":q;K.push({val:R,index:$,disable:Xe,label:ke})}return K}),Oe=M(()=>[[Pt,ee,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ge(()=>e.modelValue,l=>{const r=Ee(l,W.value,V.value,e.calendar,Ze.value);(r.dateHash!==o.value.dateHash||r.timeHash!==o.value.timeHash)&&(o.value=r,r.hour===null?w.value="hour":H.value=r.hour<12)}),ge([W,V],()=>{it(()=>{Fe()})});function ie(){const l={...j(),...la()};Fe(l),Object.assign(o.value,l),w.value="hour"}function fe(l,r,_){const Y=Array.apply(null,{length:r+1}).map((T,K)=>{const q=K+l;return{index:q,val:_(q)===!0}}).filter(T=>T.val===!0).map(T=>T.index);return{min:Y[0],max:Y[Y.length-1],values:Y,threshold:r+1}}function ze(l,r,_){const Y=Math.abs(l-r);return Math.min(Y,_-Y)}function Ie(l,{min:r,max:_,values:Y,threshold:T}){if(l===r)return r;if(l<r||l>_)return ze(l,r,T)<=ze(l,_,T)?r:_;const K=Y.findIndex(R=>l<=R),q=Y[K-1],$=Y[K];return l-q<=$-l?q:$}function Qe(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function De(){if(typeof e.defaultDate!="string"){const l=j(!0);return l.dateHash=ue(l),l}return Ee(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function _e(){return Lt(c)===!0||G.value!==null&&(G.value.values.length===0||w.value==="hour"&&E.value!==!0&&L.value[H.value===!0?"am":"pm"].values.length===0)}function Ve(){const l=Q.value,{top:r,left:_,width:Y}=l.getBoundingClientRect(),T=Y/2;return{top:r+T,left:_+T,dist:T*.7}}function ee(l){if(_e()!==!0){if(l.isFirst===!0){z=Ve(),B=A(l.evt,z);return}B=A(l.evt,z,B),l.isFinal===!0&&(z=!1,B=null,Pe())}}function Pe(){w.value==="hour"?w.value="minute":e.withSeconds&&w.value==="minute"&&(w.value="second")}function A(l,r,_){const Y=Zt(l),T=Math.abs(Y.top-r.top),K=Math.sqrt(Math.pow(Math.abs(Y.top-r.top),2)+Math.pow(Math.abs(Y.left-r.left),2));let q,$=Math.asin(T/K)*(180/Math.PI);if(Y.top<r.top?$=r.left<Y.left?90-$:270+$:$=r.left<Y.left?$+90:270-$,w.value==="hour"){if(q=$/30,L.value!==null){const R=E.value!==!0?H.value===!0:L.value.am.values.length!==0&&L.value.pm.values.length!==0?K>=r.dist:L.value.am.values.length!==0;q=Ie(q+(R===!0?0:12),L.value[R===!0?"am":"pm"])}else q=Math.round(q),E.value===!0?K<r.dist?q<12&&(q+=12):q===12&&(q=0):H.value===!0&&q===12?q=0:H.value===!1&&q!==12&&(q+=12);E.value===!0&&(H.value=q<12)}else q=Math.round($/6)%60,w.value==="minute"&&ae.value!==null?q=Ie(q,ae.value):w.value==="second"&&N.value!==null&&(q=Ie(q,N.value));return _!==q&&je[w.value](q),q}const F={hour(){w.value="hour"},minute(){w.value="minute"},second(){w.value="second"}};function Te(l){l.keyCode===13&&$e()}function be(l){l.keyCode===13&&Ke()}function Re(l){_e()!==!0&&(d.platform.is.desktop!==!0&&A(l,Ve()),Pe())}function me(l){_e()!==!0&&A(l,Ve())}function P(l){if(l.keyCode===13)w.value="hour";else if([37,39].includes(l.keyCode)){const r=l.keyCode===37?-1:1;if(L.value!==null){const _=E.value===!0?L.value.values:L.value[H.value===!0?"am":"pm"].values;if(_.length===0)return;if(o.value.hour===null)we(_[0]);else{const Y=(_.length+_.indexOf(o.value.hour)+r)%_.length;we(_[Y])}}else{const _=E.value===!0?24:12,Y=E.value!==!0&&H.value===!1?12:0,T=o.value.hour===null?-r:o.value.hour;we(Y+(24+T+r)%_)}}}function Ge(l){if(l.keyCode===13)w.value="minute";else if([37,39].includes(l.keyCode)){const r=l.keyCode===37?-1:1;if(ae.value!==null){const _=ae.value.values;if(_.length===0)return;if(o.value.minute===null)he(_[0]);else{const Y=(_.length+_.indexOf(o.value.minute)+r)%_.length;he(_[Y])}}else{const _=o.value.minute===null?-r:o.value.minute;he((60+_+r)%60)}}}function et(l){if(l.keyCode===13)w.value="second";else if([37,39].includes(l.keyCode)){const r=l.keyCode===37?-1:1;if(N.value!==null){const _=N.value.values;if(_.length===0)return;if(o.value.seconds===null)xe(_[0]);else{const Y=(_.length+_.indexOf(o.value.second)+r)%_.length;xe(_[Y])}}else{const _=o.value.second===null?-r:o.value.second;xe((60+_+r)%60)}}}function we(l){o.value.hour!==l&&(o.value.hour=l,ne())}function he(l){o.value.minute!==l&&(o.value.minute=l,ne())}function xe(l){o.value.second!==l&&(o.value.second=l,ne())}const je={hour:we,minute:he,second:xe};function $e(){H.value===!1&&(H.value=!0,o.value.hour!==null&&(o.value.hour-=12,ne()))}function Ke(){H.value===!0&&(H.value=!1,o.value.hour!==null&&(o.value.hour+=12,ne()))}function Ae(l){const r=e.modelValue;w.value!==l&&r!==void 0&&r!==null&&r!==""&&typeof r!="string"&&(w.value=l)}function ne(){if(ve.value!==null&&ve.value(o.value.hour)!==!0){o.value=Ee(),Ae("hour");return}if(U.value!==null&&U.value(o.value.minute)!==!0){o.value.minute=null,o.value.second=null,Ae("minute");return}if(e.withSeconds===!0&&p.value!==null&&p.value(o.value.second)!==!0){o.value.second=null,Ae("second");return}o.value.hour===null||o.value.minute===null||e.withSeconds===!0&&o.value.second===null||Fe()}function Fe(l){const r=Object.assign({...o.value},l),_=e.calendar==="persian"?C(r.hour)+":"+C(r.minute)+(e.withSeconds===!0?":"+C(r.second):""):jt(new Date(r.year,r.month===null?null:r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond),W.value,V.value,r.year,r.timezoneOffset);r.changed=_!==e.modelValue,h("update:modelValue",_,r)}function Je(){const l=[m("div",{class:"q-time__link "+(w.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:F.hour,onKeyup:P},re.value.hour),m("div",":"),m("div",de.value===!0?{class:"q-time__link "+(w.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:Ge,onClick:F.minute}:{class:"q-time__link"},re.value.minute)];e.withSeconds===!0&&l.push(m("div",":"),m("div",Z.value===!0?{class:"q-time__link "+(w.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onKeyup:et,onClick:F.second}:{class:"q-time__link"},re.value.second));const r=[m("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return E.value===!1&&r.push(m("div",{class:"q-time__header-ampm column items-between no-wrap"},[m("div",{class:"q-time__link "+(H.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:$e,onKeyup:Te},"AM"),m("div",{class:"q-time__link "+(H.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:b.value,onClick:Ke,onKeyup:be},"PM")])),m("div",{class:"q-time__header flex flex-center no-wrap "+v.value},r)}function Ne(){const l=o.value[w.value];return m("div",{class:"q-time__content col relative-position"},[m(Ce,{name:"q-transition--scale"},()=>m("div",{key:"clock"+w.value,class:"q-time__container-parent absolute-full"},[m("div",{ref:Q,class:"q-time__container-child fit overflow-hidden"},[zt(m("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Re,onMousedown:me},[m("div",{class:"q-time__clock-circle fit"},[m("div",{class:"q-time__clock-pointer"+(o.value[w.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:He.value}),Me.value.map(r=>m("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${r.index}`+(r.val===l?" q-time__clock-position--active "+v.value:r.disable===!0?" q-time__clock-position--disable":"")},[m("span",r.label)]))])]),Oe.value)])])),e.nowBtn===!0?m(te,{class:"q-time__now-button absolute",icon:d.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:b.value,onClick:ie}):null])}return c.proxy.setNow=ie,()=>{const l=[Ne()],r=xt(u.default);return r!==void 0&&l.push(m("div",{class:"q-time__actions"},r)),e.name!==void 0&&e.disable!==!0&&S(l,"push"),m("div",{class:Le.value,tabindex:-1},[Je(),m("div",{class:"q-time__main col overflow-auto"},l)])}}});export{sa as Q,ca as a};
