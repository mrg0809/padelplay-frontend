import{k as we,b1 as Ve,j as O,bB as Ce,p as ne,J as P,a4 as Se,bs as qe,a9 as Pe,F as Re,r as b,B as Fe,aa as Te,q as r,G as D,H as _,v as l,I as e,ad as M,s as c,ab as j,ac as F,x as o,y as k,aO as Be,af as T,ae as B,ag as I,aj as re,K as N,ah as ie,ai as de,bt as De,aS as ue}from"./index.b86c8e6e.js";import{Q as Qe}from"./QHeader.bd213683.js";import{Q as Ee}from"./QSpinnerPuff.a937dd35.js";import{Q as $}from"./QBadge.232753f6.js";import{Q as Me,a as ee}from"./QTabs.273ef540.js";import{Q as te}from"./QSelect.034f416d.js";import{a as je,Q as ae}from"./QTabPanel.65340f1e.js";import{Q as K}from"./QMarkupTable.62b5725b.js";import{Q as Oe}from"./QBtnGroup.d0b6eea5.js";import{Q as ze}from"./QSpinnerDots.b969efad.js";import{Q as Ne}from"./QPage.b77a8772.js";import{Q as Ge,a as Je}from"./QLayout.af46a9b3.js";import{C as ce}from"./ClosePopup.37b3e56c.js";import{u as Ue}from"./use-quasar.a2b20f07.js";import{s as me}from"./supabase.4d10d376.js";import{n as Ie}from"./navigationUtils.2c4b9dee.js";import{a as J}from"./api.e96a150b.js";import{C as Ae}from"./ClubNavigationMenu.bd75ef6e.js";import{a as We,g as Le}from"./tournamentUtils.e8e65a8c.js";import{a as He}from"./dateUtils.d1f141b5.js";import{_ as Ke}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./QChip.3dbc8c8c.js";import"./QItem.bb8cfc8e.js";import"./QItemLabel.37a6fbbb.js";import"./QMenu.98088be6.js";import"./position-engine.d601497f.js";import"./selection.d155da32.js";import"./format.de7e9769.js";import"./use-panel.ee7ff250.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";import"./index.c98ef0da.js";import"./QFooter.99f9350d.js";var Xe=we({name:"QBtnToggle",props:{...Ve,modelValue:{required:!0},options:{type:Array,required:!0,validator:f=>f.every(a=>("label"in a||"icon"in a||"slot"in a)&&"value"in a)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(f,{slots:a,emit:w}){const t=O(()=>f.options.find(g=>g.value===f.modelValue)!==void 0),Q=O(()=>({type:"hidden",name:f.name,value:f.modelValue})),A=qe(Q),G=O(()=>Ce(f)),u=O(()=>({rounded:f.rounded,dense:f.dense,...G.value})),i=O(()=>f.options.map((g,p)=>{const{attrs:E,value:q,slot:W,...x}=g;return{slot:W,props:{key:p,"aria-pressed":q===f.modelValue?"true":"false",...E,...x,...u.value,disable:f.disable===!0||x.disable===!0,color:q===f.modelValue?h(x,"toggleColor"):h(x,"color"),textColor:q===f.modelValue?h(x,"toggleTextColor"):h(x,"textColor"),noCaps:h(x,"noCaps")===!0,noWrap:h(x,"noWrap")===!0,size:h(x,"size"),padding:h(x,"padding"),ripple:h(x,"ripple"),stack:h(x,"stack")===!0,stretch:h(x,"stretch")===!0,onClick(C){m(q,g,C)}}}}));function m(g,p,E){f.readonly!==!0&&(f.modelValue===g?f.clearable===!0&&(w("update:modelValue",null,null),w("clear")):w("update:modelValue",g,p),w("click",E))}function h(g,p){return g[p]===void 0?f[p]:g[p]}function R(){const g=i.value.map(p=>ne(P,p.props,p.slot!==void 0?a[p.slot]:void 0));return f.name!==void 0&&f.disable!==!0&&t.value===!0&&A(g,"push"),Se(a.default,g)}return()=>ne(Oe,{class:"q-btn-toggle",...G.value,rounded:f.rounded,stretch:f.stretch,glossy:f.glossy,spread:f.spread},R)}});const Ye={name:"ManageTournament",components:{ClubNavigationMenu:Ae},setup(){const f=Pe(),a=Re(),w=Ue(),t=b(null),Q=b([]),A=b([]),G=b([]),u=b(!1),i=b("matches"),m=b(!1),h=b(!1),R=b(null),g=b([]),p=b([]),E=b(!1),q=b({}),W=b(!1),x=b(!1),C=b(null),X=b(!1),Y=b(!1),Z=b(!1),S=b({set1_team1:null,set1_team2:null,set2_team1:null,set2_team2:null,set3_team1:null,set3_team2:null,winner:null}),L=b({match_date:null,match_time:null,court_id:null}),se=b([]),ge=b("list"),_e=O(()=>C.value?[{label:C.value.team1,value:C.value.team1_players[0]},{label:C.value.team2,value:C.value.team2_players[0]}]:[]),fe=O(()=>{var s;return!R.value||((s=t.value)==null?void 0:s.system)!=="liga"?Q.value:Q.value.filter(n=>n.jornada===R.value)}),pe=O(()=>g.value.map(s=>({label:`Jornada ${s}`,value:s}))),ye=O(()=>{if(!q.value||Object.keys(q.value).length===0)return{};const s={"Playoffs - Octavos de Final":1,"Playoffs - Cuartos de Final":2,"Playoffs - Semifinal":3,"Playoffs - Final":4},n={};return Object.keys(q.value).sort((d,y)=>(s[d]||99)-(s[y]||99)).forEach(d=>{n[d]=q.value[d]}),n}),ve=(s,n)=>{const y=Math.pow(2,s),v=60*y;return{marginTop:n===0?`${v/2}px`:`${v}px`}},be=(s,n)=>{if(!s.winner||!s.has_result)return!1;const d=n==="team1"?s.team1_players:s.team2_players;return d&&d.includes(s.winner)};Fe(async()=>{await he(),await H(),await le(),await ke(),await xe(),await oe()});const he=async()=>{u.value=!0;try{const s=f.params.tournamentId,{data:n,error:d}=await me.from("tournaments").select("*").eq("id",s).single();if(d)throw d;t.value=n}catch(s){console.error("Error loading tournament:",s),w.notify({type:"negative",message:"Error al cargar el torneo"})}finally{u.value=!1}},H=async()=>{var s;try{const n=f.params.tournamentId,d=await J.get(`/tournaments/${n}/matches`);if(Q.value=d.data.matches,((s=t.value)==null?void 0:s.system)==="liga"){const y=[...new Set(Q.value.map(v=>v.jornada).filter(v=>v!=null))];g.value=y.sort((v,V)=>v-V)}h.value=Q.value.some(y=>y.group_name)}catch(n){console.error("Error loading matches:",n),w.notify({type:"negative",message:"Error al cargar los partidos"})}},le=async()=>{try{const s=f.params.tournamentId,n=await J.get(`/tournaments/${s}/standings`);A.value=n.data.standings,m.value=n.data.is_retas||!1}catch(s){console.error("Error loading standings:",s),w.notify({type:"negative",message:"Error al cargar las posiciones"})}},ke=async()=>{try{const s=f.params.tournamentId,n=await J.get(`/tournaments/${s}/groups`);G.value=n.data.groups||[]}catch(s){console.error("Error loading group standings:",s)}},xe=async()=>{var s;try{if((s=t.value)!=null&&s.courts_used){const{data:n,error:d}=await me.from("courts").select("id, name").in("id",t.value.courts_used);!d&&n&&(se.value=n.map(y=>({label:y.name,value:y.id})))}}catch(n){console.error("Error loading courts:",n)}},oe=async()=>{E.value=!0;try{const s=f.params.tournamentId,y=((await J.get(`/tournaments/${s}/matches`)).data.matches||[]).filter(V=>V.phase&&(V.phase.includes("Playoff")||V.phase.includes("Semifinal")||V.phase.includes("Final")||V.phase.includes("Cuartos")||V.phase.includes("Octavos"))&&!V.phase.includes("Grupos"));p.value=y;const v={};y.forEach(V=>{const U=V.phase||"Eliminaci\xF3n";v[U]||(v[U]=[]),v[U].push(V)}),q.value=v}catch(s){console.error("Error loading playoff matches:",s)}finally{E.value=!1}};return{tournament:t,matches:Q,filteredMatches:fe,standings:A,groupStandings:G,hasGroups:h,loading:u,activeTab:i,isRetasTournament:m,selectedJornada:R,jornadaOptions:pe,availableJornadas:g,playoffMatches:p,loadingBracket:E,bracketByRounds:q,bracketViewMode:ge,sortedBracketRounds:ye,resultDialogVisible:W,rescheduleDialogVisible:x,selectedMatch:C,resultForm:S,rescheduleForm:L,courtOptions:se,winnerOptions:_e,generatingPlayoffs:Z,savingResult:X,savingReschedule:Y,getSystemName:s=>Le(s),formatScore:s=>{if(!s)return"Sin resultado";try{const n=typeof s=="string"?JSON.parse(s):s;let d=[];return n.set1&&d.push(`${n.set1.team1}-${n.set1.team2}`),n.set2&&d.push(`${n.set2.team1}-${n.set2.team2}`),n.set3&&d.push(`${n.set3.team1}-${n.set3.team2}`),d.join(", ")}catch{return"Error en formato"}},getTeamScore:(s,n)=>{if(!s)return"";try{const d=typeof s=="string"?JSON.parse(s):s;let y=[];return d.set1&&y.push(d.set1[n]),d.set2&&y.push(d.set2[n]),d.set3&&y.push(d.set3[n]),y.filter(v=>v!==void 0).join("-")}catch{return""}},getMatchPhaseDisplay:We,formatShortDate:He,getClubMatchSpacing:ve,isWinningTeam:be,openResultDialog:s=>{var n,d,y,v,V,U;if(C.value=s,s.score)try{const z=typeof s.score=="string"?JSON.parse(s.score):s.score;S.value={set1_team1:((n=z.set1)==null?void 0:n.team1)||null,set1_team2:((d=z.set1)==null?void 0:d.team2)||null,set2_team1:((y=z.set2)==null?void 0:y.team1)||null,set2_team2:((v=z.set2)==null?void 0:v.team2)||null,set3_team1:((V=z.set3)==null?void 0:V.team1)||null,set3_team2:((U=z.set3)==null?void 0:U.team2)||null,winner:s.winner}}catch(z){console.error("Error parsing score:",z)}else S.value={set1_team1:null,set1_team2:null,set2_team1:null,set2_team2:null,set3_team1:null,set3_team2:null,winner:null};W.value=!0},openRescheduleDialog:s=>{C.value=s,L.value={match_date:s.match_date,match_time:s.match_time,court_id:s.court_id},x.value=!0},saveResult:async()=>{var s,n;if(!!C.value){if(!S.value.winner){w.notify({type:"negative",message:"Debes seleccionar un ganador"});return}X.value=!0;try{const d={set1:{team1:S.value.set1_team1,team2:S.value.set1_team2},set2:{team1:S.value.set2_team1,team2:S.value.set2_team2}};S.value.set3_team1!==null&&S.value.set3_team2!==null&&(d.set3={team1:S.value.set3_team1,team2:S.value.set3_team2});const y=await J.put(`/tournaments/${t.value.id}/matches/${C.value.id}/result`,{score:d,winner:S.value.winner});let v="Resultado guardado exitosamente";y.data.playoff_generated&&(v+=`
\xA1Fase de grupos completada! Se generaron ${y.data.playoff_info.matches_created} partidos de playoffs.`),y.data.next_round_generated&&(v+=`
\xA1Ronda completada! Se generaron ${y.data.next_round_info.matches_created} partidos para ${y.data.next_round_info.phase}.`),w.notify({type:"positive",message:v,timeout:y.data.playoff_generated||y.data.next_round_generated?5e3:2e3}),W.value=!1,await H(),await le(),await oe()}catch(d){console.error("Error saving result:",d),w.notify({type:"negative",message:((n=(s=d.response)==null?void 0:s.data)==null?void 0:n.detail)||"Error al guardar el resultado"})}finally{X.value=!1}}},saveReschedule:async()=>{var s,n;if(!!C.value){Y.value=!0;try{const d=await J.put(`/tournaments/${t.value.id}/matches/${C.value.id}/reschedule`,{match_date:L.value.match_date,match_time:L.value.match_time+":00",court_id:L.value.court_id});w.notify({type:"positive",message:"Partido reagendado exitosamente"}),x.value=!1,await H()}catch(d){console.error("Error rescheduling match:",d),w.notify({type:"negative",message:((n=(s=d.response)==null?void 0:s.data)==null?void 0:n.detail)||"Error al reagendar el partido"})}finally{Y.value=!1}}},manuallyGeneratePlayoffs:async()=>{var s,n;Z.value=!0;try{const d=await J.post(`/tournaments/${t.value.id}/generate-playoffs`);w.notify({type:"positive",message:`Se generaron ${d.data.playoff_matches_created} partidos de playoffs exitosamente`,timeout:3e3}),await H()}catch(d){console.error("Error generating playoffs:",d),w.notify({type:"negative",message:((n=(s=d.response)==null?void 0:s.data)==null?void 0:n.detail)||"Error al generar playoffs",timeout:5e3})}finally{Z.value=!1}},goBack:()=>{a.back()},goToDashboard:()=>{Ie(a,userStore)}}}},Ze={class:"header-content"},$e={class:"greeting"},et={class:"header-icons"},tt={key:0,class:"text-center q-mt-md"},at={key:1},st={class:"q-mt-none"},lt={class:"row q-gutter-md"},ot={class:"col"},nt={class:"col"},rt={key:0,class:"q-mt-md"},it={key:0,class:"q-mb-md"},dt={class:"matches-list"},ut={class:"match-header row items-center justify-between"},ct={class:"col"},mt={class:"q-my-none"},gt={class:"text-caption q-mb-none"},_t={key:0,class:"text-caption text-white q-mb-none"},ft={class:"col-auto"},pt={key:0,class:"q-mt-md"},yt={class:"q-mt-md row q-gutter-sm"},vt={key:0,class:"text-center q-pa-xl"},bt={key:0},ht={class:"q-mt-none"},kt={class:"text-left"},xt={class:"text-left"},wt={class:"text-center"},Vt={class:"text-center"},Ct={class:"text-center"},St={class:"text-center"},qt={key:0,class:"text-center q-pa-md"},Pt={class:"text-left"},Rt={class:"text-left"},Ft={class:"text-center"},Tt={class:"text-center"},Bt={class:"text-center"},Dt={class:"text-center"},Qt={class:"text-left"},Et={class:"text-left"},Mt={class:"text-center"},jt={class:"text-center"},Ot={class:"text-center"},zt={class:"text-center"},Nt={key:2,class:"text-center q-pa-xl"},Gt={key:0,class:"q-mb-lg"},Jt={class:"text-subtitle2"},Ut={class:"text-left"},It={class:"text-left"},At={class:"text-center"},Wt={class:"text-center"},Lt={class:"text-center"},Ht={class:"row items-center justify-between q-mb-md"},Kt={class:"q-mt-none q-mb-none"},Xt={key:0,class:"text-center q-pa-md"},Yt={key:1,class:"text-center q-pa-xl"},Zt={key:0,class:"text-caption"},$t={key:2,class:"bracket-view q-mt-md"},ea={class:"text-h6 q-mb-md"},ta={class:"row q-col-gutter-md"},aa={class:"row items-center justify-between q-mb-sm"},sa={class:"text-caption text-grey"},la={class:"bracket-match-content q-mb-sm"},oa={class:"row items-center justify-between q-mb-xs"},na={class:"col"},ra={key:0,class:"col-auto"},ia={class:"row items-center justify-between"},da={class:"col"},ua={key:0,class:"col-auto"},ca={class:"row q-gutter-sm q-mt-sm"},ma={key:3,class:"tournament-bracket-club q-mt-md"},ga={class:"bracket-wrapper-club"},_a={class:"round-title-club"},fa={class:"matches-container-club"},pa=["onClick"],ya={class:"team-name-club"},va={key:0,class:"team-score-club"},ba={class:"team-name-club"},ha={key:0,class:"team-score-club"},ka={class:"match-actions-overlay"},xa={class:"text-caption"},wa={key:0,class:"connector-line-club"},Va={class:"q-gutter-md"},Ca={class:"q-gutter-md"};function Sa(f,a,w,t,Q,A){const G=Te("ClubNavigationMenu");return r(),D(Ge,{view:"hHh lpR fFf",class:"body text-white"},{default:_(()=>[l(Qe,{elevated:"",class:"bg-primary text-white"},{default:_(()=>[e("div",Ze,[e("div",$e,[e("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:a[0]||(a[0]=(...u)=>t.goToDashboard&&t.goToDashboard(...u))}),a[17]||(a[17]=M(" Administrar Torneo "))]),e("div",et,[l(P,{flat:"",round:"",icon:"arrow_back",onClick:t.goBack},null,8,["onClick"])])])]),_:1}),l(Je,null,{default:_(()=>[l(Ne,{class:"q-pa-md"},{default:_(()=>[t.loading?(r(),c("div",tt,[l(Ee,{color:"primary",size:"3em"}),a[18]||(a[18]=e("p",null,"Cargando informaci\xF3n del torneo...",-1))])):t.tournament?(r(),c("div",at,[l(j,{class:"q-mb-md transparent-card"},{default:_(()=>[l(F,null,{default:_(()=>[e("h4",st,o(t.tournament.name),1),e("div",lt,[e("div",ot,[e("p",null,[a[19]||(a[19]=e("strong",null,"Sistema:",-1)),M(" "+o(t.getSystemName(t.tournament.system)),1)]),e("p",null,[a[20]||(a[20]=e("strong",null,"Categor\xEDa:",-1)),M(" "+o(t.tournament.category),1)]),e("p",null,[a[21]||(a[21]=e("strong",null,"G\xE9nero:",-1)),M(" "+o(t.tournament.gender),1)])]),e("div",nt,[e("p",null,[a[22]||(a[22]=e("strong",null,"Fecha Inicio:",-1)),M(" "+o(t.tournament.start_date),1)]),e("p",null,[a[23]||(a[23]=e("strong",null,"Fecha Fin:",-1)),M(" "+o(t.tournament.end_date),1)]),e("p",null,[a[25]||(a[25]=e("strong",null,"Estado:",-1)),l($,{color:"green"},{default:_(()=>a[24]||(a[24]=[M("Cerrado")])),_:1})])])]),t.tournament.system==="combinado"?(r(),c("div",rt,[l(P,{label:"Generar Playoffs Manualmente",color:"primary",icon:"add_circle",onClick:t.manuallyGeneratePlayoffs,loading:t.generatingPlayoffs,size:"sm"},null,8,["onClick","loading"]),a[26]||(a[26]=e("p",{class:"text-caption q-mt-xs text-grey-7"}," Usar solo si los playoffs no se generaron autom\xE1ticamente ",-1))])):k("",!0)]),_:1})]),_:1}),l(Me,{modelValue:t.activeTab,"onUpdate:modelValue":a[1]||(a[1]=u=>t.activeTab=u),dense:"",class:"text-white","active-color":"primary","indicator-color":"primary",align:"justify"},{default:_(()=>[l(ee,{name:"matches",label:"Partidos",icon:"sports_tennis"}),l(ee,{name:"standings",label:"Posiciones",icon:"emoji_events"}),l(ee,{name:"bracket",label:"Cuadro",icon:"grid_on"})]),_:1},8,["modelValue"]),l(Be),l(je,{modelValue:t.activeTab,"onUpdate:modelValue":a[4]||(a[4]=u=>t.activeTab=u),animated:"",class:"transparent-bg"},{default:_(()=>[l(ae,{name:"matches"},{default:_(()=>{var u;return[((u=t.tournament)==null?void 0:u.system)==="liga"&&t.availableJornadas.length>0?(r(),c("div",it,[l(te,{modelValue:t.selectedJornada,"onUpdate:modelValue":a[2]||(a[2]=i=>t.selectedJornada=i),options:t.jornadaOptions,label:"Filtrar por Jornada",outlined:"",clearable:"","emit-value":"","map-options":"",dark:"",class:"jornada-filter"},null,8,["modelValue","options"])])):k("",!0),e("div",dt,[(r(!0),c(T,null,B(t.filteredMatches,i=>(r(),D(j,{key:i.id,class:"q-mb-md transparent-card"},{default:_(()=>[l(F,null,{default:_(()=>[e("div",ut,[e("div",ct,[e("h6",mt,o(i.team1)+" vs "+o(i.team2),1),e("p",gt,o(t.formatShortDate(i.match_date))+" - "+o(i.match_time.substring(0,5))+" | Cancha: "+o(i.court_name),1),i.phase||i.group_name||i.jornada?(r(),c("p",_t,[l(I,{name:"info",size:"xs"}),M(" "+o(t.getMatchPhaseDisplay(i)),1)])):k("",!0)]),e("div",ft,[l($,{color:i.has_result?"green":"orange",label:i.has_result?"Finalizado":"Pendiente"},null,8,["color","label"])])]),i.has_result?(r(),c("div",pt,[e("p",null,[a[27]||(a[27]=e("strong",null,"Resultado:",-1)),M(" "+o(t.formatScore(i.score)),1)])])):k("",!0),e("div",yt,[i.has_result?k("",!0):(r(),D(P,{key:0,label:"Registrar Resultado",color:"green",size:"sm",icon:"edit_note",onClick:m=>t.openResultDialog(i)},null,8,["onClick"])),i.has_result?(r(),D(P,{key:1,label:"Editar Resultado",color:"primary",size:"sm",icon:"edit",onClick:m=>t.openResultDialog(i)},null,8,["onClick"])):k("",!0),l(P,{label:"Reagendar",color:"orange",size:"sm",icon:"schedule",onClick:m=>t.openRescheduleDialog(i)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),t.filteredMatches.length===0?(r(),c("div",vt,[l(I,{name:"info",size:"3em",color:"grey"}),e("p",null,"No hay partidos programados"+o(t.selectedJornada?" para esta jornada":""),1)])):k("",!0)])]}),_:1}),l(ae,{name:"standings"},{default:_(()=>[t.hasGroups&&t.groupStandings.length>0?(r(),c("div",bt,[(r(!0),c(T,null,B(t.groupStandings,u=>(r(),c("div",{key:u.name,class:"q-mb-lg"},[l(j,{class:"transparent-card"},{default:_(()=>[l(F,null,{default:_(()=>[e("h6",ht,o(u.name),1),l(K,{flat:"",bordered:"",class:"standings-table"},{default:_(()=>[a[28]||(a[28]=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},"Pos"),e("th",{class:"text-left"},"Equipo"),e("th",{class:"text-center"},"PJ"),e("th",{class:"text-center"},"PG"),e("th",{class:"text-center"},"PP"),e("th",{class:"text-center"},"Pts")])],-1)),e("tbody",null,[(r(!0),c(T,null,B(u.teams,(i,m)=>(r(),c("tr",{key:i.team_id},[e("td",kt,o(m+1),1),e("td",xt,o(i.team_name),1),e("td",wt,o(i.matches_played),1),e("td",Vt,o(i.wins),1),e("td",Ct,o(i.losses),1),e("td",St,[e("strong",null,o(i.total_points),1)])]))),128))])]),_:2},1024),u.teams.length===0?(r(),c("div",qt,[l(I,{name:"info",size:"2em",color:"grey"}),a[29]||(a[29]=e("p",{class:"text-caption"},"No hay equipos registrados en este grupo",-1))])):k("",!0)]),_:2},1024)]),_:2},1024)]))),128))])):(r(),D(j,{key:1,class:"transparent-card"},{default:_(()=>[l(F,null,{default:_(()=>[a[33]||(a[33]=e("h6",{class:"q-mt-none"},"Tabla de Posiciones",-1)),t.isRetasTournament?(r(),D(K,{key:0,flat:"",bordered:"",class:"standings-table"},{default:_(()=>[a[30]||(a[30]=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},"Pos"),e("th",{class:"text-left"},"Jugador"),e("th",{class:"text-center"},"PJ"),e("th",{class:"text-center"},"PG"),e("th",{class:"text-center"},"PP"),e("th",{class:"text-center"},"% Victorias")])],-1)),e("tbody",null,[(r(!0),c(T,null,B(t.standings,(u,i)=>(r(),c("tr",{key:u.team_id},[e("td",Pt,o(i+1),1),e("td",Rt,o(u.team_name),1),e("td",Ft,o(u.matches_played),1),e("td",Tt,o(u.wins),1),e("td",Bt,o(u.losses),1),e("td",Dt,[e("strong",null,o(u.win_percentage)+"%",1)])]))),128))])]),_:1})):(r(),D(K,{key:1,flat:"",bordered:"",class:"standings-table"},{default:_(()=>[a[31]||(a[31]=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},"Pos"),e("th",{class:"text-left"},"Equipo"),e("th",{class:"text-center"},"PJ"),e("th",{class:"text-center"},"PG"),e("th",{class:"text-center"},"PP"),e("th",{class:"text-center"},"Total Pts")])],-1)),e("tbody",null,[(r(!0),c(T,null,B(t.standings,(u,i)=>(r(),c("tr",{key:u.team_id},[e("td",Qt,o(i+1),1),e("td",Et,o(u.team_name),1),e("td",Mt,o(u.matches_played),1),e("td",jt,o(u.wins),1),e("td",Ot,o(u.losses),1),e("td",zt,[e("strong",null,o(u.total_points),1)])]))),128))])]),_:1})),t.standings.length===0?(r(),c("div",Nt,[l(I,{name:"info",size:"3em",color:"grey"}),a[32]||(a[32]=e("p",null,"No hay resultados registrados a\xFAn",-1))])):k("",!0)]),_:1})]),_:1}))]),_:1}),l(ae,{name:"bracket"},{default:_(()=>{var u;return[((u=t.tournament)==null?void 0:u.system)==="combinado"&&t.groupStandings.length>0?(r(),c("div",Gt,[l(j,{class:"transparent-card q-mb-md"},{default:_(()=>[l(F,null,{default:_(()=>[a[35]||(a[35]=e("h6",{class:"q-mt-none"},"Fase de Grupos",-1)),(r(!0),c(T,null,B(t.groupStandings,i=>(r(),c("div",{key:i.name,class:"q-mb-md"},[e("h6",Jt,o(i.name),1),l(K,{flat:"",bordered:""},{default:_(()=>[a[34]||(a[34]=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},"Pos"),e("th",{class:"text-left"},"Equipo"),e("th",{class:"text-center"},"PJ"),e("th",{class:"text-center"},"PG"),e("th",{class:"text-center"},"Pts")])],-1)),e("tbody",null,[(r(!0),c(T,null,B(i.teams,(m,h)=>(r(),c("tr",{key:m.team_id},[e("td",Ut,o(h+1),1),e("td",It,o(m.team_name),1),e("td",At,o(m.matches_played),1),e("td",Wt,o(m.wins),1),e("td",Lt,[e("strong",null,o(m.total_points),1)])]))),128))])]),_:2},1024)]))),128))]),_:1})]),_:1})])):k("",!0),l(j,{class:"transparent-card"},{default:_(()=>[l(F,null,{default:_(()=>{var i,m;return[e("div",Ht,[e("h6",Kt,o(((i=t.tournament)==null?void 0:i.system)==="combinado"?"Fase de Playoffs":"Cuadro de Eliminaci\xF3n"),1),t.playoffMatches.length>0?(r(),D(Xe,{key:0,modelValue:t.bracketViewMode,"onUpdate:modelValue":a[3]||(a[3]=h=>t.bracketViewMode=h),"toggle-color":"primary",options:[{label:"Lista",value:"list",icon:"list"},{label:"Bracket",value:"bracket",icon:"account_tree"}],dense:"",size:"sm"},null,8,["modelValue"])):k("",!0)]),t.loadingBracket?(r(),c("div",Xt,[l(ze,{color:"primary",size:"xl"}),a[36]||(a[36]=e("p",null,"Cargando bracket...",-1))])):t.playoffMatches.length===0?(r(),c("div",Yt,[l(I,{name:"info",size:"3em",color:"grey"}),a[37]||(a[37]=e("p",null,"No hay partidos de playoffs/eliminaci\xF3n generados a\xFAn",-1)),((m=t.tournament)==null?void 0:m.system)==="combinado"?(r(),c("p",Zt," Los playoffs se generar\xE1n autom\xE1ticamente al completar la fase de grupos ")):k("",!0)])):t.bracketViewMode==="list"?(r(),c("div",$t,[(r(!0),c(T,null,B(t.bracketByRounds,(h,R)=>(r(),c("div",{key:R,class:"q-mb-xl"},[e("h6",ea,o(R),1),e("div",ta,[(r(!0),c(T,null,B(h,g=>(r(),c("div",{key:g.id,class:"col-12 col-md-6"},[l(j,{bordered:""},{default:_(()=>[l(F,null,{default:_(()=>[e("div",aa,[e("div",sa,o(t.formatShortDate(g.match_date))+" - "+o(g.match_time.substring(0,5)),1),l($,{color:g.has_result?"green":"orange",label:g.has_result?"Finalizado":"Pendiente"},null,8,["color","label"])]),e("div",la,[e("div",oa,[e("div",na,[e("strong",null,o(g.team1),1)]),g.has_result&&g.score?(r(),c("div",ra,o(t.getTeamScore(g.score,"team1")),1)):k("",!0)]),e("div",ia,[e("div",da,[e("strong",null,o(g.team2),1)]),g.has_result&&g.score?(r(),c("div",ua,o(t.getTeamScore(g.score,"team2")),1)):k("",!0)])]),e("div",ca,[g.has_result?k("",!0):(r(),D(P,{key:0,label:"Registrar Resultado",color:"green",size:"sm",icon:"edit_note",onClick:p=>t.openResultDialog(g),dense:""},null,8,["onClick"])),g.has_result?(r(),D(P,{key:1,label:"Editar Resultado",color:"primary",size:"sm",icon:"edit",onClick:p=>t.openResultDialog(g),dense:""},null,8,["onClick"])):k("",!0)])]),_:2},1024)]),_:2},1024)]))),128))])]))),128))])):t.bracketViewMode==="bracket"?(r(),c("div",ma,[e("div",ga,[(r(!0),c(T,null,B(t.sortedBracketRounds,(h,R,g)=>(r(),c("div",{key:R,class:"bracket-column-club"},[e("h6",_a,o(R),1),e("div",fa,[(r(!0),c(T,null,B(h,(p,E)=>(r(),c("div",{key:p.id,class:"bracket-matchup-club",style:De(t.getClubMatchSpacing(g,E))},[e("div",{class:"match-card-club",onClick:q=>t.openResultDialog(p)},[e("div",{class:ue(["team-slot-club",{"winner-slot-club":t.isWinningTeam(p,"team1"),"has-result":p.has_result}])},[e("span",ya,o(p.team1||"TBD"),1),p.has_result?(r(),c("span",va,o(t.getTeamScore(p.score,"team1")),1)):k("",!0)],2),e("div",{class:ue(["team-slot-club",{"winner-slot-club":t.isWinningTeam(p,"team2"),"has-result":p.has_result}])},[e("span",ba,o(p.team2||"TBD"),1),p.has_result?(r(),c("span",ha,o(t.getTeamScore(p.score,"team2")),1)):k("",!0)],2),e("div",ka,[l(I,{name:"edit",size:"sm"}),e("span",xa,o(p.has_result?"Editar":"Registrar"),1)])],8,pa),g<Object.keys(t.sortedBracketRounds).length-1?(r(),c("div",wa)):k("",!0)],4))),128))])]))),128))])])):k("",!0)]}),_:1})]),_:1})]}),_:1})]),_:1},8,["modelValue"])])):k("",!0),l(re,{modelValue:t.resultDialogVisible,"onUpdate:modelValue":a[12]||(a[12]=u=>t.resultDialogVisible=u)},{default:_(()=>[l(j,{class:"bg-dark text-white",style:{"min-width":"350px"}},{default:_(()=>[l(F,null,{default:_(()=>a[38]||(a[38]=[e("div",{class:"text-h6"},"Registrar Resultado",-1)])),_:1}),l(F,null,{default:_(()=>{var u,i;return[e("p",null,[e("strong",null,o((u=t.selectedMatch)==null?void 0:u.team1)+" vs "+o((i=t.selectedMatch)==null?void 0:i.team2),1)]),e("div",Va,[l(N,{modelValue:t.resultForm.set1_team1,"onUpdate:modelValue":a[5]||(a[5]=m=>t.resultForm.set1_team1=m),type:"number",label:"Set 1 - Equipo 1",outlined:"",dark:"",min:"0",max:"7"},null,8,["modelValue"]),l(N,{modelValue:t.resultForm.set1_team2,"onUpdate:modelValue":a[6]||(a[6]=m=>t.resultForm.set1_team2=m),type:"number",label:"Set 1 - Equipo 2",outlined:"",dark:"",min:"0",max:"7"},null,8,["modelValue"]),l(N,{modelValue:t.resultForm.set2_team1,"onUpdate:modelValue":a[7]||(a[7]=m=>t.resultForm.set2_team1=m),type:"number",label:"Set 2 - Equipo 1",outlined:"",dark:"",min:"0",max:"7"},null,8,["modelValue"]),l(N,{modelValue:t.resultForm.set2_team2,"onUpdate:modelValue":a[8]||(a[8]=m=>t.resultForm.set2_team2=m),type:"number",label:"Set 2 - Equipo 2",outlined:"",dark:"",min:"0",max:"7"},null,8,["modelValue"]),l(N,{modelValue:t.resultForm.set3_team1,"onUpdate:modelValue":a[9]||(a[9]=m=>t.resultForm.set3_team1=m),type:"number",label:"Set 3 - Equipo 1 (Opcional)",outlined:"",dark:"",min:"0",max:"7"},null,8,["modelValue"]),l(N,{modelValue:t.resultForm.set3_team2,"onUpdate:modelValue":a[10]||(a[10]=m=>t.resultForm.set3_team2=m),type:"number",label:"Set 3 - Equipo 2 (Opcional)",outlined:"",dark:"",min:"0",max:"7"},null,8,["modelValue"]),l(te,{modelValue:t.resultForm.winner,"onUpdate:modelValue":a[11]||(a[11]=m=>t.resultForm.winner=m),options:t.winnerOptions,label:"Ganador",outlined:"",dark:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])]}),_:1}),l(ie,{align:"right"},{default:_(()=>[de(l(P,{flat:"",label:"Cancelar",color:"red"},null,512),[[ce]]),l(P,{flat:"",label:"Guardar",color:"green",onClick:t.saveResult,loading:t.savingResult},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(re,{modelValue:t.rescheduleDialogVisible,"onUpdate:modelValue":a[16]||(a[16]=u=>t.rescheduleDialogVisible=u)},{default:_(()=>[l(j,{class:"bg-dark text-white",style:{"min-width":"350px"}},{default:_(()=>[l(F,null,{default:_(()=>a[39]||(a[39]=[e("div",{class:"text-h6"},"Reagendar Partido",-1)])),_:1}),l(F,null,{default:_(()=>{var u,i;return[e("p",null,[e("strong",null,o((u=t.selectedMatch)==null?void 0:u.team1)+" vs "+o((i=t.selectedMatch)==null?void 0:i.team2),1)]),e("div",Ca,[l(N,{modelValue:t.rescheduleForm.match_date,"onUpdate:modelValue":a[13]||(a[13]=m=>t.rescheduleForm.match_date=m),type:"date",label:"Nueva Fecha",outlined:"",dark:""},null,8,["modelValue"]),l(N,{modelValue:t.rescheduleForm.match_time,"onUpdate:modelValue":a[14]||(a[14]=m=>t.rescheduleForm.match_time=m),type:"time",label:"Nueva Hora",outlined:"",dark:""},null,8,["modelValue"]),l(te,{modelValue:t.rescheduleForm.court_id,"onUpdate:modelValue":a[15]||(a[15]=m=>t.rescheduleForm.court_id=m),options:t.courtOptions,label:"Nueva Cancha",outlined:"",dark:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])]}),_:1}),l(ie,{align:"right"},{default:_(()=>[de(l(P,{flat:"",label:"Cancelar",color:"red"},null,512),[[ce]]),l(P,{flat:"",label:"Guardar",color:"green",onClick:t.saveReschedule,loading:t.savingReschedule},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(G)]),_:1})}var ys=Ke(Ye,[["render",Sa],["__scopeId","data-v-197fe8dd"]]);export{ys as default};
