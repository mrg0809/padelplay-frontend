import{x as X,a5 as Y,r as b,h as Z,a6 as $,o as v,z as y,A as l,d as e,B as c,a9 as i,D as p,bE as ee,t as f,a7 as V,a8 as u,ad as h,a as B,aa as N,ab as q,E as g,ae as w,af as E,aI as ae,e as le}from"./index.687b44e8.js";import{Q as oe}from"./QHeader.289f0645.js";import{Q as re,a as P}from"./QTabs.979bee57.js";import{Q as n}from"./QItemLabel.bbebea39.js";import{a as te,Q}from"./QTabPanel.d4470d6c.js";import{Q as L,a as I}from"./QItem.eb9291fb.js";import{Q as M}from"./QList.1288e946.js";import{Q as ie}from"./QPage.fcc9aae1.js";import{Q as ne,a as se}from"./QLayout.30990248.js";import{C as U}from"./ClosePopup.89fae5e1.js";import{C as de}from"./ClubNavigationMenu.44af5278.js";import{n as ue}from"./navigationUtils.2c4b9dee.js";import{a as A}from"./api.1c42dce4.js";import{s as ce}from"./supabase.66aa98e2.js";import{_ as fe}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./use-panel.33109fa4.js";import"./touch.9135741d.js";import"./selection.0f785986.js";import"./use-render-cache.3aae9b27.js";import"./QFooter.b7b22f15.js";const _e={name:"CoachProfile",components:{ClubNavigationMenu:de},setup(){const C=X(),o=Y(),T=b("info"),a=b({id:null,name:"",photo_url:"",coach_focus:"",resume:"",focus:"",category:"",gender:"",price_for_one:null,price_for_two:null,price_for_three:null,price_for_four:null,schedule:[]}),x=b(!1),k=b(!1),D=b(!1),r=b({resume:"",focus:""}),s=b({price_for_one:null,price_for_two:null,price_for_three:null,price_for_four:null}),_=b([]),O=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"],z=async()=>{const d=o.params.id;try{const{data:t,error:m}=await ce.from("coaches").select(`
              id, 
              name,
              price_for_one,
              price_for_two,
              price_for_three,
              price_for_four,
              coach_resume,
              coach_focus,
              availability, 
              players(gender, photo_url, category)
            `).eq("id",d).single();if(m)throw m;a.value={id:t.id,name:t.name,photo_url:t.players.photo_url,coach_focus:t.coach_focus,resume:t.coach_resume,focus:t.coach_focus,category:t.players.category,gender:t.players.gender,price_for_one:t.price_for_one,price_for_two:t.price_for_two,price_for_three:t.price_for_three,price_for_four:t.price_for_four,schedule:t.availability||[]},r.value={resume:t.coach_resume,focus:t.coach_focus},s.value={price_for_one:t.price_for_one,price_for_two:t.price_for_two,price_for_three:t.price_for_three,price_for_four:t.price_for_four},_.value=O.map(S=>t.availability.find(K=>K.day===S)||{day:S,is_open:!1,start_time:"",end_time:""})}catch(t){console.error("Error obteniendo datos del coach:",t.message)}},R=()=>{r.value={resume:a.value.resume,focus:a.value.focus},x.value=!0},G=()=>{s.value={price_for_one:a.value.price_for_one,price_for_two:a.value.price_for_two,price_for_three:a.value.price_for_three,price_for_four:a.value.price_for_four},k.value=!0},H=()=>{_.value=O.map(d=>a.value.schedule.find(m=>m.day===d)||{day:d,is_open:!1,start_time:"",end_time:""}),D.value=!0},j=async()=>{try{(await A.put(`coaches/edit-info/${a.value.id}`,{coach_resume:r.value.resume,coach_focus:r.value.focus})).data&&(a.value.resume=r.value.resume,a.value.focus=r.value.focus,x.value=!1)}catch(d){console.error("Error actualizando informaci\xF3n:",d.message)}},F=async()=>{try{(await A.put(`coaches/edit-prices/${a.value.id}`,{price_for_one:s.value.price_for_one,price_for_two:s.value.price_for_two,price_for_three:s.value.price_for_three,price_for_four:s.value.price_for_four})).data&&(a.value.price_for_one=s.value.price_for_one,a.value.price_for_two=s.value.price_for_two,a.value.price_for_three=s.value.price_for_three,a.value.price_for_four=s.value.price_for_four,k.value=!1)}catch(d){console.error("Error actualizando precios:",d.message)}},J=async()=>{try{const d=_.value.filter(m=>m.is_open).map(m=>({day:m.day,start_time:m.start_time,end_time:m.end_time}));(await A.put(`coaches/edit-availability/${a.value.id}`,{availability:d})).data&&(a.value.schedule=d,D.value=!1)}catch(d){console.error("Error actualizando disponibilidad:",d.message)}},W=()=>{C.back()};return Z(z),{coach:a,tab:T,isEditInfoDialogOpen:x,isEditPricesDialogOpen:k,isEditAvailabilityDialogOpen:D,editInfoData:r,editPricesData:s,editAvailabilityData:_,openEditInfoDialog:R,openEditPricesDialog:G,openEditAvailabilityDialog:H,saveInfo:j,savePrices:F,saveAvailability:J,goBack:W,goToDashboard:()=>{ue(C,userStore)}}}},me={class:"header-content"},pe={class:"greeting"},be={class:"header-icons"},ve={class:"q-mb-md text-center"},ge=["src"],ye={class:"text-h5"},Ve={class:"text-caption text-white"},he={class:"text-bold"},De={class:"text-bold"};function xe(C,o,T,a,x,k){const D=$("ClubNavigationMenu");return v(),y(ne,{view:"hHh lpR fFf",class:"body text-white"},{default:l(()=>[e(oe,{elevated:"",class:"bg-primary text-white"},{default:l(()=>[c("div",me,[c("div",pe,[c("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:o[0]||(o[0]=(...r)=>a.goToDashboard&&a.goToDashboard(...r))}),o[12]||(o[12]=i(" Perfil del Coach ",-1))]),c("div",be,[e(p,{flat:"",round:"",icon:"arrow_back",onClick:a.goBack},null,8,["onClick"])])])]),_:1}),e(se,null,{default:l(()=>[e(ie,{class:"q-pa-md"},{default:l(()=>[c("div",ve,[e(ee,{size:"200px",class:"q-mb-md"},{default:l(()=>[c("img",{src:a.coach.photo_url||"default-avatar.png"},null,8,ge)]),_:1}),c("div",ye,f(a.coach.name),1),c("div",Ve,f(a.coach.coach_focus),1)]),e(re,{modelValue:a.tab,"onUpdate:modelValue":o[1]||(o[1]=r=>a.tab=r),align:"justify",class:"tabs-bg text-white"},{default:l(()=>[e(P,{name:"info",label:"Informaci\xF3n"}),e(P,{name:"prices",label:"Precios"}),e(P,{name:"availability",label:"Disponibilidad"})]),_:1},8,["modelValue"]),e(te,{modelValue:a.tab,"onUpdate:modelValue":o[2]||(o[2]=r=>a.tab=r),animated:"",class:"tab-panels-bg"},{default:l(()=>[e(Q,{name:"info"},{default:l(()=>[e(V,{class:"bg-transparent"},{default:l(()=>[e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>[...o[13]||(o[13]=[i("Resumen:",-1)])]),_:1}),e(n,null,{default:l(()=>[i(f(a.coach.resume),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>[...o[14]||(o[14]=[i("Categor\xEDa Jugador:",-1)])]),_:1}),e(n,null,{default:l(()=>[i(f(a.coach.category),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>[...o[15]||(o[15]=[i("G\xE9nero:",-1)])]),_:1}),e(n,null,{default:l(()=>[i(f(a.coach.gender),1)]),_:1})]),_:1}),e(h,{align:"center"},{default:l(()=>[e(p,{color:"primary",label:"Editar","text-color":"black",onClick:a.openEditInfoDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),e(Q,{name:"prices"},{default:l(()=>[e(V,{class:"bg-transparent"},{default:l(()=>[e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>[...o[16]||(o[16]=[i("Individual:",-1)])]),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_one),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>[...o[17]||(o[17]=[i("Pareja:",-1)])]),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_two),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>[...o[18]||(o[18]=[i("3 personas:",-1)])]),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_three),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>[...o[19]||(o[19]=[i("4 personas:",-1)])]),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_four),1)]),_:1})]),_:1}),e(h,{align:"center"},{default:l(()=>[e(p,{color:"primary",label:"Editar","text-color":"black",onClick:a.openEditPricesDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),e(Q,{name:"availability"},{default:l(()=>[e(V,{class:"bg-transparent"},{default:l(()=>[e(u,null,{default:l(()=>[e(M,{bordered:""},{default:l(()=>[(v(!0),B(q,null,N(a.coach.schedule,(r,s)=>(v(),y(L,{key:s,class:"q-mb-md"},{default:l(()=>[e(I,null,{default:l(()=>[c("div",he,f(r.day),1),r.start_time&&r.end_time?(v(),y(n,{key:0},{default:l(()=>[i(f(r.start_time)+" - "+f(r.end_time),1)]),_:2},1024)):(v(),y(n,{key:1},{default:l(()=>[...o[20]||(o[20]=[i(" No disponible ",-1)])]),_:1}))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(h,{align:"center"},{default:l(()=>[e(p,{color:"primary",label:"Editar","text-color":"black",onClick:a.openEditAvailabilityDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(E,{modelValue:a.isEditInfoDialogOpen,"onUpdate:modelValue":o[5]||(o[5]=r=>a.isEditInfoDialogOpen=r)},{default:l(()=>[e(V,{class:"bg-black text-white"},{default:l(()=>[e(u,null,{default:l(()=>[...o[21]||(o[21]=[c("div",{class:"text-h6"},"Editar Informaci\xF3n",-1)])]),_:1}),e(u,null,{default:l(()=>[e(g,{modelValue:a.editInfoData.resume,"onUpdate:modelValue":o[3]||(o[3]=r=>a.editInfoData.resume=r),label:"Resumen",filled:"",type:"textarea"},null,8,["modelValue"]),e(g,{modelValue:a.editInfoData.focus,"onUpdate:modelValue":o[4]||(o[4]=r=>a.editInfoData.focus=r),label:"Enfoque",filled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(h,{align:"right"},{default:l(()=>[w(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[U]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:a.saveInfo},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,{modelValue:a.isEditPricesDialogOpen,"onUpdate:modelValue":o[10]||(o[10]=r=>a.isEditPricesDialogOpen=r)},{default:l(()=>[e(V,{class:"bg-black text-white"},{default:l(()=>[e(u,null,{default:l(()=>[...o[22]||(o[22]=[c("div",{class:"text-h6"},"Editar Precios",-1)])]),_:1}),e(u,null,{default:l(()=>[e(g,{modelValue:a.editPricesData.price_for_one,"onUpdate:modelValue":o[6]||(o[6]=r=>a.editPricesData.price_for_one=r),label:"Individual",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:a.editPricesData.price_for_two,"onUpdate:modelValue":o[7]||(o[7]=r=>a.editPricesData.price_for_two=r),label:"Pareja",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:a.editPricesData.price_for_three,"onUpdate:modelValue":o[8]||(o[8]=r=>a.editPricesData.price_for_three=r),label:"3 personas",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:a.editPricesData.price_for_four,"onUpdate:modelValue":o[9]||(o[9]=r=>a.editPricesData.price_for_four=r),label:"4 personas",filled:"",type:"number"},null,8,["modelValue"])]),_:1}),e(h,{align:"right"},{default:l(()=>[w(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[U]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:a.savePrices},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,{modelValue:a.isEditAvailabilityDialogOpen,"onUpdate:modelValue":o[11]||(o[11]=r=>a.isEditAvailabilityDialogOpen=r)},{default:l(()=>[e(V,{class:"bg-black text-white"},{default:l(()=>[e(u,null,{default:l(()=>[...o[23]||(o[23]=[c("div",{class:"text-h6"},"Editar Disponibilidad",-1)])]),_:1}),e(u,null,{default:l(()=>[e(M,{bordered:""},{default:l(()=>[(v(!0),B(q,null,N(a.editAvailabilityData,(r,s)=>(v(),y(L,{key:s,class:"q-mb-md"},{default:l(()=>[e(I,null,{default:l(()=>[c("div",De,f(r.day),1),e(ae,{modelValue:r.is_open,"onUpdate:modelValue":_=>r.is_open=_,label:"\xBFDisponible?",dense:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),r.is_open?(v(),y(I,{key:0},{default:l(()=>[e(g,{modelValue:r.start_time,"onUpdate:modelValue":_=>r.start_time=_,label:"Hora de inicio",filled:"",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"]),e(g,{modelValue:r.end_time,"onUpdate:modelValue":_=>r.end_time=_,label:"Hora de fin",filled:"",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):le("",!0)]),_:2},1024))),128))]),_:1})]),_:1}),e(h,{align:"right"},{default:l(()=>[w(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[U]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:a.saveAvailability},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(D)]),_:1})}var Je=fe(_e,[["render",xe],["__scopeId","data-v-012fbdfa"]]);export{Je as default};
