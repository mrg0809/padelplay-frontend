import{F as U,r as c,B,aa as M,q as p,G as _,H as s,v as l,I as f,ad as d,J as V,s as S,ae as N,af as T,ab as F,ac as Q,K as t,aj as E,x as m}from"./index.813f732c.js";import{Q as H}from"./QHeader.16359345.js";import{Q as b}from"./QItemLabel.b765193d.js";import{Q as P,a as R}from"./QItem.01a0916f.js";import{Q as h}from"./QList.e999ac61.js";import{Q as j}from"./QPage.f2a762bd.js";import{Q as J,a as z}from"./QLayout.3fe3ded4.js";import{Q as x}from"./QSelect.9dde8fac.js";import{Q as A}from"./QForm.5677b780.js";import{s as C}from"./supabase.e5048c08.js";import{n as G}from"./navigationUtils.2c4b9dee.js";import{u as K}from"./use-quasar.b33049a5.js";import{u as O}from"./userStore.528cc103.js";import{a as k}from"./api.e96a150b.js";import{C as W}from"./ClubNavigationMenu.e1c6e6e0.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.bed768cd.js";import"./QMenu.029043d4.js";import"./position-engine.f10226bc.js";import"./selection.7c5ca85a.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./pinia.24da212c.js";import"./index.c98ef0da.js";import"./QTabs.d300a253.js";import"./QFooter.44b747ac.js";const Y={name:"ManageLessons",components:{ClubNavigationMenu:W},setup(){const g=U(),a=K(),r=O(),o=c([]),v=c([]),L=c([]),i=c(!1),e=c({name:"",description:"",lesson_date:"",lesson_time:"",duration:60,coach:"",court_id:"",lesson_type:"public",max_participants:null}),q=()=>{g.back()},D=async()=>{const n=await C.from("coaches").select("*").eq("club_id",r.clubId),w=await C.from("courts").select("*").eq("club_id",r.clubId);v.value=n.data.map(u=>({label:u.name,value:u.id})),L.value=w.data.map(u=>({label:u.name,value:u.id})),i.value=!0},I=async()=>{try{const n={name:e.value.name,description:e.value.description,lesson_date:e.value.lesson_date,lesson_time:e.value.lesson_time,duration:e.value.duration,lesson_type:e.value.lesson_type,club_id:r.clubId,court_id:e.value.court_id.value,coach:e.value.coach.value,price:e.value.price,max_participants:e.value.max_participants?parseInt(e.value.max_participants):null};(await k.post("/lessons",n)).data.message==="Lecci\xF3n creada exitosamente"&&(a.notify({type:"positive",message:"Lecci\xF3n creada exitosamente"}),i.value=!1,y())}catch(n){a.notify({type:"negative",message:"Error al crear la lecci\xF3n"}),console.error("Error al crear la lecci\xF3n:",n)}finally{i.value=!1}},y=async()=>{const n=await k.get(`/lessons?club_id=${r.clubId}`);o.value=n.data};return B(()=>{y()}),{goBack:q,lessons:o,coaches:v,courts:L,lessonDialog:i,newLesson:e,openLessonDialog:D,createLesson:I,goToDashboard:()=>{G(g,r)}}}},Z={class:"header-content"},$={class:"greeting"},ee={class:"header-icons"};function ae(g,a,r,o,v,L){const i=M("ClubNavigationMenu");return p(),_(J,{view:"hHh lpR fFf",class:"body text-white"},{default:s(()=>[l(H,{elevated:"",class:"bg-primary text-white"},{default:s(()=>[f("div",Z,[f("div",$,[f("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:a[0]||(a[0]=(...e)=>o.goToDashboard&&o.goToDashboard(...e))}),a[11]||(a[11]=d(" Configura clases "))]),f("div",ee,[l(V,{flat:"",round:"",icon:"arrow_back",onClick:o.goBack},null,8,["onClick"])])])]),_:1}),l(z,null,{default:s(()=>[l(j,{class:"q-pa-md"},{default:s(()=>[l(h,{bordered:"",class:"q-mb-md"},{default:s(()=>[(p(!0),S(T,null,N(o.lessons,e=>(p(),_(P,{key:e.id,class:"q-my-sm"},{default:s(()=>[l(R,null,{default:s(()=>[l(b,null,{default:s(()=>[d(m(e.name),1)]),_:2},1024),l(b,{caption:""},{default:s(()=>[d(m(e.description),1)]),_:2},1024),l(b,{caption:""},{default:s(()=>[d(m(e.lesson_date)+" a las "+m(e.lesson_time),1)]),_:2},1024),e.max_participants?(p(),_(b,{key:0,caption:""},{default:s(()=>[d(" Capacidad: "+m(e.available_slots||0)+"/"+m(e.max_participants)+" disponibles ",1)]),_:2},1024)):(p(),_(b,{key:1,caption:""},{default:s(()=>a[12]||(a[12]=[d(" Capacidad: Ilimitada ")])),_:1}))]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(V,{glossy:"",round:"",size:"lg",color:"black",icon:"add",class:"fixed-bottom-right q-mb-xl",onClick:o.openLessonDialog},null,8,["onClick"])]),_:1})]),_:1}),l(E,{modelValue:o.lessonDialog,"onUpdate:modelValue":a[10]||(a[10]=e=>o.lessonDialog=e)},{default:s(()=>[l(F,{class:"q-pa-md bg-black"},{default:s(()=>[l(Q,null,{default:s(()=>a[13]||(a[13]=[f("div",{class:"text-h6"},"Agregar nueva lecci\xF3n",-1)])),_:1}),l(Q,null,{default:s(()=>[l(A,{onSubmit:o.createLesson},{default:s(()=>[l(t,{modelValue:o.newLesson.name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.newLesson.name=e),label:"Nombre",required:""},null,8,["modelValue"]),l(t,{modelValue:o.newLesson.description,"onUpdate:modelValue":a[2]||(a[2]=e=>o.newLesson.description=e),label:"Descripci\xF3n"},null,8,["modelValue"]),l(t,{modelValue:o.newLesson.lesson_date,"onUpdate:modelValue":a[3]||(a[3]=e=>o.newLesson.lesson_date=e),type:"date",label:"Fecha",required:""},null,8,["modelValue"]),l(t,{modelValue:o.newLesson.lesson_time,"onUpdate:modelValue":a[4]||(a[4]=e=>o.newLesson.lesson_time=e),type:"time",label:"Hora",required:""},null,8,["modelValue"]),l(t,{modelValue:o.newLesson.duration,"onUpdate:modelValue":a[5]||(a[5]=e=>o.newLesson.duration=e),type:"number",label:"Duraci\xF3n (minutos)",required:""},null,8,["modelValue"]),l(x,{modelValue:o.newLesson.coach,"onUpdate:modelValue":a[6]||(a[6]=e=>o.newLesson.coach=e),options:o.coaches,label:"Entrenador",required:""},null,8,["modelValue","options"]),l(x,{modelValue:o.newLesson.court_id,"onUpdate:modelValue":a[7]||(a[7]=e=>o.newLesson.court_id=e),options:o.courts,label:"Cancha",required:""},null,8,["modelValue","options"]),l(t,{modelValue:o.newLesson.price,"onUpdate:modelValue":a[8]||(a[8]=e=>o.newLesson.price=e),type:"number",label:"Precio por Jugador",required:""},null,8,["modelValue"]),l(t,{modelValue:o.newLesson.max_participants,"onUpdate:modelValue":a[9]||(a[9]=e=>o.newLesson.max_participants=e),type:"number",label:"M\xE1ximo de Participantes",hint:"Deja vac\xEDo para ilimitado"},null,8,["modelValue"]),l(V,{type:"submit",color:"green",label:"Crear lecci\xF3n"})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(i)]),_:1})}var Ie=X(Y,[["render",ae],["__scopeId","data-v-81c84102"]]);export{Ie as default};
