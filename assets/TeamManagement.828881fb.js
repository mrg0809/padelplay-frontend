import{a5 as ca,x as ma,y as pa,r as p,f as J,w as Ie,h as _a,o as s,z as d,A as t,d as l,B as r,D as x,a as u,Q as U,a7 as z,a8 as h,bG as V,a9 as m,t as i,ad as xe,e as g,aK as ga,ab as q,aa as w,ac as T,af as he,E as be,ae as ke,bJ as fa,J as va,aT as ya,aS as xa,bK as j,aP as Je}from"./index.39adb644.js";import{Q as Ue}from"./QHeader.3330d6d5.js";import{Q as ha,a as O}from"./QTabs.de2e2033.js";import{Q as B,a as Q}from"./QItem.87198ca3.js";import{Q as $}from"./QItemLabel.24f30c08.js";import{Q as qe}from"./QBadge.a73c281f.js";import{Q as ba}from"./QTooltip.04e4bb6f.js";import{Q as L}from"./QList.aedeb71d.js";import{a as ka,Q as H}from"./QTabPanel.0e986986.js";import{Q as f}from"./QChip.4e1820bf.js";import{Q as qa}from"./QMarkupTable.fe2e843b.js";import{Q as wa}from"./QSelect.abc13108.js";import{Q as Ca}from"./QChatMessage.a3c9d5a4.js";import{Q as Be}from"./QPage.28b7989a.js";import{Q as Le,a as Ae}from"./QLayout.136fc703.js";import{Q as Pa}from"./QToolbar.dbe67e17.js";import{Q as Qa}from"./QFooter.c2826d80.js";import{C as we}from"./ClosePopup.51e688f1.js";import{u as Ea}from"./use-quasar.eb482957.js";import{a as C}from"./api.65c10df7.js";import{s as Ne}from"./supabase.6e6ca5a2.js";import{P as za}from"./PlayerNavigationMenu.beb9b04c.js";import{B as Va}from"./BannerPromoScrolling.b0548ecb.js";import{u as Ta}from"./uploadFileUtils.89b7cb4d.js";import{_ as $a}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./position-engine.8dba34ce.js";import"./selection.365c2d2e.js";import"./use-panel.5ef3e782.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";import"./QMenu.5f547e53.js";import"./format.de7e9769.js";import"./admin.e253f26e.js";const Ma={class:"header-content"},Sa={class:"header-icons"},ja={key:0,class:"text-center q-pa-xl"},Da={key:1},Ia=["src"],Ja={class:"col q-ml-md"},Ua={class:"text-h5"},Ba={class:"text-caption"},La={class:"row items-center justify-between"},Aa={class:"text-subtitle1 text-bold q-mb-sm"},Na=["src"],Fa={key:0,class:"column q-gutter-xs"},Ra={class:"row items-center justify-between"},Ga={class:"row q-gutter-md q-mb-md"},Oa={class:"text-h5"},Ha={class:"text-h5 text-positive"},Ka={class:"text-h5 text-warning"},Xa={key:0},Wa={class:"q-mt-md"},Ya={key:1,class:"text-center text-positive q-pa-md"},Za={key:0,class:"text-center q-pa-lg"},et={key:1,class:"text-center text-grey q-pa-xl"},at={key:2,class:"q-pa-md"},tt={class:"text-h6 q-mb-md"},lt={class:"row q-gutter-xs q-mt-xs"},ot={key:0,class:"text-center q-pa-lg"},st={key:1,class:"text-center text-grey q-pa-xl"},rt={key:2,class:"q-pa-md"},nt={class:"row q-gutter-xs q-mt-xs flex-wrap"},it={key:0,class:"text-center q-pa-lg"},dt={key:1,class:"text-center text-grey q-pa-xl"},ut={key:2,class:"q-pa-md"},ct={class:"text-h6 q-mb-md"},mt={class:"text-center"},pt={class:"text-center"},_t={class:"text-center"},gt={class:"text-center"},ft={class:"text-center"},vt={class:"text-center"},yt={key:0,class:"text-center q-pa-lg"},xt={key:1,class:"text-center text-grey q-pa-xl"},ht={key:2,class:"q-pa-md"},bt={class:"row q-gutter-xs q-mt-xs"},kt={class:"q-mb-md"},qt={class:"logo-upload-container"},wt=["src"],Ct={class:"logo-overlay"},Pt={key:1,class:"q-mb-md"},Qt={class:"header-content"},Et={class:"header-icons"},zt=["src"],Vt={key:0,class:"text-center text-grey q-pa-xl"},Tt={key:2,class:"text-center q-pa-xl"},$t={__name:"TeamManagement",setup(Mt){const Fe=ca(),re=ma(),v=Ea(),K=pa(),_=Fe.params.teamId,ne=p(!1),ie=p(!1),de=p(!1),ue=p(!1),ce=p(!1),k=p(null),Ce=p([]),me=p([]),D=p([]),I=p(""),A=p(""),X=p(!1),W=p(!1),Y=p(!1),Z=p(null),Pe=p(null),M=p({name:"",logo_url:""}),y=p({category:null,player_id:null,partner_id:null}),pe=p(!1),S=p(null),P=p([]),ee=p("mi-equipo"),ae=p(!1),_e=p(!1),ge=p(!1),N=p([]),te=p({}),F=p([]),Re=p(["tercera","cuarta","quinta","sexta","libre"]),Ge=J(()=>{const o={};return Ce.value.forEach(e=>{const a=e.category;o[a]||(o[a]={name:a,players:[]}),o[a].players.push(e)}),Object.values(o)}),le=J(()=>{var o;return((o=k.value)==null?void 0:o.captain_id)===K.userId}),oe=J(()=>{var o;return((o=k.value)==null?void 0:o.tournament_id)||null}),Qe=J(()=>{if(!N.value.length)return[];const o={};return N.value.forEach(e=>{const a=e.jornada!=null?`Jornada ${e.jornada}`:"Sin Jornada";o[a]||(o[a]={name:a,matches:[]}),o[a].matches.push(e)}),Object.values(o).sort((e,a)=>{const n=parseInt(String(e.name).replace("Jornada ",""),10)||0,c=parseInt(String(a.name).replace("Jornada ",""),10)||0;return n-c})}),Ee=J(()=>_?N.value.filter(o=>(o.team1_id===_||o.team2_id===_)&&(o.phase==="groups"||!o.phase)):[]);J(()=>F.value.length>0),Ie(Y,o=>{o&&Te()}),_a(async()=>{await ze(),await se(),await ye()}),Ie(oe,o=>{o&&(Oe(),He(),Ke())},{immediate:!0});const ze=async()=>{ne.value=!0;try{const{data:o}=await C.get(`/padelite/teams/${_}`);k.value=o.data,M.value={name:k.value.name,logo_url:k.value.logo_url||""}}catch(o){console.error("Error fetching team:",o),v.notify({type:"negative",message:"Error al cargar equipo"})}finally{ne.value=!1}},Oe=async()=>{const o=oe.value;if(!!o){ae.value=!0;try{const{data:e,error:a}=await Ne.from("padelite_category_matches").select(`
        *,
        team1:padelite_teams!padelite_category_matches_team1_id_fkey(name),
        team2:padelite_teams!padelite_category_matches_team2_id_fkey(name),
        court:courts(name, club:clubs(name))
      `).eq("tournament_id",o).order("jornada",{nullsFirst:!1}).order("match_date").order("match_time");if(a)throw a;N.value=(e||[]).map(n=>{var c,E,b,R,G;return{...n,team1_name:((c=n.team1)==null?void 0:c.name)||"Equipo 1",team2_name:((E=n.team2)==null?void 0:E.name)||"Equipo 2",court_name:((b=n.court)==null?void 0:b.name)||null,club_name:((G=(R=n.court)==null?void 0:R.club)==null?void 0:G.name)||null}})}catch(e){console.error("Error fetching matches:",e),N.value=[]}finally{ae.value=!1}}},He=async()=>{const o=oe.value;if(!!o){_e.value=!0;try{const{data:e}=await C.get(`/padelite/tournaments/${o}/standings`);te.value=e.data||{}}catch(e){console.error("Error fetching standings:",e),te.value={}}finally{_e.value=!1}}},Ke=async()=>{const o=oe.value;if(!!o){ge.value=!0;try{const{data:e,error:a}=await Ne.from("padelite_category_matches").select(`
        *,
        team1:padelite_teams!padelite_category_matches_team1_id_fkey(name),
        team2:padelite_teams!padelite_category_matches_team2_id_fkey(name)
      `).eq("tournament_id",o).eq("phase","elimination").order("match_date").order("match_time");if(a)throw a;F.value=(e||[]).map(n=>{var c,E;return{...n,team1_name:((c=n.team1)==null?void 0:c.name)||null,team2_name:((E=n.team2)==null?void 0:E.name)||null}})}catch(e){console.error("Error fetching elimination:",e),F.value=[]}finally{ge.value=!1}}},fe=o=>o?new Date(o).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"}):"",ve=o=>{if(!o)return"";const[e,a]=String(o).split(":");return`${e||"00"}:${a||"00"}`},Ve=o=>{var n,c;const e=o==null?void 0:o.score;if(!e||typeof e!="object")return"";const a=[];for(const E of["set1","set2","set3"]){const b=e[E];b&&typeof b=="object"&&(b.team1!=null||b.team2!=null)&&a.push(`${(n=b.team1)!=null?n:"-"}-${(c=b.team2)!=null?c:"-"}`)}return a.length?a.join(", "):""},se=async()=>{ie.value=!0;try{const{data:o}=await C.get(`/padelite/teams/${_}/players`);Ce.value=o.data||[]}catch(o){console.error("Error fetching players:",o)}finally{ie.value=!1}},Xe=()=>{Pe.value.click()},We=async o=>{const e=o.target.files[0];if(e){const a=await Ta(e,v);a&&(M.value.logo_url=a)}},Ye=async()=>{var o,e;de.value=!0;try{await C.put(`/padelite/teams/${_}`,M.value),v.notify({type:"positive",message:"Equipo actualizado exitosamente"}),X.value=!1,await ze()}catch(a){console.error("Error updating team:",a),v.notify({type:"negative",message:((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.detail)||"Error al actualizar equipo"})}finally{de.value=!1}},Ze=async()=>{if(!I.value||I.value.length<2){D.value=[];return}try{const{data:o}=await C.get("/padelite/search/players",{params:{query:I.value}});D.value=o.data||[]}catch(o){console.error("Error searching players:",o)}},ea=o=>{y.value.player_id=o.id},aa=o=>{const e=D.value.find(a=>a.id===o);return(e==null?void 0:e.full_name)||""},ta=async()=>{var o,e;ue.value=!0;try{const a={team_id:_,player_id:y.value.player_id,category:y.value.category,partner_id:y.value.partner_id};await C.post(`/padelite/teams/${_}/players`,a),v.notify({type:"positive",message:"Jugador agregado exitosamente"}),W.value=!1,y.value={category:null,player_id:null,partner_id:null},I.value="",D.value=[],await se()}catch(a){console.error("Error adding player:",a),v.notify({type:"negative",message:((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.detail)||"Error al agregar jugador"})}finally{ue.value=!1}},la=o=>{var e;v.dialog({title:"Confirmar",message:`\xBFEst\xE1s seguro de eliminar a ${((e=o.profiles)==null?void 0:e.full_name)||"este jugador"} del equipo?`,cancel:!0,persistent:!0,dark:!0}).onOk(async()=>{var a,n;try{await C.delete(`/padelite/teams/${_}/players/${o.player_id}`),v.notify({type:"positive",message:"Jugador eliminado exitosamente"}),await se()}catch(c){console.error("Error removing player:",c),v.notify({type:"negative",message:((n=(a=c.response)==null?void 0:a.data)==null?void 0:n.detail)||"Error al eliminar jugador"})}})},Te=async()=>{try{const{data:o}=await C.get(`/padelite/teams/${_}/chat`);me.value=(o.data||[]).reverse(),await va(),Z.value&&(Z.value.scrollTop=Z.value.scrollHeight)}catch(o){console.error("Error fetching chat messages:",o)}},$e=async()=>{if(!!A.value.trim()){ce.value=!0;try{await C.post(`/padelite/teams/${_}/chat`,{team_id:_,message:A.value}),A.value="",await Te()}catch(o){console.error("Error sending message:",o),v.notify({type:"negative",message:"Error al enviar mensaje"})}finally{ce.value=!1}}},oa=()=>{Y.value=!0},Me=o=>({pending:"Pendiente",partial:"Parcial",completed:"Completado",paid:"Pagado"})[o]||o,sa=o=>{o&&re.push(`/player/${o}`)},ra=o=>o?new Date(o).toLocaleString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",ye=async()=>{pe.value=!0;try{const{data:o}=await C.get(`/padelite/teams/${_}/payment-status`);S.value=o.data}catch(o){console.error("Error fetching payment status:",o),v.notify({type:"negative",message:"Error al cargar estado de pagos"})}finally{pe.value=!1}},na=()=>{if(P.value.length===0){v.notify({type:"warning",message:"Selecciona al menos un jugador para pagar"});return}v.dialog({title:"Confirmar Pago",message:`Vas a pagar la inscripci\xF3n de ${P.value.length} jugador${P.value.length!==1?"es":""}. \xBFDeseas continuar?`,cancel:!0,persistent:!0,dark:!0}).onOk(async()=>{await ia()})},ia=async()=>{var o,e;try{const{data:a}=await C.post(`/padelite/teams/${_}/payment`,{player_ids:P.value});v.notify({type:"positive",message:a.message||"Pago procesado exitosamente"}),P.value=[],await ye(),await se()}catch(a){console.error("Error processing payment:",a),v.notify({type:"negative",message:((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.detail)||"Error al procesar pago"})}},da=()=>{re.back()},ua=()=>{re.push("/player/dashboard")};return(o,e)=>(s(),d(Le,{view:"hHh lpR fFf",class:"text-white"},{default:t(()=>[l(Ue,{elevated:"",class:"text-white"},{default:t(()=>[r("div",Ma,[r("div",{class:"greeting"},[r("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:ua})]),r("div",Sa,[l(x,{flat:"",round:"",icon:"arrow_back",onClick:da})])]),l(Va)]),_:1}),l(Ae,null,{default:t(()=>[l(Be,{class:"q-pa-md"},{default:t(()=>[ne.value?(s(),u("div",ja,[l(U,{color:"primary",size:"50px"})])):k.value?(s(),u("div",Da,[l(z,{flat:"",bordered:"",class:"q-mb-md text-white"},{default:t(()=>[l(h,{class:"row items-center"},{default:t(()=>[k.value.logo_url?(s(),d(V,{key:0,size:"80px"},{default:t(()=>[r("img",{src:k.value.logo_url},null,8,Ia)]),_:1})):(s(),d(V,{key:1,size:"80px",color:"primary","text-color":"white"},{default:t(()=>[m(i(k.value.name.charAt(0)),1)]),_:1})),r("div",Ja,[r("div",Ua,i(k.value.name),1),r("div",Ba," Pago: "+i(Me(k.value.payment_status)),1)])]),_:1}),l(xe,null,{default:t(()=>[le.value?(s(),d(x,{key:0,flat:"",color:"primary",label:"Editar Equipo",onClick:e[0]||(e[0]=a=>X.value=!0)})):g("",!0),l(x,{flat:"",color:"primary",label:"Ver Chat",onClick:oa})]),_:1})]),_:1}),l(z,{flat:"",bordered:"",class:"q-mb-md text-white"},{default:t(()=>[l(ha,{modelValue:ee.value,"onUpdate:modelValue":e[1]||(e[1]=a=>ee.value=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t(()=>[l(O,{name:"mi-equipo",label:"Mi Equipo",icon:"group"}),l(O,{name:"calendario",label:"Calendario",icon:"calendar_month"}),l(O,{name:"mis-partidos",label:"Partidos de mi equipo",icon:"sports_tennis"}),l(O,{name:"estadisticas",label:"Estad\xEDsticas de grupos",icon:"emoji_events"}),l(O,{name:"cuadro",label:"Cuadro final",icon:"account_tree"})]),_:1},8,["modelValue"]),l(ga),l(ka,{modelValue:ee.value,"onUpdate:modelValue":e[4]||(e[4]=a=>ee.value=a),animated:"",class:"q-pa-none"},{default:t(()=>[l(H,{name:"mi-equipo",class:"q-pa-none"},{default:t(()=>[l(z,{flat:"",bordered:"",class:"q-mb-md text-white"},{default:t(()=>[l(h,null,{default:t(()=>[r("div",La,[e[13]||(e[13]=r("div",{class:"text-h6"},"Jugadores por Categor\xEDa",-1)),le.value?(s(),d(x,{key:0,flat:"",color:"primary",icon:"add",label:"Agregar Jugador",onClick:e[2]||(e[2]=a=>W.value=!0)})):g("",!0)])]),_:1}),ie.value?(s(),d(h,{key:0},{default:t(()=>[l(U,{color:"primary",size:"30px"})]),_:1})):(s(),d(h,{key:1},{default:t(()=>[(s(!0),u(q,null,w(Ge.value,a=>(s(),u("div",{key:a.name,class:"q-mb-md"},[r("div",Aa," Categor\xEDa "+i(a.name),1),l(L,{separator:""},{default:t(()=>[(s(!0),u(q,null,w(a.players,n=>(s(),d(B,{key:n.id,clickable:"",onClick:c=>sa(n.player_id)},{default:t(()=>[l(Q,{avatar:""},{default:t(()=>[n.photo_url?(s(),d(V,{key:0},{default:t(()=>[r("img",{src:n.photo_url},null,8,Na)]),_:2},1024)):(s(),d(V,{key:1,color:"primary","text-color":"white"},{default:t(()=>{var c;return[m(i(((c=n.player_name)==null?void 0:c.charAt(0))||"?"),1)]}),_:2},1024))]),_:2},1024),l(Q,null,{default:t(()=>[l($,null,{default:t(()=>[m(i(n.player_name||"Sin nombre"),1)]),_:2},1024),le.value?(s(),d($,{key:0,caption:""},{default:t(()=>[m(" Pago: "+i(Me(n.payment_status)),1)]),_:2},1024)):g("",!0)]),_:2},1024),l(Q,{side:""},{default:t(()=>[le.value?(s(),u("div",Fa,[l(qe,{color:n.payment_status==="paid"?"positive":"warning",label:n.payment_status==="paid"?"Pagado":"Pendiente"},null,8,["color","label"]),l(x,{flat:"",round:"",icon:"delete",color:"negative",onClick:ya(c=>la(n),["stop"]),disable:n.payment_status==="paid"},{default:t(()=>[n.payment_status==="paid"?(s(),d(ba,{key:0},{default:t(()=>[...e[14]||(e[14]=[m(" No se puede eliminar un jugador que ya pag\xF3 ",-1)])]),_:1})):g("",!0)]),_:2},1032,["onClick","disable"])])):g("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]))),128))]),_:1}))]),_:1}),l(z,{flat:"",bordered:"",class:"q-mb-md text-white"},{default:t(()=>[l(h,null,{default:t(()=>[r("div",Ra,[e[15]||(e[15]=r("div",{class:"text-h6"},"Estado de Pagos",-1)),l(x,{flat:"",color:"primary",icon:"refresh",label:"Actualizar",onClick:ye,loading:pe.value},null,8,["loading"])])]),_:1}),S.value?(s(),d(h,{key:0},{default:t(()=>[r("div",Ga,[l(z,{flat:"",bordered:"",class:"col bg-grey-9"},{default:t(()=>[l(h,null,{default:t(()=>[e[16]||(e[16]=r("div",{class:"text-caption"},"Total Jugadores",-1)),r("div",Oa,i(S.value.total_players),1)]),_:1})]),_:1}),l(z,{flat:"",bordered:"",class:"col bg-grey-9"},{default:t(()=>[l(h,null,{default:t(()=>[e[17]||(e[17]=r("div",{class:"text-caption"},"Pagados",-1)),r("div",Ha,i(S.value.paid_players),1)]),_:1})]),_:1}),l(z,{flat:"",bordered:"",class:"col bg-grey-9"},{default:t(()=>[l(h,null,{default:t(()=>[e[18]||(e[18]=r("div",{class:"text-caption"},"Pendientes",-1)),r("div",Ka,i(S.value.pending_players),1)]),_:1})]),_:1})]),S.value.pending_players>0?(s(),u("div",Xa,[e[19]||(e[19]=r("div",{class:"text-subtitle2 q-mb-md"},"Selecciona jugadores para pagar:",-1)),l(L,{separator:""},{default:t(()=>[(s(!0),u(q,null,w(S.value.players.filter(a=>a.payment_status!=="paid"),a=>(s(),d(B,{key:a.player_id,tag:"label"},{default:t(()=>[l(Q,{avatar:""},{default:t(()=>[l(xa,{modelValue:P.value,"onUpdate:modelValue":e[3]||(e[3]=n=>P.value=n),val:a.player_id,color:"primary"},null,8,["modelValue","val"])]),_:2},1024),l(Q,null,{default:t(()=>[l($,null,{default:t(()=>[m(i(a.player_name),1)]),_:2},1024),l($,{caption:""},{default:t(()=>[m("Categor\xEDa: "+i(a.category),1)]),_:2},1024)]),_:2},1024),l(Q,{side:""},{default:t(()=>[l(qe,{color:"warning",label:"Pendiente"})]),_:1})]),_:2},1024))),128))]),_:1}),r("div",Wa,[l(x,{color:"primary",icon:"payment",label:`Pagar ${P.value.length} jugador${P.value.length!==1?"es":""}`,onClick:na,disable:P.value.length===0,class:"full-width"},null,8,["label","disable"])])])):(s(),u("div",Ya,[l(T,{name:"check_circle",size:"48px"}),e[20]||(e[20]=r("div",{class:"text-subtitle1 q-mt-md"}," Todos los jugadores han pagado ",-1))]))]),_:1})):g("",!0)]),_:1})]),_:1}),l(H,{name:"calendario",class:"q-pa-none"},{default:t(()=>[ae.value?(s(),u("div",Za,[l(U,{color:"primary",size:"40px"}),e[21]||(e[21]=r("div",{class:"text-caption q-mt-md"},"Cargando calendario...",-1))])):Qe.value.length===0?(s(),u("div",et,[l(T,{name:"event_busy",size:"48px",class:"q-mb-md"}),e[22]||(e[22]=r("div",{class:"text-subtitle1"},"No hay partidos programados a\xFAn",-1))])):(s(),u("div",at,[(s(!0),u(q,null,w(Qe.value,a=>(s(),u("div",{key:a.name,class:"q-mb-lg"},[r("div",tt,i(a.name),1),l(L,{bordered:"",separator:""},{default:t(()=>[(s(!0),u(q,null,w(a.matches,n=>(s(),d(B,{key:n.id},{default:t(()=>[l(Q,null,{default:t(()=>[l($,{class:"text-weight-medium"},{default:t(()=>[m(i(n.team1_name)+" vs "+i(n.team2_name)+" ("+i((n.category||"").toUpperCase())+") ",1)]),_:2},1024),r("div",lt,[n.club_name?(s(),d(f,{key:0,size:"sm",color:"secondary","text-color":"white",icon:"location_on"},{default:t(()=>[m(i(n.club_name),1)]),_:2},1024)):g("",!0),n.court_name?(s(),d(f,{key:1,size:"sm",color:"secondary","text-color":"white",icon:"sports_tennis"},{default:t(()=>[m(i(n.court_name),1)]),_:2},1024)):g("",!0),n.match_date&&n.match_time?(s(),d(f,{key:2,size:"sm",color:"primary","text-color":"black",icon:"event"},{default:t(()=>[m(i(fe(n.match_date))+" "+i(ve(n.match_time)),1)]),_:2},1024)):(s(),d(f,{key:3,size:"sm",color:"grey","text-color":"white",icon:"event"},{default:t(()=>[...e[23]||(e[23]=[m("Sin programar",-1)])]),_:1})),n.winner_team_id?(s(),d(f,{key:4,size:"sm",color:"positive","text-color":"white"},{default:t(()=>[...e[24]||(e[24]=[m("Finalizado",-1)])]),_:1})):(s(),d(f,{key:5,size:"sm",color:"warning","text-color":"white"},{default:t(()=>[...e[25]||(e[25]=[m("Pendiente",-1)])]),_:1}))])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]))),128))]))]),_:1}),l(H,{name:"mis-partidos",class:"q-pa-none"},{default:t(()=>[ae.value?(s(),u("div",ot,[l(U,{color:"primary",size:"40px"})])):Ee.value.length===0?(s(),u("div",st,[l(T,{name:"sports_tennis",size:"48px",class:"q-mb-md"}),e[26]||(e[26]=r("div",{class:"text-subtitle1"},"No hay partidos de tu equipo a\xFAn",-1))])):(s(),u("div",rt,[l(L,{bordered:"",separator:""},{default:t(()=>[(s(!0),u(q,null,w(Ee.value,a=>(s(),d(B,{key:a.id},{default:t(()=>[l(Q,null,{default:t(()=>[l($,{class:"text-weight-medium"},{default:t(()=>[m(i(a.team1_name)+" vs "+i(a.team2_name)+" ("+i((a.category||"").toUpperCase())+") ",1)]),_:2},1024),r("div",nt,[a.club_name?(s(),d(f,{key:0,size:"sm",color:"secondary","text-color":"white",icon:"location_on"},{default:t(()=>[m(i(a.club_name),1)]),_:2},1024)):g("",!0),a.match_date&&a.match_time?(s(),d(f,{key:1,size:"sm",color:"primary","text-color":"black",icon:"event"},{default:t(()=>[m(i(fe(a.match_date))+" "+i(ve(a.match_time)),1)]),_:2},1024)):g("",!0),a.winner_team_id===j(_)?(s(),d(f,{key:2,size:"sm",color:"positive","text-color":"white",icon:"emoji_events"},{default:t(()=>[...e[27]||(e[27]=[m(" Ganado ",-1)])]),_:1})):a.winner_team_id?(s(),d(f,{key:3,size:"sm",color:"negative","text-color":"white",icon:"close"},{default:t(()=>[...e[28]||(e[28]=[m(" Perdido ",-1)])]),_:1})):(s(),d(f,{key:4,size:"sm",color:"warning","text-color":"white"},{default:t(()=>[...e[29]||(e[29]=[m("Pendiente",-1)])]),_:1})),Ve(a)?(s(),d(f,{key:5,size:"sm",color:"grey-8","text-color":"white",icon:"sports_score",dense:""},{default:t(()=>[m(i(Ve(a)),1)]),_:2},1024)):g("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]))]),_:1}),l(H,{name:"estadisticas",class:"q-pa-none"},{default:t(()=>[_e.value?(s(),u("div",it,[l(U,{color:"primary",size:"40px"})])):Object.keys(te.value).length===0?(s(),u("div",dt,[l(T,{name:"leaderboard",size:"48px",class:"q-mb-md"}),e[30]||(e[30]=r("div",{class:"text-subtitle1"},"No hay estad\xEDsticas de grupos a\xFAn",-1))])):(s(),u("div",ut,[(s(!0),u(q,null,w(te.value,(a,n)=>(s(),u("div",{key:n,class:"q-mb-lg"},[r("div",ct,"Grupo "+i(n),1),l(qa,{flat:"",bordered:"",dense:"",class:"standings-table"},{default:t(()=>[e[32]||(e[32]=r("thead",null,[r("tr",null,[r("th",{class:"text-left"},"Pos"),r("th",{class:"text-left"},"Equipo"),r("th",{class:"text-center"},"PJ"),r("th",{class:"text-center"},"PG"),r("th",{class:"text-center"},"PP"),r("th",{class:"text-center"},"Pts a favor"),r("th",{class:"text-center"},"Pts en contra"),r("th",{class:"text-center"},"Dif pts")])],-1)),r("tbody",null,[(s(!0),u(q,null,w(a,(c,E)=>{var b,R,G,Se,je,De;return s(),u("tr",{key:c.team_id,class:Je({"bg-primary":c.team_id===j(_),"text-black":c.team_id===j(_)})},[r("td",null,i(E+1),1),r("td",null,[m(i(c.team_name)+" ",1),c.team_id===j(_)?(s(),d(qe,{key:0,color:"white","text-color":"primary",class:"q-ml-sm"},{default:t(()=>[...e[31]||(e[31]=[m("Mi equipo",-1)])]),_:1})):g("",!0)]),r("td",mt,i((b=c.matches_played)!=null?b:0),1),r("td",pt,i((R=c.matches_won)!=null?R:0),1),r("td",_t,i((G=c.matches_lost)!=null?G:0),1),r("td",gt,i((Se=c.points_scored)!=null?Se:0),1),r("td",ft,i((je=c.points_received)!=null?je:0),1),r("td",vt,[r("strong",null,i((De=c.points_difference)!=null?De:0),1)])],2)}),128))])]),_:2},1024)]))),128))]))]),_:1}),l(H,{name:"cuadro",class:"q-pa-none"},{default:t(()=>[ge.value?(s(),u("div",yt,[l(U,{color:"primary",size:"40px"})])):F.value.length===0?(s(),u("div",xt,[l(T,{name:"account_tree",size:"48px",class:"q-mb-md"}),e[33]||(e[33]=r("div",{class:"text-subtitle1"},"El cuadro de eliminaci\xF3n no est\xE1 disponible a\xFAn",-1))])):(s(),u("div",ht,[e[36]||(e[36]=r("div",{class:"text-h6 q-mb-md"},"Cuadro de eliminaci\xF3n directa",-1)),l(L,{bordered:"",separator:""},{default:t(()=>[(s(!0),u(q,null,w(F.value,a=>(s(),d(B,{key:a.id},{default:t(()=>[l(Q,null,{default:t(()=>[l($,{class:"text-weight-medium"},{default:t(()=>[m(i(a.team1_name||"TBD")+" vs "+i(a.team2_name||"TBD"),1)]),_:2},1024),r("div",bt,[a.match_date&&a.match_time?(s(),d(f,{key:0,size:"sm",color:"primary","text-color":"black",icon:"event"},{default:t(()=>[m(i(fe(a.match_date))+" "+i(ve(a.match_time)),1)]),_:2},1024)):g("",!0),a.winner_team_id?(s(),d(f,{key:1,size:"sm",color:"positive","text-color":"white"},{default:t(()=>[...e[34]||(e[34]=[m("Finalizado",-1)])]),_:1})):(s(),d(f,{key:2,size:"sm",color:"warning","text-color":"white"},{default:t(()=>[...e[35]||(e[35]=[m("Pendiente",-1)])]),_:1}))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(he,{modelValue:X.value,"onUpdate:modelValue":e[6]||(e[6]=a=>X.value=a)},{default:t(()=>[l(z,{class:"bg-dark text-white edit-team-dialog"},{default:t(()=>[l(h,null,{default:t(()=>[...e[37]||(e[37]=[r("div",{class:"text-h6"},"Editar Equipo",-1)])]),_:1}),l(h,null,{default:t(()=>[l(be,{modelValue:M.value.name,"onUpdate:modelValue":e[5]||(e[5]=a=>M.value.name=a),label:"Nombre del Equipo",outlined:"",dense:"",dark:"",class:"q-mb-md"},null,8,["modelValue"]),r("div",kt,[e[39]||(e[39]=r("div",{class:"text-subtitle2 q-mb-sm"},"Logo del Equipo",-1)),r("div",qt,[r("div",{class:"logo-preview",onClick:Xe},[M.value.logo_url?(s(),d(V,{key:0,size:"100px"},{default:t(()=>[r("img",{src:M.value.logo_url,alt:"Logo del equipo"},null,8,wt)]),_:1})):(s(),d(V,{key:1,size:"100px",color:"grey-7","text-color":"white"},{default:t(()=>[l(T,{name:"image",size:"50px"})]),_:1})),r("div",Ct,[l(T,{name:"camera_alt",size:"30px"}),e[38]||(e[38]=r("div",{class:"text-caption"},"Cambiar logo",-1))])]),r("input",{type:"file",ref_key:"logoInput",ref:Pe,class:"hidden",accept:"image/*",onChange:We},null,544)])])]),_:1}),l(xe,{align:"right"},{default:t(()=>[ke(l(x,{flat:"",label:"Cancelar",color:"grey"},null,512),[[we]]),l(x,{flat:"",label:"Guardar",color:"primary",onClick:Ye,loading:de.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(he,{modelValue:W.value,"onUpdate:modelValue":e[10]||(e[10]=a=>W.value=a)},{default:t(()=>[l(z,{class:"bg-dark text-white add-player-dialog"},{default:t(()=>[l(h,null,{default:t(()=>[...e[40]||(e[40]=[r("div",{class:"text-h6"},"Agregar Jugador al Equipo",-1)])]),_:1}),l(h,null,{default:t(()=>[l(wa,{modelValue:y.value.category,"onUpdate:modelValue":e[7]||(e[7]=a=>y.value.category=a),options:Re.value,label:"Categor\xEDa",outlined:"",dense:"",dark:"",class:"q-mb-md"},null,8,["modelValue","options"]),l(be,{modelValue:I.value,"onUpdate:modelValue":[e[8]||(e[8]=a=>I.value=a),Ze],label:"Buscar Jugador",outlined:"",dense:"",dark:"",class:"q-mb-md",debounce:"300"},{append:t(()=>[l(T,{name:"search"})]),_:1},8,["modelValue"]),D.value.length>0?(s(),d(L,{key:0,bordered:"",separator:"",class:"q-mb-md"},{default:t(()=>[(s(!0),u(q,null,w(D.value,a=>(s(),d(B,{key:a.id,clickable:"",onClick:n=>ea(a),class:Je({"bg-primary":y.value.player_id===a.id})},{default:t(()=>[l(Q,null,{default:t(()=>[l($,null,{default:t(()=>[m(i(a.full_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})):g("",!0),y.value.player_id?(s(),u("div",Pt,[e[41]||(e[41]=r("div",{class:"text-caption"},"Jugador seleccionado:",-1)),l(f,{color:"primary","text-color":"white",removable:"",onRemove:e[9]||(e[9]=a=>y.value.player_id=null)},{default:t(()=>[m(i(aa(y.value.player_id)),1)]),_:1})])):g("",!0)]),_:1}),l(xe,{align:"right"},{default:t(()=>[ke(l(x,{flat:"",label:"Cancelar",color:"grey"},null,512),[[we]]),l(x,{flat:"",label:"Agregar",color:"primary",onClick:ta,loading:ue.value,disable:!y.value.player_id||!y.value.category},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(he,{modelValue:Y.value,"onUpdate:modelValue":e[12]||(e[12]=a=>Y.value=a),maximized:""},{default:t(()=>[l(Le,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:t(()=>[l(Ue,{elevated:"",class:"text-white"},{default:t(()=>[r("div",Qt,[e[42]||(e[42]=r("div",{class:"greeting"},[r("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),r("span",{class:"text-h6"},"Chat del Equipo")],-1)),r("div",Et,[ke(l(x,{flat:"",round:"",icon:"close"},null,512),[[we]])])])]),_:1}),l(Ae,null,{default:t(()=>[l(Be,{class:"q-pa-md"},{default:t(()=>[r("div",{style:{height:"calc(100vh - 180px)","overflow-y":"auto"},ref_key:"chatContainer",ref:Z},[(s(!0),u(q,null,w(me.value,a=>(s(),d(Ca,{key:a.id,name:a.sender_name,text:[a.message],stamp:ra(a.timestamp),sent:a.sender_id===j(K).userId,"bg-color":a.sender_id===j(K).userId?"primary":"secondary","text-color":a.sender_id===j(K).userId?"black":"white"},{avatar:t(()=>[a.sender_photo?(s(),d(V,{key:0},{default:t(()=>[r("img",{src:a.sender_photo},null,8,zt)]),_:2},1024)):(s(),d(V,{key:1,color:"primary","text-color":"white"},{default:t(()=>{var n;return[m(i(((n=a.sender_name)==null?void 0:n.charAt(0))||"?"),1)]}),_:2},1024))]),_:2},1032,["name","text","stamp","sent","bg-color","text-color"]))),128)),me.value.length===0?(s(),u("div",Vt," No hay mensajes todav\xEDa ")):g("",!0)],512)]),_:1})]),_:1}),l(Qa,{elevated:"",class:"bg-black"},{default:t(()=>[l(Pa,null,{default:t(()=>[l(be,{modelValue:A.value,"onUpdate:modelValue":e[11]||(e[11]=a=>A.value=a),outlined:"",dense:"",dark:"","bg-color":"grey-9",placeholder:"Escribe un mensaje...",class:"col",onKeyup:fa($e,["enter"])},null,8,["modelValue"]),l(x,{flat:"",round:"",color:"primary",icon:"send",onClick:$e,loading:ce.value,class:"q-ml-sm"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(s(),u("div",Tt,[...e[43]||(e[43]=[r("div",{class:"text-h6"},"Equipo no encontrado",-1)])]))]),_:1})]),_:1}),l(za)]),_:1}))}};var _l=$a($t,[["__scopeId","data-v-bd947984"]]);export{_l as default};
