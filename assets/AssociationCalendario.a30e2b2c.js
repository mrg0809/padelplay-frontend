import{Q as q}from"./QHeader.289f0645.js";import{x as I,r as T,f,h as V,a6 as g,o as c,z as x,A as n,d as o,B as i,a7 as k,a8 as w,Q as L,a as _,t as u,ab as C,aa as Y,e as P,ac as A,a9 as M}from"./index.687b44e8.js";import{Q as E}from"./QDate.5dbcd23f.js";import{Q as F,a as Q}from"./QItem.eb9291fb.js";import{Q as B}from"./QItemLabel.bbebea39.js";import{Q as z}from"./QList.1288e946.js";import{Q as H}from"./QPage.fcc9aae1.js";import{Q as R,a as U}from"./QLayout.30990248.js";import{u as W}from"./use-quasar.ba375293.js";import{A as j,a as X}from"./AssociationTopMenu.c2c9d0dc.js";import{N as G}from"./NotificationBell.9fdba392.js";import{B as J}from"./BannerPromoScrolling.1700e538.js";import{b as K}from"./association.b92d73c6.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-render-cache.3aae9b27.js";import"./format.de7e9769.js";import"./QTabs.979bee57.js";import"./rtl.276c3f1b.js";import"./QFooter.b7b22f15.js";import"./QBtnDropdown.17175f2e.js";import"./QBtnGroup.6b9d07ee.js";import"./QMenu.df8dfc7c.js";import"./position-engine.46674690.js";import"./selection.0f785986.js";import"./haptics.57409bd0.js";import"./QBadge.0c3a126f.js";import"./api.1c42dce4.js";const Z={name:"AssociationCalendario",components:{AssociationNavigationMenu:j,AssociationTopMenu:X,NotificationBell:G,BannerPromoScrolling:J},setup(){W();const v=I(),s=T(!0),d=T([]),e=T(null),S=()=>v.push("/dashboard/association"),y=a=>{v.push(`/association/torneos/${a}`)},h=f(()=>{const a=new Set;return d.value.forEach(t=>{if(t.start_date){const l=t.start_date.replace(/-/g,"/");a.add(l)}}),Array.from(a)}),m=f(()=>{const a={};return d.value.forEach(t=>{if(!t.start_date)return;const l=t.start_date.replace(/-/g,"/");a[l]||(a[l]=[]),a[l].push(t)}),a}),D=f(()=>{if(!e.value)return[];const a=typeof e.value=="string"?e.value:null;return a?m.value[a]||[]:[]}),b=f(()=>{if(!e.value)return"";const a=e.value;if(typeof a!="string")return"";const[t,l,p]=a.split("/");return new Date(parseInt(t,10),parseInt(l,10)-1,parseInt(p,10)).toLocaleDateString("es-MX",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),r=a=>{var p;if(!a)return;const t=typeof a=="string"?a:null;if(!t||!((p=m.value[t])!=null&&p.length))return;const l=m.value[t];l.length===1&&y(l[0].id)};return V(async()=>{s.value=!0;try{const a=await K();if(d.value=a.data||[],!e.value&&d.value.length){const t=d.value[0];t!=null&&t.start_date&&(e.value=t.start_date.replace(/-/g,"/"))}if(!e.value){const t=new Date;e.value=`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`}}catch(a){console.error("Error loading tournaments:",a),d.value=[];const t=new Date;e.value=`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`}finally{s.value=!1}}),{goToDashboard:S,loading:s,tournaments:d,selectedDate:e,datesWithTournaments:h,dateToTournamentsMap:m,selectedDayTournaments:D,formattedSelectedDate:b,onDateSelected:r,goToTournament:y}}},$={class:"header-content"},ee={class:"greeting"},te={class:"header-icons"},ae={class:"calendar-wrapper"},oe={key:0,class:"q-mt-md"},ne={class:"text-subtitle1 q-mb-sm"},se={key:1,class:"text-grey text-center q-mt-md"};function re(v,s,d,e,S,y){const h=g("NotificationBell"),m=g("AssociationTopMenu"),D=g("BannerPromoScrolling"),b=g("AssociationNavigationMenu");return c(),x(R,{view:"hHh lpR fFf",class:"text-white"},{default:n(()=>[o(q,{elevated:"",class:"text-white"},{default:n(()=>[i("div",$,[i("div",ee,[i("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:s[0]||(s[0]=(...r)=>e.goToDashboard&&e.goToDashboard(...r))}),s[2]||(s[2]=i("span",{class:"text-subtitle1"},"Calendario",-1))]),i("div",te,[o(h),o(m)])]),o(D)]),_:1}),o(U,null,{default:n(()=>[o(H,{class:"q-pa-md"},{default:n(()=>[s[3]||(s[3]=i("div",{class:"text-h5 q-mb-md"},"Calendario de torneos",-1)),s[4]||(s[4]=i("p",{class:"text-caption text-grey q-mb-md"},"Las fechas con torneos aparecen marcadas. Toca una fecha para ver los torneos del d\xEDa.",-1)),e.loading?(c(),x(k,{key:0,flat:"",bordered:"",class:"bg-grey-9 text-white"},{default:n(()=>[o(w,{class:"text-center"},{default:n(()=>[o(L,{color:"primary",size:"40px"})]),_:1})]),_:1})):(c(),_(C,{key:1},[i("div",ae,[o(k,{flat:"",bordered:"",class:"bg-grey-9 text-white calendar-card"},{default:n(()=>[o(w,{class:"q-pa-sm calendar-section"},{default:n(()=>[o(E,{modelValue:e.selectedDate,"onUpdate:modelValue":[s[1]||(s[1]=r=>e.selectedDate=r),e.onDateSelected],minimal:"",mask:"YYYY/MM/DD",events:e.datesWithTournaments,"event-color":"primary",class:"calendar-date bg-transparent text-white"},null,8,["modelValue","events","onUpdate:modelValue"])]),_:1})]),_:1})]),e.selectedDayTournaments.length?(c(),_("div",oe,[i("div",ne,"Torneos el "+u(e.formattedSelectedDate),1),o(z,{bordered:"",class:"rounded-borders bg-transparent"},{default:n(()=>[(c(!0),_(C,null,Y(e.selectedDayTournaments,r=>(c(),x(F,{key:r.id,class:"q-mb-sm bg-grey-9",clickable:"",onClick:N=>e.goToTournament(r.id)},{default:n(()=>[o(Q,{avatar:""},{default:n(()=>[o(A,{name:"o_emoji_events",color:"primary",size:"sm"})]),_:1}),o(Q,null,{default:n(()=>[o(B,{class:"text-weight-medium"},{default:n(()=>[M(u(r.name),1)]),_:2},1024),o(B,{caption:""},{default:n(()=>[M(u(r.start_date)+" \xB7 "+u(r.system),1)]),_:2},1024)]),_:2},1024),o(Q,{side:""},{default:n(()=>[o(A,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):e.selectedDate&&!e.loading?(c(),_("p",se," No hay torneos el "+u(e.formattedSelectedDate)+". ",1)):P("",!0)],64))]),_:1})]),_:1}),o(b)]),_:1})}var Ve=O(Z,[["render",re],["__scopeId","data-v-00a60601"]]);export{Ve as default};
