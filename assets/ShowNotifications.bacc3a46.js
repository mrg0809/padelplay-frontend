import{k as U,as as z,au as F,r as j,j as I,b2 as X,X as V,p as C,C as H,ag as G,E as O,q as _,G as Q,H as r,v as s,I as v,J as M,a9 as J,aa as Y,s as N,ae as $,bP as K,ac as W,ad as Z,ab as R,x as q,aU as tt,y as et}from"./index.584acf07.js";import{Q as it}from"./QHeader.8e557618.js";import{Q as ot,a as B}from"./QItem.b12511a1.js";import{Q as D}from"./QItemLabel.6f29d409.js";import{T as at}from"./TouchPan.c6a0f6d9.js";import{u as rt}from"./use-render-cache.770e5fe8.js";import{Q as st}from"./QList.c5a8907d.js";import{Q as nt}from"./QPage.764a7077.js";import{Q as lt,a as ct}from"./QLayout.b710bb90.js";import{a as w}from"./api.2af71db3.js";import{_ as dt}from"./plugin-vue_export-helper.21dcd24c.js";import"./selection.216c03ca.js";const P=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];var ft=U({name:"QSlideItem",props:{...z,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(o,{slots:t,emit:h}){const{proxy:S}=O(),{$q:k}=S,u=F(o,k),{getCache:n}=rt(),m=j(null);let g=null,i={},b={},x={};const p=I(()=>k.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),A=I(()=>"q-slide-item q-item-type overflow-hidden"+(u.value===!0?" q-slide-item--dark q-dark":""));function L(){m.value.style.transform="translate(0,0)"}function E(e,f,l){o.onSlide!==void 0&&h("slide",{side:e,ratio:f,isReset:l})}function T(e){const f=m.value;if(e.isFirst)i={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},f.classList.add("no-transition"),P.forEach(a=>{if(t[a[0]]!==void 0){const y=x[a[0]];y.style.transform="scale(1)",i.size[a[0]]=y.getBoundingClientRect()[a[3]]}}),i.axis=e.direction==="up"||e.direction==="down"?"Y":"X";else if(e.isFinal){f.classList.remove("no-transition"),i.scale===1?(f.style.transform=`translate${i.axis}(${i.dir*100}%)`,g!==null&&clearTimeout(g),g=setTimeout(()=>{g=null,h(i.showing,{reset:L}),h("action",{side:i.showing,reset:L})},230)):(f.style.transform="translate(0,0)",E(i.showing,0,!0));return}else e.direction=i.axis==="X"?e.offset.x<0?"left":"right":e.offset.y<0?"up":"down";if(t.left===void 0&&e.direction===p.value.right||t.right===void 0&&e.direction===p.value.left||t.top===void 0&&e.direction==="down"||t.bottom===void 0&&e.direction==="up"){f.style.transform="translate(0,0)";return}let l,d,c;i.axis==="X"?(d=e.direction==="left"?-1:1,l=d===1?p.value.left:p.value.right,c=e.distance.x):(d=e.direction==="up"?-2:2,l=d===2?"top":"bottom",c=e.distance.y),!(i.dir!==null&&Math.abs(d)!==Math.abs(i.dir))&&(i.dir!==d&&(["left","right","top","bottom"].forEach(a=>{b[a]&&(b[a].style.visibility=l===a?"visible":"hidden")}),i.showing=l,i.dir=d),i.scale=Math.max(0,Math.min(1,(c-40)/i.size[l])),f.style.transform=`translate${i.axis}(${c*d/Math.abs(d)}px)`,x[l].style.transform=`scale(${i.scale})`,E(l,i.scale,!1))}return X(()=>{b={},x={}}),V(()=>{g!==null&&clearTimeout(g)}),Object.assign(S,{reset:L}),()=>{const e=[],f={left:t[p.value.right]!==void 0,right:t[p.value.left]!==void 0,up:t.bottom!==void 0,down:t.top!==void 0},l=Object.keys(f).filter(c=>f[c]===!0);P.forEach(c=>{const a=c[0];t[a]!==void 0&&e.push(C("div",{key:a,ref:y=>{b[a]=y},class:`q-slide-item__${a} absolute-full row no-wrap items-${c[1]} justify-${c[2]}`+(o[a+"Color"]!==void 0?` bg-${o[a+"Color"]}`:"")},[C("div",{ref:y=>{x[a]=y}},t[a]())]))});const d=C("div",{key:`${l.length===0?"only-":""} content`,ref:m,class:"q-slide-item__content"},H(t.default));return l.length===0?e.push(d):e.push(G(d,n("dir#"+l.join(""),()=>{const c={prevent:!0,stop:!0,mouse:!0};return l.forEach(a=>{c[a]=!0}),[[at,T,void 0,c]]}))),C("div",{class:A.value},e)}}});const ut={data(){return{notifications:[]}},async mounted(){await this.fetchNotifications()},methods:{async fetchNotifications(){try{const t=(await w.get("/notifications/")).data;t&&Array.isArray(t.data)&&t.data.length>0?this.notifications=t.data:this.notifications=[]}catch(o){console.error("Error fetching notifications:",o),o.message&&o.message.includes("Mixed Content")&&console.error("Mixed Content Error detected in notifications. API Base URL:",w.defaults.baseURL),console.log("Current API configuration:",{baseURL:w.defaults.baseURL,hostname:window.location.hostname,protocol:window.location.protocol}),this.notifications=[],this.$q.notify({type:"negative",message:"Error al cargar las notificaciones. Por favor intenta m\xE1s tarde.",timeout:3e3})}},async markAsRead(o,t){try{await w.put(`/notifications/${o}/read`),t?this.$router.push(t):this.fetchNotifications()}catch(h){console.error("Error marking notification as read:",h)}},async deleteNotification(o){try{await w.delete(`/notifications/${o}`),this.fetchNotifications()}catch(t){console.error("Error deleting notification:",t)}},onSlideLeft(o){this.deleteNotification(o)},formatDate(o){if(!o)return"Fecha desconocida";const t={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(o).toLocaleDateString("es-MX",t)},goBack(){this.$router.back()}}},mt={class:"header-content"},ht={class:"header-icons"},gt={key:0,class:"text-center q-my-md"};function pt(o,t,h,S,k,u){return _(),Q(lt,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:r(()=>[s(it,{elevated:"",class:"bg-primary text-white"},{default:r(()=>[v("div",mt,[t[0]||(t[0]=v("div",{class:"greeting"},[v("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),v("div",ht,[s(M,{flat:"",round:"",icon:"close",onClick:u.goBack},null,8,["onClick"])])])]),_:1}),s(ct,null,{default:r(()=>[s(nt,{class:"q-pa-md"},{default:r(()=>[s(J,{flat:"",bordered:"",class:"text-black"},{default:r(()=>[s(Y,null,{default:r(()=>t[1]||(t[1]=[v("div",{class:"text-h6 text-center"},"Notificaciones",-1)])),_:1}),k.notifications.length===0?(_(),N("div",gt,[s($,{name:"o_notifications_off",size:"64px",color:"black"}),t[2]||(t[2]=v("p",null,"No tienes notificaciones pendientes.",-1))])):(_(),Q(st,{key:1},{default:r(()=>[s(K,{name:"notification-list",tag:"div",appear:""},{default:r(()=>[(_(!0),N(Z,null,W(k.notifications,n=>(_(),Q(ft,{key:n.id,onLeft:m=>u.onSlideLeft(n.id),"left-color":"grey-8",class:"notification-wrapper"},{left:r(()=>[s($,{name:"delete"})]),default:r(()=>[s(ot,{clickable:"",class:"notification-item"},{default:r(()=>[s(B,{avatar:"",onClick:m=>u.markAsRead(n.id,n.route)},{default:r(()=>[s($,{name:"o_notifications",size:"36px",color:"white"})]),_:2},1032,["onClick"]),s(B,{onClick:m=>u.markAsRead(n.id,n.route)},{default:r(()=>[s(D,{class:"text-bold"},{default:r(()=>[R(q(n.title),1)]),_:2},1024),s(D,{caption:""},{default:r(()=>[R(q(n.message),1)]),_:2},1024),s(D,{caption:"",class:"text-grey text-sm"},{default:r(()=>[R(q(u.formatDate(n.created_at)),1)]),_:2},1024)]),_:2},1032,["onClick"]),s(B,{side:""},{default:r(()=>[n.is_read?et("",!0):(_(),Q(M,{key:0,flat:"",round:"",icon:"done",color:"white",size:"sm",class:"q-mr-sm",onClick:tt(m=>u.markAsRead(n.id,n.route),["stop"])},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onLeft"]))),128))]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}var Rt=dt(ut,[["render",pt],["__scopeId","data-v-098f1702"]]);export{Rt as default};
