import{Q as q}from"./QHeader.dfbc1a35.js";import{Q as j}from"./QInnerLoading.1fd70dca.js";import{F as z,r as m,w as H,B as R,aa as N,q as s,G as d,H as a,v as e,I as u,s as f,K as G,ag as J,aO as K,af as I,ae as S,bE as C,ad as y,x as v,J as F,aW as L}from"./index.176a017b.js";import{Q as O,a as B}from"./QTabs.82771dda.js";import{Q as x,a as g}from"./QItem.e6dc7461.js";import{Q as h}from"./QItemLabel.8882621d.js";import{Q as T}from"./QList.e1aa2b6b.js";import{a as W,Q as V}from"./QTabPanel.80a3606a.js";import{Q as X}from"./QPage.68138b8a.js";import{Q as Y,a as Z}from"./QLayout.312f4ce9.js";import{u as $}from"./userStore.4625cf0e.js";import{n as ee}from"./navigationUtils.2c4b9dee.js";import{P as oe}from"./PlayerNavigationMenu.e7b219c1.js";import{N as ae}from"./NotificationBell.3c7c2bec.js";import{B as re}from"./BannerPromoScrolling.d3fa8506.js";import{f as le,a as se,b as te,i as ne,c as ie,u as ce}from"./community.928dd78a.js";import{s as de}from"./commun.9f15c7ee.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./use-panel.613a44e1.js";import"./use-render-cache.770e5fe8.js";import"./selection.540057b6.js";import"./pinia.3d08ea43.js";import"./QFooter.804a099a.js";import"./QBadge.874fcfaa.js";import"./api.2af71db3.js";import"./admin.c99b9bfe.js";import"./supabase.05dee304.js";const fe=t=>t?`${t.first_name||""} ${t.last_name||""}`.trim()||"Usuario":"",me=t=>t||"https://cdn.quasar.dev/img/avatar.png";const ge={components:{PlayerNavigationMenu:oe,BannerPromoScrolling:re,NotificationBell:ae},setup(){const t=z(),n=m(""),_=m(!1),r=m("following"),i=$(),w=m([]),k=m([]),P=m([]),p=m(!0),o=async()=>{try{console.log("Loading following for user:",i.userId),w.value=await le(i.userId)}catch(l){console.error("Error loading following:",l)}},c=async()=>{try{k.value=await se(i.userId)}catch(l){console.error("Error loading followers:",l)}},Q=async()=>{_.value=!0;try{P.value=await te(i.userId)}catch(l){console.error("Error loading suggested players:",l)}finally{_.value=!1}},E=async()=>{_.value=!0;try{const l=await de(n.value.trim());r.value==="suggestions"&&(P.value=l)}catch(l){console.error("Error searching players:",l)}finally{_.value=!1}},D=l=>w.value&&ne(w.value,l);H(r,l=>{l==="following"?o():l==="followers"?c():l==="suggestions"&&Q()}),R(()=>{i.userId?(p.value=!1,o(),c(),Q()):(console.error("No user ID found in userStore"),p.value=!1)});const A=async l=>{try{await ie(i.userId,l),o(),c(),Q()}catch(b){console.error("Error following player:",b)}},M=async l=>{try{await ce(i.userId,l),o(),c(),Q()}catch(b){console.error("Error unfollowing player:",b)}},U=()=>{ee(t,i)};return{searchQuery:n,searching:_,selectedTab:r,following:w,followers:k,isLoading:p,suggestedPlayers:P,searchPlayers:E,isFollowing:D,viewPlayerProfile:l=>{t.push(`/player/${U}`)},followPlayer:A,unfollowPlayer:M,getPlayerAvatar:me,formatPlayerName:fe}}},_e={class:"header-content"},ye={class:"greeting"},ve={class:"header-icons"},he={key:0},we={key:1},Pe={class:"search-bar"},pe=["src"],ke={key:1,class:"text-center"},Qe=["src"],be={key:1,class:"text-center"},Ne=["src"],Ie={key:1,class:"text-center"};function Se(t,n,_,r,i,w){const k=N("NotificationBell"),P=N("BannerPromoScrolling"),p=N("PlayerNavigationMenu");return s(),d(Y,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:a(()=>[e(q,{elevated:"",class:"text-white"},{default:a(()=>[u("div",_e,[u("div",ye,[u("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:n[0]||(n[0]=(...o)=>t.goToDashboard&&t.goToDashboard(...o))})]),u("div",ve,[e(k)])]),e(P)]),_:1}),e(Z,{class:"home"},{default:a(()=>[e(X,{class:"q-pa-md"},{default:a(()=>[r.isLoading?(s(),f("div",he,[e(j,{showing:!0,size:"xl",color:"primary"})])):(s(),f("div",we,[u("div",Pe,[e(G,{modelValue:r.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=o=>r.searchQuery=o),filled:"",dense:"",placeholder:"Buscar jugador por nombre",onInput:r.searchPlayers,class:"text-dark"},{prepend:a(()=>[e(J,{name:"search",class:"text-primary"})]),_:1},8,["modelValue","onInput"])]),e(O,{modelValue:r.selectedTab,"onUpdate:modelValue":n[2]||(n[2]=o=>r.selectedTab=o),align:"justify",class:"text-white"},{default:a(()=>[e(B,{name:"following",label:"Siguiendo"}),e(B,{name:"followers",label:"Seguidores"}),e(B,{name:"suggestions",label:"Sugerencias"})]),_:1},8,["modelValue"]),e(K,{class:"q-my-md",color:"white"}),e(W,{modelValue:r.selectedTab,"onUpdate:modelValue":n[3]||(n[3]=o=>r.selectedTab=o),animated:""},{default:a(()=>[e(V,{name:"following"},{default:a(()=>[r.following.length>0?(s(),d(T,{key:0},{default:a(()=>[(s(!0),f(I,null,S(r.following,o=>(s(),d(x,{key:o.user_id,clickable:"",onClick:c=>r.viewPlayerProfile(o.user_id)},{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(C,null,{default:a(()=>[u("img",{src:r.getPlayerAvatar(o.photo_url)},null,8,pe)]),_:2},1024)]),_:2},1024),e(g,null,{default:a(()=>[e(h,null,{default:a(()=>[y(v(r.formatPlayerName(o)),1)]),_:2},1024),e(h,{caption:""},{default:a(()=>[y(v(o.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),f("div",ke,"No est\xE1s siguiendo a nadie."))]),_:1}),e(V,{name:"followers"},{default:a(()=>[r.followers.length>0?(s(),d(T,{key:0},{default:a(()=>[(s(!0),f(I,null,S(r.followers,o=>(s(),d(x,{key:o.user_id,clickable:"",onClick:c=>r.viewPlayerProfile(o.user_id)},{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(C,null,{default:a(()=>[u("img",{src:r.getPlayerAvatar(o.photo_url)},null,8,Qe)]),_:2},1024)]),_:2},1024),e(g,null,{default:a(()=>[e(h,null,{default:a(()=>[y(v(r.formatPlayerName(o)),1)]),_:2},1024),e(h,{caption:""},{default:a(()=>[y(v(o.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),f("div",be,"No tienes seguidores."))]),_:1}),e(V,{name:"suggestions"},{default:a(()=>[r.suggestedPlayers.length>0?(s(),d(T,{key:0},{default:a(()=>[(s(!0),f(I,null,S(r.suggestedPlayers,o=>(s(),d(x,{key:o.user_id,clickable:"",onClick:c=>r.viewPlayerProfile(o.user_id)},{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(C,null,{default:a(()=>[u("img",{src:r.getPlayerAvatar(o.photo_url)},null,8,Ne)]),_:2},1024)]),_:2},1024),e(g,null,{default:a(()=>[e(h,null,{default:a(()=>[y(v(r.formatPlayerName(o)),1)]),_:2},1024),e(h,{caption:""},{default:a(()=>[y(v(o.category),1)]),_:2},1024)]),_:2},1024),e(g,{side:""},{default:a(()=>[r.isFollowing(o.user_id)?(s(),d(F,{key:1,color:"red",label:"Dejar de seguir",size:"sm",onClick:L(c=>r.unfollowPlayer(o.user_id),["stop"])},null,8,["onClick"])):(s(),d(F,{key:0,color:"primary",label:"Seguir",size:"sm",onClick:L(c=>r.followPlayer(o.user_id),["stop"])},null,8,["onClick"]))]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),f("div",Ie,"No hay sugerencias."))]),_:1})]),_:1},8,["modelValue"])]))]),_:1})]),_:1}),e(p)]),_:1})}var ao=ue(ge,[["render",Se]]);export{ao as default};
