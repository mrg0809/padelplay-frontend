import{Q as D}from"./QHeader.8ed599dc.js";import{a5 as I,x as q,y as V,f as h,r as g,h as E,a6 as A,o as r,z as i,A as a,s as F,d as t,B as u,t as l,a as f,bJ as B,e as d,a7 as k,a8 as x,Q as z,a9 as y,ab as L,aa as H,bE as U}from"./index.44d6004f.js";import{Q as J,a as C}from"./QItem.cafd0d6f.js";import{Q as w}from"./QItemLabel.30a3dfed.js";import{Q as j}from"./QList.8f6ea51c.js";import{Q as G}from"./QPage.069cc100.js";import{Q as K,a as O}from"./QLayout.bdadfe99.js";import{n as W}from"./association.a03ae41f.js";import{u as X}from"./useDashboardNavigation.f7fd3751.js";import{P as Y}from"./PlayerNavigationMenu.2ea5455a.js";import{C as Z}from"./ClubNavigationMenu.c0ded129.js";import{A as $,a as ee}from"./AssociationTopMenu.55ec1150.js";import{P as ae}from"./PlayerTopMenu.a2792fce.js";import{C as te}from"./ClubTopMenu.d2af42f2.js";import{N as oe}from"./NotificationBell.03dce8ef.js";import{B as ne}from"./BannerPromoScrolling.0ad337b6.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";import"./api.dcb17b1f.js";import"./QTabs.02ad9b81.js";import"./rtl.276c3f1b.js";import"./QFooter.dec25843.js";import"./QBtnDropdown.9d90b70a.js";import"./QBtnGroup.0f4e86aa.js";import"./QMenu.aa52843c.js";import"./position-engine.d7eef48c.js";import"./selection.ab0d7921.js";import"./haptics.bd260566.js";import"./QBadge.182a08f3.js";const se={name:"LeagueRankingPublic",components:{PlayerNavigationMenu:Y,ClubNavigationMenu:Z,AssociationNavigationMenu:$,PlayerTopMenu:ae,ClubTopMenu:te,AssociationTopMenu:ee,NotificationBell:oe,BannerPromoScrolling:ne},setup(){const M=I();q();const s=V(),{goToDashboard:Q}=X(),e=h(()=>M.params.id),v=g(null),b=g([]),m=g(!0),p=g(""),o=g(!1),c=h(()=>{if(!o.value)return null;const n=s.userType;return n==="player"?"PlayerNavigationMenu":n==="club"?"ClubNavigationMenu":n==="association"?"AssociationNavigationMenu":null}),S=h(()=>{if(!o.value)return null;const n=s.userType;return n==="player"?"PlayerTopMenu":n==="club"?"ClubTopMenu":n==="association"?"AssociationTopMenu":null}),R=async()=>{try{const n=await F.getItem("token");n&&(o.value=!0,s.setUserDataFromToken(n))}catch(n){console.error("Error checking authentication:",n)}};return E(async()=>{var n,N,P,T;if(await R(),!e.value){p.value="Liga no especificada",m.value=!1;return}try{const _=await W(e.value);v.value=((n=_.data)==null?void 0:n.league)||null,b.value=((N=_.data)==null?void 0:N.ranking)||[]}catch(_){p.value=((T=(P=_.response)==null?void 0:P.data)==null?void 0:T.detail)||"No se pudo cargar el ranking"}finally{m.value=!1}}),{league:v,ranking:b,loading:m,error:p,goToDashboard:Q,isAuthenticated:o,navigationMenuComponent:c,topMenuComponent:S}}},ie={class:"header-content"},le={class:"greeting"},ce={class:"header-title"},ue={key:0,class:"header-icons"},de={class:"text-h6"},me={key:0,class:"text-caption"},pe={key:0,class:"text-grey text-center q-mt-md"};function ge(M,s,Q,e,v,b){const m=A("NotificationBell"),p=A("BannerPromoScrolling");return r(),i(K,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[t(D,{elevated:"",class:"text-white"},{default:a(()=>{var o;return[u("div",ie,[u("div",le,[u("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:s[0]||(s[0]=(...c)=>e.goToDashboard&&e.goToDashboard(...c))}),u("span",ce,"Ranking "+l(((o=e.league)==null?void 0:o.name)||"Liga"),1)]),e.isAuthenticated?(r(),f("div",ue,[t(m),e.topMenuComponent?(r(),i(B(e.topMenuComponent),{key:0})):d("",!0)])):d("",!0)]),e.isAuthenticated?(r(),i(p,{key:0})):d("",!0)]}),_:1}),t(O,null,{default:a(()=>[t(G,{class:"q-pa-md"},{default:a(()=>[e.loading?(r(),i(k,{key:0,flat:"",bordered:"",class:"bg-transparent text-white"},{default:a(()=>[t(x,{class:"text-center"},{default:a(()=>[t(z,{color:"primary",size:"40px"})]),_:1})]),_:1})):e.error?(r(),i(k,{key:1,flat:"",bordered:"",class:"bg-grey-9 text-white"},{default:a(()=>[t(x,{class:"text-center text-negative"},{default:a(()=>[y(l(e.error),1)]),_:1})]),_:1})):(r(),f(L,{key:2},[t(k,{flat:"",bordered:"",class:"q-mb-md bg-grey-9 text-white"},{default:a(()=>[t(x,null,{default:a(()=>{var o,c;return[u("div",de,l((o=e.league)==null?void 0:o.name),1),(c=e.league)!=null&&c.description?(r(),f("div",me,l(e.league.description),1)):d("",!0)]}),_:1})]),_:1}),s[1]||(s[1]=u("div",{class:"text-subtitle1 q-mb-sm"},"Clasificaci\xF3n",-1)),t(j,{bordered:"",class:"rounded-borders bg-transparent"},{default:a(()=>[(r(!0),f(L,null,H(e.ranking,o=>(r(),i(J,{key:o.player_id,class:"q-mb-sm bg-grey-9"},{default:a(()=>[t(C,{avatar:""},{default:a(()=>[t(U,{color:"primary","text-color":"white"},{default:a(()=>[y(l(o.position),1)]),_:2},1024)]),_:2},1024),t(C,null,{default:a(()=>[t(w,null,{default:a(()=>[y(l(o.full_name),1)]),_:2},1024)]),_:2},1024),t(C,{side:""},{default:a(()=>[t(w,{class:"text-weight-bold"},{default:a(()=>[y(l(o.points)+" pts",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e.ranking.length?d("",!0):(r(),f("p",pe,"A\xFAn no hay puntos en esta liga."))],64))]),_:1})]),_:1}),e.navigationMenuComponent?(r(),i(B(e.navigationMenuComponent),{key:0})):d("",!0)]),_:1})}var Ue=re(se,[["render",ge],["__scopeId","data-v-facebab8"]]);export{Ue as default};
