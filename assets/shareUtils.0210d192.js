import{a4 as I,aE as q,bA as O}from"./index.f52eeb23.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */var E;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(E||(E={}));class $ extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const M=r=>{var e,t;return r!=null&&r.androidBridge?"android":!((t=(e=r==null?void 0:r.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},B=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},o=t.Plugins=t.Plugins||{},n=()=>e!==null?e.name:M(r),s=()=>n()!=="web",a=i=>{const c=g.get(i);return!!(c!=null&&c.platforms.has(n())||l(i))},l=i=>{var c;return(c=t.PluginHeaders)===null||c===void 0?void 0:c.find(C=>C.name===i)},u=i=>r.console.error(i),g=new Map,P=(i,c={})=>{const C=g.get(i);if(C)return console.warn(`Capacitor plugin "${i}" already registered. Cannot register plugins twice.`),C.proxy;const y=n(),v=l(i);let m;const H=async()=>(!m&&y in c?m=typeof c[y]=="function"?m=await c[y]():m=c[y]:e!==null&&!m&&"web"in c&&(m=typeof c.web=="function"?m=await c.web():m=c.web),m),D=(d,f)=>{var p,w;if(v){const b=v==null?void 0:v.methods.find(h=>f===h.name);if(b)return b.rtype==="promise"?h=>t.nativePromise(i,f.toString(),h):(h,L)=>t.nativeCallback(i,f.toString(),h,L);if(d)return(p=d[f])===null||p===void 0?void 0:p.bind(d)}else{if(d)return(w=d[f])===null||w===void 0?void 0:w.bind(d);throw new $(`"${i}" plugin is not implemented on ${y}`,E.Unimplemented)}},k=d=>{let f;const p=(...w)=>{const b=H().then(h=>{const L=D(h,d);if(L){const x=L(...w);return f=x==null?void 0:x.remove,x}else throw new $(`"${i}.${d}()" is not implemented on ${y}`,E.Unimplemented)});return d==="addListener"&&(b.remove=async()=>f()),b};return p.toString=()=>`${d.toString()}() { [capacitor code] }`,Object.defineProperty(p,"name",{value:d,writable:!1,configurable:!1}),p},S=k("addListener"),T=k("removeListener"),F=(d,f)=>{const p=S({eventName:d},f),w=async()=>{const h=await p;T({eventName:d,callbackId:h},f)},b=new Promise(h=>p.then(()=>h({remove:w})));return b.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await w()},b},A=new Proxy({},{get(d,f){switch(f){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?F:S;case"removeListener":return T;default:return k(f)}}});return o[i]=A,g.set(i,{name:i,proxy:A,platforms:new Set([...Object.keys(c),...v?[y]:[]])}),A};return t.convertFileSrc||(t.convertFileSrc=i=>i),t.getPlatform=n,t.handleError=u,t.isNativePlatform=s,t.isPluginAvailable=a,t.registerPlugin=P,t.Exception=$,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},K=r=>r.Capacitor=B(r),U=K(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),j=U.registerPlugin;class R{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(t);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),o&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,o){const n=this.listeners[e];if(!n){if(o){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}return}n.forEach(s=>s(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new U.Exception(e,E.Unimplemented)}unavailable(e="not available"){return new U.Exception(e,E.Unavailable)}async removeListener(e,t){const o=this.listeners[e];if(!o)return;const n=o.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){!e||(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];!t||(delete this.retainedEventArguments[e],t.forEach(o=>{this.notifyListeners(e,o)}))}}const _=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),W=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class G extends R{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[n,s]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=W(n).trim(),s=W(s).trim(),t[n]=s}),t}async setCookie(e){try{const t=_(e.key),o=_(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${n}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}j("CapacitorCookies",{web:()=>new G});const V=async r=>new Promise((e,t)=>{const o=new FileReader;o.onload=()=>{const n=o.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},o.onerror=n=>t(n),o.readAsDataURL(r)}),z=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(n=>n.toLocaleLowerCase()).reduce((n,s,a)=>(n[s]=r[e[a]],n),{})},J=(r,e=!0)=>r?Object.entries(r).reduce((o,n)=>{const[s,a]=n;let l,u;return Array.isArray(a)?(u="",a.forEach(g=>{l=e?encodeURIComponent(g):g,u+=`${s}=${l}&`}),u.slice(0,-1)):(l=e?encodeURIComponent(a):a,u=`${s}=${l}`),`${o}&${u}`},"").substr(1):null,Q=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),n=z(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(n.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,l]of Object.entries(r.data||{}))s.set(a,l);t.body=s.toString()}else if(n.includes("multipart/form-data")||r.data instanceof FormData){const s=new FormData;if(r.data instanceof FormData)r.data.forEach((l,u)=>{s.append(u,l)});else for(const l of Object.keys(r.data))s.append(l,r.data[l]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(n.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class X extends R{async request(e){const t=Q(e,e.webFetchExtra),o=J(e.params,e.shouldEncodeUrlParams),n=o?`${e.url}?${o}`:e.url,s=await fetch(n,t),a=s.headers.get("content-type")||"";let{responseType:l="text"}=s.ok?e:{};a.includes("application/json")&&(l="json");let u,g;switch(l){case"arraybuffer":case"blob":g=await s.blob(),u=await V(g);break;case"json":u=await s.json();break;case"document":case"text":default:u=await s.text()}const P={};return s.headers.forEach((i,c)=>{P[c]=i}),{data:u,headers:P,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}j("CapacitorHttp",{web:()=>new X});const Y=j("Share",{web:()=>I(()=>import("./web.a11af8c5.js"),["assets/web.a11af8c5.js","assets/index.f52eeb23.js","assets/index.d7de9018.css"]).then(r=>new r.ShareWeb)}),N=async(r,e,t)=>{try{if(q.is.capacitor)await Y.share({title:r,text:t,url:e,dialogTitle:"Compartir"}),console.log("Contenido compartido exitosamente (Capacitor)");else if(navigator.share)await navigator.share({title:r,text:t,url:e}),console.log("Contenido compartido exitosamente (Web Share API)");else{const o=`${t}

${e}`;if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(o),O.create({type:"positive",message:"Enlace copiado al portapapeles",position:"top",timeout:2e3}),console.log("Enlace copiado al portapapeles");else{const n=document.createElement("textarea");n.value=o,n.style.position="fixed",n.style.left="-999999px",document.body.appendChild(n),n.select();try{document.execCommand("copy"),O.create({type:"positive",message:"Enlace copiado al portapapeles",position:"top",timeout:2e3}),console.log("Enlace copiado al portapapeles (fallback)")}catch(s){console.error("Error al copiar al portapapeles:",s),O.create({type:"warning",message:"No se pudo compartir. Enlace: "+e,position:"top",timeout:5e3})}document.body.removeChild(n)}}}catch(o){if(console.error("Error al compartir:",o.message),o.name!=="AbortError")throw o}};export{R as W,N as s};
