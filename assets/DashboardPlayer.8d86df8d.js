import{Q as M}from"./QHeader.435fe33d.js";import{bC as k,F as N,r as f,B,aa as h,q as c,G as T,H as y,v as r,I as s,ad as b,x as p,s as _,ae as E,af as x,ag as w}from"./index.3f1076a3.js";import{Q as C,a as D}from"./QLayout.fe9d4509.js";import{u as I}from"./use-quasar.0801e5c5.js";import{N as L}from"./NotificationBell.10a15500.js";import{P as j}from"./PlayerNavigationMenu.993558b5.js";import{P as S}from"./PlayerTopMenu.8bdcc385.js";import{B as Q}from"./BannerPromoScrolling.500b6c87.js";import{u as F}from"./userStore.83e3996f.js";import{a as R}from"./api.2af71db3.js";import{f as W}from"./dateUtils.907855a0.js";import{u as q}from"./useMeta.b5a7fec1.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBadge.7d912cff.js";import"./QTabs.a46b14bb.js";import"./rtl.276c3f1b.js";import"./QFooter.1bfeb9e5.js";import"./QItem.b93d6a07.js";import"./QList.9c423d93.js";import"./QBtnDropdown.e6013b36.js";import"./QMenu.902d7e0c.js";import"./position-engine.56b90783.js";import"./selection.499e7988.js";import"./admin.c99b9bfe.js";import"./pinia.79532550.js";async function V(a,o,i=500,n={}){var d;if(!a||typeof((d=a.loading)==null?void 0:d.show)!="function"){console.error("runTaskWithMinLoading: Se requiere el objeto $q con el plugin Loading.");try{return await o()}catch(t){throw k.create({type:"negative",message:"Ocurri\xF3 un error inesperado.",caption:t.message}),t}}if(typeof o!="function"){const t=new Error('runTaskWithMinLoading: el par\xE1metro "task" debe ser una funci\xF3n as\xEDncrona.');return console.error(t),Promise.reject(t)}a.loading.show(n);const m=new Promise(t=>setTimeout(t,i));let u,l;const g=o().then(t=>{u=t}).catch(t=>{l=t,console.error("Error durante la ejecuci\xF3n de la tarea en runTaskWithMinLoading:",t),k.create({type:"negative",message:"Fall\xF3 la operaci\xF3n.",caption:(t==null?void 0:t.message)||"Error desconocido"})});try{await Promise.all([g,m])}finally{a.loading.hide()}if(l)throw l;return u}const z=async a=>{try{return(await R.get("/events/player/upcoming_events/")).data}catch(o){return console.error("Error fetching upcoming player events from API:",o),[]}};const O={name:"DashboardPlayer",components:{NotificationBell:L,NavigationMenu:j,PlayerTopMenu:S,BannerPromoScrolling:Q},setup(){q({title:"Dashboard"});const a=I(),o=N(),i=f([]),n=f(null),m=f(!0),u=F(),l=[{name:"Reserva tu cancha",icon:"edit_calendar",image_url:"/menu/reserva.jpeg",route:"reservas"},{name:"\xDAnete a un partido",icon:"sports_tennis",image_url:"/menu/unete.jpeg",route:"unete"},{name:"Inscr\xEDbete a torneos",icon:"o_emoji_events",image_url:"/menu/torneos.jpeg",route:"torneos"},{name:"Clases de P\xE1del",icon:"o_school",image_url:"/menu/clases.jpeg",route:"reservas"}],g=async()=>await z(u.userId),d=e=>{e.type==="match"?o.push(`/player/match/${e.id}`):e.type==="lesson"&&e.lesson_type==="private"?o.push(`/player/privatelesson/${e.id}`):e.type==="lesson"&&e.lesson_type==="public"&&o.push(`/player/detallessesion/${e.id}`)},t=e=>{e.name==="Clases de P\xE1del"?o.push({path:`/player/${e.route}`,query:{from:"lessons"}}):o.push(`/player/${e.route}`)};return B(async()=>{m.value=!0,i.value=[];try{const e=await V(a,g,2e3);i.value=e||[]}catch(e){console.error("Error fetching upcoming events:",e),i.value=[]}finally{m.value=!1}}),{full_name:n,options:l,upcomingEvents:i,isInitiallyLoading:m,formatDate:W,goToEventDetails:d,navigateTo:t,userStore:u}}},U={class:"header-content"},$={class:"greeting"},A={class:"header-icons"},G={class:"player-container"},J={class:"home"},K={class:"options-grid"},X=["onClick"],Y=["src"],Z={class:"next-events-section"},ee={class:"events-container"},oe={key:0,class:"empty-events"},te={key:1,class:"events-carousel"},se=["onClick"],ne={class:"event-info"},ae={class:"event-date"},re={class:"event-time"},ie={class:"event-club"},le={class:"event-court"};function ce(a,o,i,n,m,u){const l=h("NotificationBell"),g=h("PlayerTopMenu"),d=h("BannerPromoScrolling"),t=h("NavigationMenu");return c(),T(C,{view:"hHh lpR fFf"},{default:y(()=>[r(M,{elevated:"",class:"text-white"},{default:y(()=>[s("div",U,[s("div",$,[o[0]||(o[0]=s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"},null,-1)),b(" Bienvenido "+p(n.userStore.fullName),1)]),s("div",A,[r(l),r(g)])]),r(d)]),_:1}),r(D,null,{default:y(()=>[s("div",G,[s("div",J,[s("div",K,[(c(!0),_(x,null,E(n.options,e=>(c(),_("div",{key:e.name,class:"option-card",onClick:v=>n.navigateTo(e)},[s("img",{src:e.image_url,alt:"Option Image",class:"option-image"},null,8,Y),s("h3",null,p(e.name),1),r(w,{name:e.icon,size:"xl",class:"option-icon"},null,8,["name"])],8,X))),128))]),s("div",Z,[o[2]||(o[2]=s("div",{class:"next-events"},[s("h4",null,"Mis Eventos:")],-1)),s("div",ee,[n.upcomingEvents.length===0&&!n.isInitiallyLoading?(c(),_("div",oe,o[1]||(o[1]=[s("div",{class:"q-pa-md text-center text-grey"}," No tienes pr\xF3ximos eventos registrados. ",-1)]))):(c(),_("div",te,[(c(!0),_(x,null,E(n.upcomingEvents,e=>{var v,P;return c(),_("div",{key:e.id,class:"event-card",onClick:me=>n.goToEventDetails(e)},[r(w,{name:e.type==="match"?e.tournament_id?"emoji_events":"sports_tennis":"o_school",class:"event-icon material-icons-outlined",size:"35px"},null,8,["name"]),s("div",ne,[s("p",ae,p(n.formatDate(e.match_date||e.lesson_date)),1),s("p",re,p(e.match_time||e.lesson_time),1),s("p",ie,p((v=e.clubs)==null?void 0:v.name),1),s("p",le,p((P=e.courts)==null?void 0:P.name),1)])],8,se)}),128))]))])])])])]),_:1}),r(t)]),_:1})}var Qe=H(O,[["render",ce],["__scopeId","data-v-0e52c748"]]);export{Qe as default};
