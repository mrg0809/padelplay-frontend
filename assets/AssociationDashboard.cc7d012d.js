import{x as F,r as c,h as j,o as m,z as y,A as e,d as a,B as s,D as k,a7 as b,a8 as u,t as f,a as q,e as H,ad as E,ac as g,Q as G,aa as K,ab as X,af as J,E as D,ae as W,a9 as d,aK as Y}from"./index.284c5517.js";import{Q as Z}from"./QHeader.54948f97.js";import{Q as T}from"./QItemLabel.b8ba1298.js";import{Q as x,a as n}from"./QItem.756b5f76.js";import{Q as aa}from"./QChip.baef4018.js";import{Q as N}from"./QList.541389d3.js";import{Q as ea}from"./QPage.dfd00166.js";import{Q as ta,a as oa}from"./QLayout.c9dda368.js";import{Q as la}from"./QDrawer.f272a462.js";import{C as sa}from"./ClosePopup.a4e2cfa5.js";import{u as ra}from"./use-quasar.58056b10.js";import{a as h}from"./api.9de4aea7.js";import{N as na}from"./NotificationBell.113bcbcc.js";import{B as ia}from"./BannerPromoScrolling.c22fe0eb.js";import{A as ua}from"./AssociationNavigationMenu.e45b13d0.js";import{_ as da}from"./plugin-vue_export-helper.21dcd24c.js";import"./TouchPan.1fb6dc9f.js";import"./touch.9135741d.js";import"./selection.fdad0a51.js";import"./format.de7e9769.js";import"./QBadge.d9f1db5b.js";import"./admin.b5ca9f0e.js";import"./QTabs.b10b01c4.js";import"./rtl.276c3f1b.js";import"./QFooter.d2ce5627.js";const ca={class:"header-content"},ma={class:"header-icons"},pa={class:"text-h5"},fa={key:0,class:"text-caption"},ga={class:"row q-col-gutter-md q-mb-md"},va={class:"col-12 col-md-6"},_a={class:"col-12 col-md-6"},ya={class:"text-h6"},ba={__name:"AssociationDashboard",setup(xa){const p=F(),v=ra(),r=c(null),w=c([]),Q=c(!1),_=c(!1),C=c(!1),z=c(!1),i=c({name:"",description:"",logo_url:""});j(async()=>{await O(),await S()});const O=async()=>{try{const{data:l}=await h.get("/associations/association/organization");r.value=l.data,r.value&&(i.value={name:r.value.name,description:r.value.description||"",logo_url:r.value.logo_url||""})}catch(l){console.error("Error fetching organization:",l)}},S=async()=>{Q.value=!0;try{const{data:l}=await h.get("/padelite/association/tournaments");w.value=l.data||[]}catch(l){console.error("Error fetching tournaments:",l),v.notify({type:"negative",message:"Error al cargar torneos"})}finally{Q.value=!1}},A=async()=>{var l,t;z.value=!0;try{r.value?(await h.put("/associations/association/organization",i.value),v.notify({type:"positive",message:"Organizaci\xF3n actualizada exitosamente"})):(await h.post("/associations/association/organization",i.value),v.notify({type:"positive",message:"Organizaci\xF3n creada exitosamente"})),_.value=!1,await O()}catch(o){console.error("Error saving organization:",o),v.notify({type:"negative",message:((t=(l=o.response)==null?void 0:l.data)==null?void 0:t.detail)||"Error al guardar organizaci\xF3n"})}finally{z.value=!1}},I=()=>{if(!r.value){v.notify({type:"warning",message:"Por favor, crea tu organizaci\xF3n primero"}),_.value=!0;return}p.push("/association/tournaments/create")},L=()=>{p.push("/association/dashboard")},B=()=>{p.push("/association/tournaments")},M=()=>{p.push("/association/revenue")},P=l=>{p.push(`/association/tournaments/${l}`)},U=()=>{localStorage.removeItem("token"),p.push("/")},R=l=>l?new Date(l).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}):"",$=l=>{switch(l){case"open":return"positive";case"closed":return"negative";case"in_progress":return"warning";default:return"grey"}};return(l,t)=>(m(),y(ta,{view:"hHh lpR fFf",class:"text-white"},{default:e(()=>[a(Z,{elevated:"",class:"text-white"},{default:e(()=>[s("div",ca,[t[7]||(t[7]=s("div",{class:"greeting"},[s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),s("div",{class:"greeting-text"},[s("p",null,"Bienvenido"),s("p",{class:"text-grey"},"Dashboard Asociaci\xF3n")])],-1)),s("div",ma,[a(na),a(k,{flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=o=>C.value=!0)})])]),a(ia)]),_:1}),a(oa,null,{default:e(()=>[a(ea,{class:"q-pa-md"},{default:e(()=>[a(b,{flat:"",bordered:"",class:"q-mb-md bg-transparent text-white"},{default:e(()=>[a(u,null,{default:e(()=>{var o,V;return[s("div",pa,f(((o=r.value)==null?void 0:o.name)||"Mi Organizaci\xF3n"),1),(V=r.value)!=null&&V.description?(m(),q("div",fa,f(r.value.description),1)):H("",!0)]}),_:1}),a(E,null,{default:e(()=>[a(k,{flat:"",color:"primary",label:"Editar Organizaci\xF3n",onClick:t[1]||(t[1]=o=>_.value=!0)})]),_:1})]),_:1}),s("div",ga,[s("div",va,[a(b,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:I},{default:e(()=>[a(u,{class:"text-center"},{default:e(()=>[a(g,{name:"add_circle",size:"48px",color:"primary"}),t[8]||(t[8]=s("div",{class:"text-h6 q-mt-md"},"Crear Torneo Padelite",-1))]),_:1})]),_:1})]),s("div",_a,[a(b,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:B},{default:e(()=>[a(u,{class:"text-center"},{default:e(()=>[a(g,{name:"emoji_events",size:"48px",color:"primary"}),t[9]||(t[9]=s("div",{class:"text-h6 q-mt-md"},"Mis Torneos",-1))]),_:1})]),_:1})])]),a(b,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:e(()=>[a(u,null,{default:e(()=>[...t[10]||(t[10]=[s("div",{class:"text-h6"},"Torneos Recientes",-1)])]),_:1}),Q.value?(m(),y(u,{key:0},{default:e(()=>[a(G,{color:"primary",size:"50px"})]),_:1})):w.value.length>0?(m(),y(N,{key:1,separator:""},{default:e(()=>[(m(!0),q(X,null,K(w.value,o=>(m(),y(x,{key:o.id,clickable:"",onClick:V=>P(o.id)},{default:e(()=>[a(n,null,{default:e(()=>[a(T,null,{default:e(()=>[d(f(o.name),1)]),_:2},1024),a(T,{caption:""},{default:e(()=>[d(f(R(o.start_date)),1)]),_:2},1024)]),_:2},1024),a(n,{side:""},{default:e(()=>[a(aa,{color:$(o.status),"text-color":"white"},{default:e(()=>[d(f(o.status),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(m(),y(u,{key:2},{default:e(()=>[...t[11]||(t[11]=[s("div",{class:"text-center text-grey"}," No hay torneos recientes ",-1)])]),_:1}))]),_:1}),a(J,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o)},{default:e(()=>[a(b,{style:{"min-width":"400px"},class:"bg-dark text-white"},{default:e(()=>[a(u,null,{default:e(()=>[s("div",ya,f(r.value?"Editar Organizaci\xF3n":"Crear Organizaci\xF3n"),1)]),_:1}),a(u,null,{default:e(()=>[a(D,{modelValue:i.value.name,"onUpdate:modelValue":t[2]||(t[2]=o=>i.value.name=o),label:"Nombre de la Organizaci\xF3n",outlined:"",dense:"",dark:"",class:"q-mb-md"},null,8,["modelValue"]),a(D,{modelValue:i.value.description,"onUpdate:modelValue":t[3]||(t[3]=o=>i.value.description=o),label:"Descripci\xF3n",type:"textarea",outlined:"",dense:"",dark:"",rows:"3",class:"q-mb-md"},null,8,["modelValue"]),a(D,{modelValue:i.value.logo_url,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value.logo_url=o),label:"URL del Logo",outlined:"",dense:"",dark:""},null,8,["modelValue"])]),_:1}),a(E,{align:"right"},{default:e(()=>[W(a(k,{flat:"",label:"Cancelar",color:"grey"},null,512),[[sa]]),a(k,{flat:"",label:"Guardar",color:"primary",onClick:A,loading:z.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(ua),a(la,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o),side:"right",overlay:"",behavior:"mobile",class:"bg-dark text-white"},{default:e(()=>[a(N,null,{default:e(()=>[a(T,{header:""},{default:e(()=>[...t[12]||(t[12]=[d("Men\xFA",-1)])]),_:1}),a(x,{clickable:"",onClick:L},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"home"})]),_:1}),a(n,null,{default:e(()=>[...t[13]||(t[13]=[d("Dashboard",-1)])]),_:1})]),_:1}),a(x,{clickable:"",onClick:B},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"emoji_events"})]),_:1}),a(n,null,{default:e(()=>[...t[14]||(t[14]=[d("Mis Torneos",-1)])]),_:1})]),_:1}),a(x,{clickable:"",onClick:M},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"attach_money"})]),_:1}),a(n,null,{default:e(()=>[...t[15]||(t[15]=[d("Ingresos",-1)])]),_:1})]),_:1}),a(Y),a(x,{clickable:"",onClick:U},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"logout"})]),_:1}),a(n,null,{default:e(()=>[...t[16]||(t[16]=[d("Cerrar Sesi\xF3n",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Ha=da(ba,[["__scopeId","data-v-a600b9bc"]]);export{Ha as default};
