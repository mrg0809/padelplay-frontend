import{Q as U}from"./QHeader.289f0645.js";import{Q as z}from"./QSpinnerDots.ed8017b0.js";import{r as y,o as t,a as i,B as r,d as s,A as m,a8 as P,a9 as p,t as b,e as c,ab as N,aa as S,D as L,a7 as Q,z as C,y as R,x as $,a5 as W,f as B,h as F,a6 as k,ac as I,aK as O}from"./index.687b44e8.js";import{Q as G,a as x}from"./QTabs.979bee57.js";import{Q as H}from"./QPage.fcc9aae1.js";import{Q as K,a as Y}from"./QLayout.30990248.js";import{u as j}from"./use-quasar.ba375293.js";import{n as J}from"./navigationUtils.2c4b9dee.js";import{q as X,r as Z,s as aa,t as oa}from"./association.b92d73c6.js";import{C as ta,T as sa,u as ia}from"./TournamentsClubListComponent.48077b8a.js";import{B as ea}from"./BannerPromoScrolling.1700e538.js";import{N as na}from"./NotificationBell.9fdba392.js";import{P as la}from"./PlayerNavigationMenu.1a7d2e68.js";import{D as ra}from"./DesktopNavigation.642093f4.js";import{Q as E}from"./QChip.c9b5cbc6.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as V}from"./QBanner.7143372b.js";import{u as ca}from"./summaryStore.ade2e05f.js";import"./rtl.276c3f1b.js";import"./api.1c42dce4.js";import"./QItemLabel.bbebea39.js";import"./QItem.eb9291fb.js";import"./QList.1288e946.js";import"./QBtnDropdown.17175f2e.js";import"./QBtnGroup.6b9d07ee.js";import"./QMenu.df8dfc7c.js";import"./position-engine.46674690.js";import"./selection.0f785986.js";import"./ClosePopup.89fae5e1.js";import"./dateUtils.8e31f283.js";import"./QBadge.0c3a126f.js";import"./QFooter.b7b22f15.js";import"./QTooltip.a50ac131.js";function da(){const o=y(null),e=y([]),n=y([]),a=y(!1);return{associationDetails:o,tournaments:e,posts:n,loading:a,fetchAssociationData:async u=>{a.value=!0;try{const l=await X(u);o.value=l.data;const D=await Z(u);e.value=D.data||[];const v=await aa(u);n.value=v.posts||[]}catch(l){throw console.error("Error fetching association data:",l),l}finally{a.value=!1}}}}const ma={class:"association-info-layout"},ua={class:"association-details-section"},fa={key:0},ga={key:1},Da={key:2},_a={key:3},ba={key:4},pa={key:5},va=["href"],ya={key:6,class:"q-mt-md"},ha={key:7,class:"q-mt-md"},ka={key:8,class:"q-mt-md text-center"},Aa={__name:"AssociationInfoComponent",props:{associationDetails:Object},setup(o){const e=n=>{n&&!n.startsWith("http")&&(n="https://"+n),window.open(n,"_blank")};return(n,a)=>(t(),i("div",ma,[r("div",ua,[s(Q,{class:"tabs-section"},{default:m(()=>[s(P,null,{default:m(()=>[o.associationDetails?(t(),i("p",fa,[a[1]||(a[1]=r("strong",null,"Nombre:",-1)),p(" "+b(o.associationDetails.name||"No disponible"),1)])):c("",!0),o.associationDetails&&o.associationDetails.description?(t(),i("p",ga,[a[2]||(a[2]=r("strong",null,"Descripci\xF3n:",-1)),p(" "+b(o.associationDetails.description),1)])):c("",!0),o.associationDetails&&o.associationDetails.about?(t(),i("p",Da,[a[3]||(a[3]=r("strong",null,"Sobre nosotros:",-1)),p(" "+b(o.associationDetails.about),1)])):c("",!0),o.associationDetails&&o.associationDetails.address?(t(),i("p",_a,[a[4]||(a[4]=r("strong",null,"Direcci\xF3n:",-1)),p(" "+b(o.associationDetails.address),1)])):c("",!0),o.associationDetails&&o.associationDetails.contact_email?(t(),i("p",ba,[a[5]||(a[5]=r("strong",null,"Email:",-1)),p(" "+b(o.associationDetails.contact_email),1)])):c("",!0),o.associationDetails&&o.associationDetails.website?(t(),i("p",pa,[a[6]||(a[6]=r("strong",null,"Sitio web:",-1)),r("a",{href:o.associationDetails.website,target:"_blank",class:"website-link"},b(o.associationDetails.website),9,va)])):c("",!0),o.associationDetails&&o.associationDetails.countries&&o.associationDetails.countries.length>0?(t(),i("div",ya,[a[7]||(a[7]=r("strong",null,"Pa\xEDses:",-1)),(t(!0),i(N,null,S(o.associationDetails.countries,d=>(t(),C(E,{key:d,color:"primary","text-color":"white",class:"q-ml-xs"},{default:m(()=>[p(b(d),1)]),_:2},1024))),128))])):c("",!0),o.associationDetails&&o.associationDetails.states&&o.associationDetails.states.length>0?(t(),i("div",ha,[a[8]||(a[8]=r("strong",null,"Estados:",-1)),(t(!0),i(N,null,S(o.associationDetails.states,d=>(t(),C(E,{key:d,color:"secondary","text-color":"white",class:"q-ml-xs"},{default:m(()=>[p(b(d),1)]),_:2},1024))),128))])):c("",!0),o.associationDetails&&o.associationDetails.website?(t(),i("div",ka,[s(L,{flat:"",round:"",size:"xl",icon:"language",color:"white",class:"q-mx-sm social-icon-btn",onClick:a[0]||(a[0]=d=>e(o.associationDetails.website)),style:{backgroundColor:"#4285F4"}})])):c("",!0)]),_:1})]),_:1})])]))}};var wa=q(Aa,[["__scopeId","data-v-11991991"]]);const Ca={name:"AssociationAffiliateComponent",props:{associationDetails:Object},emits:["affiliate"],setup(o,{emit:e}){const n=j();R();const a=ca(),d=$(),u=y(!1),l=y(!1),D=f=>{if(f>=365){const g=Math.floor(f/365);return`${g} a\xF1o${g>1?"s":""}`}else if(f>=30){const g=Math.floor(f/30);return`${g} mes${g>1?"es":""}`}else return`${f} d\xEDa${f>1?"s":""}`};return{loading:u,isAffiliated:l,formatDuration:D,handleAffiliate:async()=>{var f,g,A;if(!((f=o.associationDetails)!=null&&f.id)){n.notify({color:"negative",message:"Error: No se pudo obtener la informaci\xF3n de la asociaci\xF3n."});return}u.value=!0;try{const _=await oa(o.associationDetails.id);if(_.payment_order_id){const w={summaryTitle:"Afiliaci\xF3n a Asociaci\xF3n",itemDetails:[{label:"Asociaci\xF3n",value:o.associationDetails.name||"No disponible"},{label:"Precio",value:`$${_.amount}`},{label:"Duraci\xF3n",value:D(o.associationDetails.membership_duration_days||365)}],baseData:{clubId:null,price:parseFloat(_.amount),participants:1,type:"association_affiliation",id:o.associationDetails.id,recipient_user_id:o.associationDetails.user_id},allowPaymentSplit:!1,showPublicToggle:!1,commissionRate:4,extraData:{association_id:o.associationDetails.id,payment_order_id:_.payment_order_id}};a.setSummaryDetails(w),console.log("Datos del resumen guardados en Pinia:",w),d.push({name:"OrderSummary"})}else throw new Error("No se recibi\xF3 el ID de la orden de pago")}catch(_){console.error("Error al procesar afiliaci\xF3n:",_),n.notify({color:"negative",message:((A=(g=_.response)==null?void 0:g.data)==null?void 0:A.detail)||"Error al procesar la afiliaci\xF3n."})}finally{u.value=!1}}}}},Ta={class:"affiliate-component"},xa={class:"text-h6 q-mb-md"},Pa={key:0,class:"q-mb-md"},Qa={key:0},qa={key:1,class:"q-mb-md"},Na={key:2,class:"q-mb-md"};function Sa(o,e,n,a,d,u){return t(),i("div",Ta,[s(Q,{class:"affiliate-card"},{default:m(()=>[s(P,null,{default:m(()=>{var l,D,v;return[r("div",xa,"Afiliarse a "+b((l=n.associationDetails)==null?void 0:l.name),1),(D=n.associationDetails)!=null&&D.membership_price?(t(),i("div",Pa,[r("p",null,[e[0]||(e[0]=r("strong",null,"Precio de membres\xEDa:",-1)),p(" $"+b(n.associationDetails.membership_price),1)]),n.associationDetails.membership_duration_days?(t(),i("p",Qa,[e[1]||(e[1]=r("strong",null,"Duraci\xF3n:",-1)),p(" "+b(a.formatDuration(n.associationDetails.membership_duration_days)),1)])):c("",!0)])):(t(),i("div",qa,[s(V,{class:"bg-warning text-dark"},{default:m(()=>[...e[2]||(e[2]=[p(" Esta asociaci\xF3n no tiene configurado un precio de membres\xEDa. ",-1)])]),_:1})])),a.isAffiliated?(t(),i("div",Na,[s(V,{class:"bg-positive text-white"},{default:m(()=>[...e[3]||(e[3]=[p(" Ya est\xE1s afiliado a esta asociaci\xF3n. ",-1)])]),_:1})])):(v=n.associationDetails)!=null&&v.membership_price?(t(),C(L,{key:3,color:"primary",label:"Afiliarse ahora",icon:"o_person_add",size:"lg",class:"full-width q-mt-md",loading:a.loading,onClick:a.handleAffiliate},null,8,["loading","onClick"])):c("",!0)]}),_:1})]),_:1})])}var Ba=q(Ca,[["render",Sa],["__scopeId","data-v-fb9371a8"]]);const Ia={components:{BannerPromoScrolling:ea,NotificationBell:na,PlayerNavigationMenu:la,ClubWallComponent:ta,TournamentsClubListComponent:sa,DesktopNavigation:ra,AssociationInfoComponent:wa,AssociationAffiliateComponent:Ba},setup(){const o=W(),e=$(),n=j(),a=R(),d=y("info"),u=o.params.associationId,l=da(),{toggleReaction:D}=ia(),v={like:"\u{1F44D}",love:"\u2764\uFE0F",laugh:"\u{1F602}",wow:"\u{1F62E}",sad:"\u{1F622}",angry:"\u{1F621}"},f=y(null),g=y(!1),A=h=>{l.posts.value=h},_=B(()=>l.associationDetails.value),w=B(()=>{var h;return((h=l.associationDetails.value)==null?void 0:h.logo_url)||null}),T=h=>{e.push({name:"TournamentDetails",params:{tournamentId:h}})},M=async()=>{await l.fetchAssociationData(u)};return F(async()=>{if(!u){l.loading.value=!1,console.error("Association ID is undefined");return}try{o.params.tab?d.value=o.params.tab:o.query.tab&&(d.value=o.query.tab),await l.fetchAssociationData(u),console.log("AssociationDetails cargado:",l.associationDetails.value)}catch(h){l.loading.value=!1,console.error("Error initializing association details:",h),n.notify({color:"negative",message:"Error al cargar detalles de la asociaci\xF3n."})}}),{association:l,selectedTab:d,reactionEmojis:v,menuVisible:g,selectedReaction:f,updatePosts:A,unwrappedAssociationDetails:_,toggleReaction:D,userStore:a,associationLogoUrl:w,goToTournamentDetails:T,handleAffiliate:M,goBack:()=>{e.back()},goToDashboard:()=>{J(e,a)}}}},Ea={class:"header-content"},Va={class:"greeting"},La={class:"header-icons"},Ra={key:0,class:"text-center"},$a={key:1},ja={class:"association-logo-container"},Ma=["src"],Ua={class:"tab-content-wrapper"},za={key:0,class:"info-desktop"},Wa={key:1,class:"tournaments-desktop"},Fa={key:2,class:"association-wall-desktop"},Oa={key:3,class:"affiliate-desktop"};function Ga(o,e,n,a,d,u){const l=k("NotificationBell"),D=k("BannerPromoScrolling"),v=k("DesktopNavigation"),f=k("AssociationInfoComponent"),g=k("TournamentsClubListComponent"),A=k("ClubWallComponent"),_=k("AssociationAffiliateComponent"),w=k("PlayerNavigationMenu");return t(),C(K,{view:"hHh lpR fFf",class:"text-white"},{default:m(()=>[s(U,{elevated:"",class:"text-white"},{default:m(()=>[r("div",Ea,[r("div",Va,[r("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:e[0]||(e[0]=(...T)=>a.goToDashboard&&a.goToDashboard(...T))})]),r("div",La,[s(l)])]),s(D)]),_:1}),s(v),s(Y,null,{default:m(()=>[s(H,{class:"q-pa-md association-details-layout"},{default:m(()=>[a.association.loading.value===!0?(t(),i("div",Ra,[s(z,{color:"primary",size:"xl"})])):(t(),i("div",$a,[r("div",ja,[a.associationLogoUrl?(t(),i("img",{key:0,src:a.associationLogoUrl,alt:"Association Logo",class:"association-logo-img"},null,8,Ma)):c("",!0)]),s(Q,{class:"tabs-section"},{default:m(()=>[s(P,null,{default:m(()=>[s(G,{modelValue:a.selectedTab,"onUpdate:modelValue":e[1]||(e[1]=T=>a.selectedTab=T),align:"justify",class:"text-white"},{default:m(()=>[o.$q.screen.lt.lg?(t(),C(I,{key:0,name:"arrow_back_ios",onClick:a.goBack,class:"cursor-pointer q-mr-sm"},null,8,["onClick"])):c("",!0),s(x,{name:"info",label:"Info",icon:"o_info"}),s(x,{name:"tournaments",label:"Torneos",icon:"o_emoji_events"}),s(x,{name:"wall",label:"Muro",icon:"o_chat"}),s(x,{name:"affiliate",label:"Afiliarse",icon:"o_person_add"}),o.$q.screen.lt.lg?(t(),C(I,{key:1,name:"arrow_forward_ios",class:"q-ml-sm"})):c("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(O),r("div",Ua,[a.selectedTab==="info"?(t(),i("div",za,[s(f,{associationDetails:a.unwrappedAssociationDetails},null,8,["associationDetails"])])):c("",!0),a.selectedTab==="tournaments"?(t(),i("div",Wa,[s(g,{tournaments:a.association.tournaments.value,onGoToTournamentDetails:a.goToTournamentDetails},null,8,["tournaments","onGoToTournamentDetails"])])):c("",!0),a.selectedTab==="wall"?(t(),i("div",Fa,[s(A,{posts:a.association.posts.value,reactionEmojis:a.reactionEmojis,selectedReaction:a.selectedReaction,playerId:a.userStore.userId,menuVisible:a.menuVisible,"onUpdate:posts":a.updatePosts},null,8,["posts","reactionEmojis","selectedReaction","playerId","menuVisible","onUpdate:posts"])])):c("",!0),a.selectedTab==="affiliate"?(t(),i("div",Oa,[s(_,{associationDetails:a.unwrappedAssociationDetails,onAffiliate:a.handleAffiliate},null,8,["associationDetails","onAffiliate"])])):c("",!0)])]))]),_:1})]),_:1}),s(w)]),_:1})}var qo=q(Ia,[["render",Ga],["__scopeId","data-v-f7184864"]]);export{qo as default};
