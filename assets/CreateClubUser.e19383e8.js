import{Q as x}from"./QHeader.8ed599dc.js";import{a5 as D,x as w,f as S,a6 as u,o as m,z as i,A as r,d as a,B as l,a7 as B,a8 as Q,ac as t,a9 as f,E as d,aK as N,D as _,t as g,e as v}from"./index.44d6004f.js";import{Q as A}from"./QForm.29e7d3c5.js";import{Q as h}from"./QBanner.fa548e9b.js";import{Q as U}from"./QPage.069cc100.js";import{Q as P,a as T}from"./QLayout.bdadfe99.js";import{B as E,a as F}from"./BannerPromoScrolling.0ad337b6.js";import{A as I}from"./AdminNavigationMenu.1c866cd8.js";import{S as L}from"./SuperuserNavigationMenu.6c1f81b5.js";import{A as R}from"./AdminTopMenu.92c066f4.js";import{S as H}from"./SuperuserTopMenu.8780f74d.js";import{N as z}from"./NotificationBell.03dce8ef.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";import"./api.dcb17b1f.js";import"./QTabs.02ad9b81.js";import"./rtl.276c3f1b.js";import"./QFooter.dec25843.js";import"./QItem.cafd0d6f.js";import"./QList.8f6ea51c.js";import"./QBtnDropdown.9d90b70a.js";import"./QBtnGroup.0f4e86aa.js";import"./QMenu.aa52843c.js";import"./position-engine.d7eef48c.js";import"./selection.ab0d7921.js";import"./haptics.bd260566.js";import"./QBadge.182a08f3.js";const W={name:"CreateClubUser",components:{AdminNavigationMenu:I,SuperuserNavigationMenu:L,AdminTopMenu:R,SuperuserTopMenu:H,NotificationBell:z,BannerPromoScrolling:E},setup(){const c=D(),e=w(),n=S(()=>c.path.startsWith("/admin"));return{isAdminPath:n,goBack:()=>e.push(n.value?"/dashboard/admin":"/dashboard/superuser")}},data(){return{formData:{full_name:"",email:"",password:"",club_name:"",club_address:"",club_phone:""},loading:!1,successMessage:"",errorMessage:""}},methods:{async onSubmit(){var c,e;this.loading=!0,this.successMessage="",this.errorMessage="";try{const n=await F(this.formData);this.successMessage=`Club "${n.club_name}" creado exitosamente. El usuario puede iniciar sesi\xF3n con ${this.formData.email}`,this.clearForm()}catch(n){this.errorMessage="Error al crear el usuario club: "+(((e=(c=n.response)==null?void 0:c.data)==null?void 0:e.detail)||n.message),console.error("Error creating club user:",n)}finally{this.loading=!1}},clearForm(){this.formData={full_name:"",email:"",password:"",club_name:"",club_address:"",club_phone:""}}}},j={class:"header-content"},G={class:"greeting"},J={class:"header-icons"},O={class:"q-pa-md"},X={class:"text-h6 text-white q-mb-md"},Y={class:"text-h6 text-white q-mb-md"},Z={class:"row q-gutter-sm q-mt-lg"};function $(c,e,n,p,s,b){const C=u("NotificationBell"),k=u("AdminTopMenu"),y=u("SuperuserTopMenu"),M=u("BannerPromoScrolling"),q=u("AdminNavigationMenu"),V=u("SuperuserNavigationMenu");return m(),i(P,{view:"hHh lpR fFf",class:"bg-dark text-white layout-with-bottom-nav"},{default:r(()=>[a(x,{elevated:"",class:"text-white admin-header"},{default:r(()=>[l("div",j,[l("div",G,[l("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:e[0]||(e[0]=(...o)=>p.goBack&&p.goBack(...o))}),e[7]||(e[7]=l("span",{class:"text-subtitle1"},"Crear usuario Club",-1))]),l("div",J,[a(C),p.isAdminPath?(m(),i(k,{key:0})):(m(),i(y,{key:1}))])]),a(M)]),_:1}),a(T,null,{default:r(()=>[a(U,{padding:"",class:"bg-dark"},{default:r(()=>[l("div",O,[e[10]||(e[10]=l("div",{class:"row q-mb-lg"},[l("div",{class:"col"},[l("p",{class:"text-grey-4"}," Crear cuenta para un nuevo establecimiento/club ")])],-1)),a(B,{class:"create-club-card"},{default:r(()=>[a(Q,null,{default:r(()=>[a(A,{onSubmit:b.onSubmit,class:"q-gutter-md"},{default:r(()=>[l("div",X,[a(t,{name:"person",class:"q-mr-sm"}),e[8]||(e[8]=f(" Informaci\xF3n del Usuario ",-1))]),a(d,{modelValue:s.formData.full_name,"onUpdate:modelValue":e[1]||(e[1]=o=>s.formData.full_name=o),label:"Nombre completo del contacto",filled:"",dark:"",rules:[o=>!!o||"Campo requerido"],class:"q-mb-sm"},{prepend:r(()=>[a(t,{name:"person"})]),_:1},8,["modelValue","rules"]),a(d,{modelValue:s.formData.email,"onUpdate:modelValue":e[2]||(e[2]=o=>s.formData.email=o),type:"email",label:"Email",filled:"",dark:"",rules:[o=>!!o||"Campo requerido",o=>/.+@.+\..+/.test(o)||"Email inv\xE1lido"],class:"q-mb-sm"},{prepend:r(()=>[a(t,{name:"email"})]),_:1},8,["modelValue","rules"]),a(d,{modelValue:s.formData.password,"onUpdate:modelValue":e[3]||(e[3]=o=>s.formData.password=o),type:"password",label:"Contrase\xF1a",filled:"",dark:"",rules:[o=>!!o||"Campo requerido",o=>o.length>=6||"M\xEDnimo 6 caracteres"],class:"q-mb-md"},{prepend:r(()=>[a(t,{name:"lock"})]),_:1},8,["modelValue","rules"]),a(N,{dark:"",class:"q-my-md"}),l("div",Y,[a(t,{name:"store",class:"q-mr-sm"}),e[9]||(e[9]=f(" Informaci\xF3n del Club ",-1))]),a(d,{modelValue:s.formData.club_name,"onUpdate:modelValue":e[4]||(e[4]=o=>s.formData.club_name=o),label:"Nombre del club",filled:"",dark:"",rules:[o=>!!o||"Campo requerido"],class:"q-mb-sm"},{prepend:r(()=>[a(t,{name:"store"})]),_:1},8,["modelValue","rules"]),a(d,{modelValue:s.formData.club_address,"onUpdate:modelValue":e[5]||(e[5]=o=>s.formData.club_address=o),label:"Direcci\xF3n del club (opcional)",filled:"",dark:"",class:"q-mb-sm",type:"textarea",rows:"2"},{prepend:r(()=>[a(t,{name:"location_on"})]),_:1},8,["modelValue"]),a(d,{modelValue:s.formData.club_phone,"onUpdate:modelValue":e[6]||(e[6]=o=>s.formData.club_phone=o),label:"Tel\xE9fono del club (opcional)",filled:"",dark:"",class:"q-mb-md"},{prepend:r(()=>[a(t,{name:"phone"})]),_:1},8,["modelValue"]),l("div",Z,[a(_,{type:"submit",color:"primary",loading:s.loading,icon:"add_business",label:"Crear Usuario Club",class:"col-auto"},null,8,["loading"]),a(_,{type:"button",color:"grey-7",flat:"",icon:"clear",label:"Limpiar",onClick:b.clearForm,class:"col-auto"},null,8,["onClick"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),s.successMessage?(m(),i(h,{key:0,class:"bg-positive text-white q-mt-md"},{avatar:r(()=>[a(t,{name:"check_circle"})]),default:r(()=>[f(" "+g(s.successMessage),1)]),_:1})):v("",!0),s.errorMessage?(m(),i(h,{key:1,class:"bg-negative text-white q-mt-md"},{avatar:r(()=>[a(t,{name:"error"})]),default:r(()=>[f(" "+g(s.errorMessage),1)]),_:1})):v("",!0)])]),_:1})]),_:1}),p.isAdminPath?(m(),i(q,{key:0})):(m(),i(V,{key:1}))]),_:1})}var xe=K(W,[["render",$],["__scopeId","data-v-1b7d9888"]]);export{xe as default};
