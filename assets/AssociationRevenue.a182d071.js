import{F as P,r as f,j as b,B as S,q as u,G as h,H as t,v as e,I as s,J as $,ab as c,ac as m,x as i,s as y,Q as A,ae as D,af as L,ad as r,ag as _,aO as V}from"./index.813f732c.js";import{Q as M}from"./QHeader.16359345.js";import{Q}from"./QItemLabel.b765193d.js";import{Q as v,a as l}from"./QItem.01a0916f.js";import{Q as q}from"./QList.e999ac61.js";import{Q as j}from"./QPage.f2a762bd.js";import{Q as H,a as E}from"./QLayout.3fe3ded4.js";import{Q as z}from"./QDrawer.d2eafcfa.js";import{u as G}from"./use-quasar.b33049a5.js";import{a as J}from"./api.e96a150b.js";import{N as O}from"./NotificationBell.f206b6e6.js";import{B as U}from"./BannerPromoScrolling.41d12ea0.js";import{A as K}from"./AssociationNavigationMenu.4037b881.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";import"./TouchPan.a7fa0e15.js";import"./touch.9135741d.js";import"./selection.7c5ca85a.js";import"./format.de7e9769.js";import"./index.c98ef0da.js";import"./QBadge.3b86f4fc.js";import"./admin.48eb7fea.js";import"./QTabs.d300a253.js";import"./rtl.276c3f1b.js";import"./QFooter.44b747ac.js";const X={class:"header-content"},Y={class:"header-icons"},Z={class:"row q-col-gutter-md q-mb-md"},ee={class:"col-12 col-md-4"},te={class:"text-h4 text-positive"},ae={class:"col-12 col-md-4"},se={class:"text-h4 text-warning"},oe={class:"col-12 col-md-4"},le={class:"text-h4 text-primary"},ne={key:0,class:"text-center"},ie={class:"text-right"},re={class:"text-positive text-bold"},de={class:"text-caption text-grey"},ue={class:"text-caption"},ce={key:2,class:"text-center text-grey q-pa-md"},me={class:"text-caption q-mb-md"},ve={__name:"AssociationRevenue",setup(pe){const p=P();G();const g=f(!1),d=f([]),x=f(!1),k=f(10),w=b(()=>d.value.reduce((o,a)=>o+a.total_revenue,0)),C=b(()=>d.value.reduce((o,a)=>o+a.commission,0)),B=b(()=>w.value-C.value);S(async()=>{await R()});const R=async()=>{g.value=!0;try{const{data:o}=await J.get("/padelite/association/revenue");d.value=o.data||[],o.commission_rate&&(k.value=o.commission_rate)}catch(o){console.error("Error fetching revenue:",o),d.value=[]}finally{g.value=!1}},I=()=>{p.push("/association/dashboard")},F=()=>{p.push("/association/tournaments")},N=()=>{p.push("/association/revenue")},T=()=>{localStorage.removeItem("token"),p.push("/")};return(o,a)=>(u(),h(H,{view:"hHh lpR fFf",class:"text-white"},{default:t(()=>[e(M,{elevated:"",class:"text-white"},{default:t(()=>[s("div",X,[s("div",{class:"greeting"},[s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:I}),a[2]||(a[2]=s("div",{class:"greeting-text"},[s("p",null,"Bienvenido"),s("p",{class:"text-grey"},"Ingresos")],-1))]),s("div",Y,[e(O),e($,{flat:"",round:"",icon:"menu",onClick:a[0]||(a[0]=n=>x.value=!0)})])]),e(U)]),_:1}),e(E,null,{default:t(()=>[e(j,{class:"q-pa-md"},{default:t(()=>[a[9]||(a[9]=s("div",{class:"text-h5 q-mb-md"},"Ingresos de la Asociaci\xF3n",-1)),s("div",Z,[s("div",ee,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[3]||(a[3]=s("div",{class:"text-caption"},"Ingresos Totales",-1)),s("div",te,"$"+i(w.value.toFixed(2)),1)]),_:1})]),_:1})]),s("div",ae,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[4]||(a[4]=s("div",{class:"text-caption"},"Comisi\xF3n PadelPlay",-1)),s("div",se,"$"+i(C.value.toFixed(2)),1)]),_:1})]),_:1})]),s("div",oe,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[5]||(a[5]=s("div",{class:"text-caption"},"Ingresos Netos",-1)),s("div",le,"$"+i(B.value.toFixed(2)),1)]),_:1})]),_:1})])]),e(c,{flat:"",bordered:"",class:"bg-transparent text-white q-mb-md"},{default:t(()=>[e(m,null,{default:t(()=>[a[6]||(a[6]=s("div",{class:"text-h6 q-mb-md"},"Ingresos por Torneo",-1)),g.value?(u(),y("div",ne,[e(A,{color:"primary",size:"50px"})])):d.value.length>0?(u(),h(q,{key:1,separator:""},{default:t(()=>[(u(!0),y(L,null,D(d.value,n=>(u(),h(v,{key:n.tournament_id},{default:t(()=>[e(l,null,{default:t(()=>[e(Q,null,{default:t(()=>[r(i(n.tournament_name),1)]),_:2},1024),e(Q,{caption:""},{default:t(()=>[r(i(n.registered_players)+" jugadores inscritos ",1)]),_:2},1024)]),_:2},1024),e(l,{side:""},{default:t(()=>[s("div",ie,[s("div",re,"$"+i(n.total_revenue.toFixed(2)),1),s("div",de,"Comisi\xF3n: $"+i(n.commission.toFixed(2)),1),s("div",ue,"Neto: $"+i(n.net_revenue.toFixed(2)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(u(),y("div",ce," No hay datos de ingresos disponibles "))]),_:1})]),_:1}),e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[7]||(a[7]=s("div",{class:"text-h6 q-mb-md"},"Detalles de Pagos",-1)),s("div",me," Tasa de comisi\xF3n de PadelPlay: "+i(k.value)+"% ",1),a[8]||(a[8]=s("div",{class:"text-caption text-grey"}," La comisi\xF3n se calcula sobre cada inscripci\xF3n de jugador ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=n=>x.value=n),side:"right",overlay:"",behavior:"mobile",class:"bg-dark text-white"},{default:t(()=>[e(q,null,{default:t(()=>[e(Q,{header:""},{default:t(()=>a[10]||(a[10]=[r("Men\xFA")])),_:1}),e(v,{clickable:"",onClick:I},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"home"})]),_:1}),e(l,null,{default:t(()=>a[11]||(a[11]=[r("Dashboard")])),_:1})]),_:1}),e(v,{clickable:"",onClick:F},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"emoji_events"})]),_:1}),e(l,null,{default:t(()=>a[12]||(a[12]=[r("Mis Torneos")])),_:1})]),_:1}),e(v,{clickable:"",onClick:N},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"attach_money"})]),_:1}),e(l,null,{default:t(()=>a[13]||(a[13]=[r("Ingresos")])),_:1})]),_:1}),e(V),e(v,{clickable:"",onClick:T},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"logout"})]),_:1}),e(l,null,{default:t(()=>a[14]||(a[14]=[r("Cerrar Sesi\xF3n")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(K)]),_:1}))}};var Ve=W(ve,[["__scopeId","data-v-73e3fc50"]]);export{Ve as default};
