import{r as d,w as v,q as n,G as c,H as a,v as t,ab as k,ac as x,I as p,K as y,s as P,af as S,ae as w,bE as B,ad as g,x as i,y as I,ah as N,ai as D,J as E,aj as j}from"./index.2a30a2c5.js";import{Q as A,a as _}from"./QItem.78b33975.js";import{Q}from"./QItemLabel.b752b1cc.js";import{Q as L}from"./QList.4427176e.js";import{C as F}from"./ClosePopup.6a051228.js";import{s as J}from"./players.bc689df3.js";const T=["src"],R={__name:"PlayerSearch",props:{modelValue:Boolean},emits:["update:modelValue","playerSelected"],setup(V,{emit:h}){const m=V,f=h,s=d(m.modelValue),r=d(""),u=d([]);v(()=>m.modelValue,e=>{s.value=e}),v(s,e=>{f("update:modelValue",e),e||(r.value="",u.value=[])});const b=async()=>{if(r.value.trim()===""){u.value=[];return}try{const e=await J(r.value);console.log("Search results from database:",e),u.value=e}catch(e){console.error("Error al buscar jugadores:",e)}},C=e=>{console.log("Player selected in PlayerSearch:",e),console.log("Player email:",e==null?void 0:e.email),f("playerSelected",e),s.value=!1};return(e,o)=>(n(),c(j,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value=l)},{default:a(()=>[t(k,{style:{"min-width":"300px"},class:"bg-black"},{default:a(()=>[t(x,null,{default:a(()=>[o[2]||(o[2]=p("div",{class:"text-h6"},"Buscar Jugador",-1)),t(y,{modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=l=>r.value=l),b],label:"Nombre, Apellido, Email o Tel\xE9fono",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),u.value.length>0?(n(),c(L,{key:0,bordered:"",separator:""},{default:a(()=>[(n(!0),P(S,null,w(u.value,l=>(n(),c(A,{key:l.id,clickable:"",onClick:U=>C(l)},{default:a(()=>[t(_,{avatar:""},{default:a(()=>[t(B,{size:"48px"},{default:a(()=>[p("img",{src:l.photo_url,alt:"Foto del jugador",style:{"border-radius":"50%"}},null,8,T)]),_:2},1024)]),_:2},1024),t(_,null,{default:a(()=>[t(Q,null,{default:a(()=>[g(i(l.first_name)+" "+i(l.last_name),1)]),_:2},1024),t(Q,{caption:""},{default:a(()=>[g(i(l.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):I("",!0),t(N,{align:"right"},{default:a(()=>[D(t(E,{flat:"",label:"Cancelar",color:"negative"},null,512),[[F]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{R as _};
