import{s as v,a6 as q,o as u,z as b,A as r,d as t,B as n,a9 as c,D as g,aT as h,a7 as p,a8 as i,E as m,aS as V,a as x,aa as U,ab as w,t as T}from"./index.39adb644.js";import{Q}from"./QHeader.3330d6d5.js";import{Q as f}from"./QSelect.abc13108.js";import{Q as k}from"./QForm.377a5441.js";import{Q as S}from"./QPage.28b7989a.js";import{Q as z,a as D}from"./QLayout.136fc703.js";import{n as M}from"./navigationUtils.2c4b9dee.js";import{C as A}from"./ClubNavigationMenu.0f9de636.js";import{a as F}from"./api.65c10df7.js";import{s as N}from"./supabase.6e6ca5a2.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.4e1820bf.js";import"./QItem.87198ca3.js";import"./QItemLabel.24f30c08.js";import"./QMenu.5f547e53.js";import"./position-engine.8dba34ce.js";import"./selection.365c2d2e.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./QTabs.de2e2033.js";import"./QFooter.c2826d80.js";const E={name:"CreateTournament",data(){return{form:{name:"",start_date:"",start_time:"",end_date:"",end_time:"",category:"",gender:"",system:"",min_pairs:null,max_pairs:null,price_per_pair:null,prize:"",courts_used:[],details:""},categories:["primera","segunda","tercera","cuarta","quinta","libre","otro","open"],genders:["mixto","varonil","femenil"],systems:["combinado","eliminacion directa","liga","round-robin","retas"],courts:[],selectAllCourts:!1}},async mounted(){const a=await v.getItem("token");if(a){const l=a.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=JSON.parse(atob(l));this.clubId=s.club_id||null}const{data:e,error:d}=await N.from("courts").select("id, name").eq("club_id",this.clubId);d||(this.courts=e)},components:{ClubNavigationMenu:A},methods:{toggleSelectAll(a){this.form.courts_used=a?this.courts.map(e=>e.id):[]},async createTournament(){try{const a={...this.form,category:typeof this.form.category=="object"?this.form.category.value:this.form.category,gender:typeof this.form.gender=="object"?this.form.gender.value:this.form.gender,system:typeof this.form.system=="object"?this.form.system.value:this.form.system,club_id:this.clubId},e=await F.post("/tournaments/",a);if(e.status===200)this.$q.notify({type:"positive",message:"Torneo creado exitosamente"}),this.$router.push("/dashboard/club");else throw new Error(e.data.detail||"Error al crear el torneo")}catch(a){this.$q.notify({type:"negative",message:`Error: ${a.message}`})}},goBack(){this.$router.back()},goToDashboard(){M(this.$router,this.userStore)}},computed:{potentialEarnings(){const{price_per_pair:a,max_pairs:e,prize:d}=this.form;return a&&e?a*e-parseFloat(d||0):0},categoriesCapitalized(){return this.categories.map(a=>({label:a.charAt(0).toUpperCase()+a.slice(1),value:a}))},gendersCapitalized(){return this.genders.map(a=>({label:a.charAt(0).toUpperCase()+a.slice(1),value:a}))},systemsCapitalized(){return this.systems.map(a=>({label:a.charAt(0).toUpperCase()+a.slice(1),value:a}))}}},I={class:"header-content"},P={class:"greeting"},j={class:"header-icons"},H={class:"q-mb-sm"},L={class:"q-pa-sm text-white"};function G(a,e,d,y,l,s){const _=q("ClubNavigationMenu");return u(),b(z,{view:"hHh lpR fFf",class:"body text-white"},{default:r(()=>[t(Q,{elevated:"",class:"bg-primary text-white"},{default:r(()=>[n("div",I,[n("div",P,[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:e[0]||(e[0]=(...o)=>s.goToDashboard&&s.goToDashboard(...o))}),e[16]||(e[16]=c(" Crear Torneo ",-1))]),n("div",j,[t(g,{flat:"",round:"",icon:"arrow_back",onClick:s.goBack},null,8,["onClick"])])])]),_:1}),t(D,null,{default:r(()=>[t(S,{class:"q-pa-md"},{default:r(()=>[t(k,{onSubmit:h(s.createTournament,["prevent"])},{default:r(()=>[t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:r(()=>[t(i,null,{default:r(()=>[...e[17]||(e[17]=[n("h3",null,"Detalles del Torneo",-1)])]),_:1}),t(i,null,{default:r(()=>[t(m,{modelValue:l.form.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.form.name=o),label:"Nombre del Torneo",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.start_date,"onUpdate:modelValue":e[2]||(e[2]=o=>l.form.start_date=o),label:"Fecha de Inicio",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.start_time,"onUpdate:modelValue":e[3]||(e[3]=o=>l.form.start_time=o),label:"Hora de Inicio",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.end_date,"onUpdate:modelValue":e[4]||(e[4]=o=>l.form.end_date=o),label:"Fecha de Fin",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.end_time,"onUpdate:modelValue":e[5]||(e[5]=o=>l.form.end_time=o),label:"Hora de Fin",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(f,{modelValue:l.form.category,"onUpdate:modelValue":e[6]||(e[6]=o=>l.form.category=o),options:s.categoriesCapitalized,label:"Categor\xEDa",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.gender,"onUpdate:modelValue":e[7]||(e[7]=o=>l.form.gender=o),options:s.gendersCapitalized,label:"G\xE9nero",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.system,"onUpdate:modelValue":e[8]||(e[8]=o=>l.form.system=o),options:s.systemsCapitalized,label:"Sistema de Competencia",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(m,{modelValue:l.form.details,"onUpdate:modelValue":e[9]||(e[9]=o=>l.form.details=o),label:"Detalles del Torneo",type:"textarea",outlined:"",dense:"",rows:"3",class:"q-mb-md",hint:"Especificaciones adicionales que se mostrar\xE1n a los jugadores"},null,8,["modelValue"]),t(m,{modelValue:l.form.min_pairs,"onUpdate:modelValue":e[10]||(e[10]=o=>l.form.min_pairs=o),modelModifiers:{number:!0},label:"M\xEDnimo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.max_pairs,"onUpdate:modelValue":e[11]||(e[11]=o=>l.form.max_pairs=o),modelModifiers:{number:!0},label:"M\xE1ximo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:r(()=>[t(i,null,{default:r(()=>[e[18]||(e[18]=n("h3",null,"Canchas",-1)),n("div",H,[t(V,{modelValue:l.selectAllCourts,"onUpdate:modelValue":[e[12]||(e[12]=o=>l.selectAllCourts=o),s.toggleSelectAll],label:"Seleccionar todas las canchas"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),t(i,null,{default:r(()=>[(u(!0),x(w,null,U(l.courts,o=>(u(),b(V,{key:o.id,modelValue:l.form.courts_used,"onUpdate:modelValue":e[13]||(e[13]=C=>l.form.courts_used=C),label:o.name,val:o.id,outlined:"",dense:"",class:"q-mb-sm"},null,8,["modelValue","label","val"]))),128))]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:r(()=>[t(i,null,{default:r(()=>[...e[19]||(e[19]=[n("h3",null,"Detalles Financieros",-1)])]),_:1}),t(i,null,{default:r(()=>[t(m,{modelValue:l.form.price_per_pair,"onUpdate:modelValue":e[14]||(e[14]=o=>l.form.price_per_pair=o),modelModifiers:{number:!0},label:"Precio por Pareja",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.prize,"onUpdate:modelValue":e[15]||(e[15]=o=>l.form.prize=o),label:"Premio",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),n("div",L,[n("p",null,[e[20]||(e[20]=n("strong",null,"Ganancias Potenciales:",-1)),c(" "+T(s.potentialEarnings)+" MXN",1)])])]),_:1})]),_:1}),t(g,{type:"submit",label:"Crear Torneo",color:"primary",class:"q-mt-md full-width"})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),t(_)]),_:1})}var pe=B(E,[["render",G],["__scopeId","data-v-37a830a6"]]);export{pe as default};
