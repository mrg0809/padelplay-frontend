import{Q as U}from"./QHeader.1501c452.js";import{Q as A}from"./QInnerLoading.7910723d.js";import{F as q,r as m,w as j,B as z,a8 as N,q as s,G as i,H as o,v as e,I as d,s as f,K as D,ae as H,aM as R,ad as I,ac as S,bC as x,ab as y,x as v,J as L,aU as T}from"./index.71d630fb.js";import{Q as G,a as C}from"./QTabs.00f0efae.js";import{Q as B,a as g}from"./QItem.be3e7c8c.js";import{Q as w}from"./QItemLabel.00b7ff5b.js";import{Q as V}from"./QList.9f9e73f9.js";import{a as J,Q as F}from"./QTabPanel.0c18cda6.js";import{Q as K}from"./QPage.ce9abbf4.js";import{Q as O,a as W}from"./QLayout.c08f0fa0.js";import{u as X}from"./userStore.0094877c.js";import{P as Y}from"./PlayerNavigationMenu.4f189334.js";import{N as Z}from"./NotificationBell.04412d62.js";import{B as $}from"./BannerPromoScrolling.a6ccbb18.js";import{f as ee,a as oe,b as ae,i as le,c as re,u as se}from"./community.9c79b489.js";import{s as te}from"./commun.23a434e4.js";import{_ as ne}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./use-panel.6ad27bb4.js";import"./use-render-cache.770e5fe8.js";import"./selection.040452b6.js";import"./pinia.014ff78d.js";import"./QFooter.a6cd6ca7.js";import"./QBadge.c68240da.js";import"./api.f1a1189d.js";import"./admin.5ab62d8c.js";import"./supabase.60a2aacd.js";const ie=c=>c?`${c.first_name||""} ${c.last_name||""}`.trim()||"Usuario":"",ce=c=>c||"https://cdn.quasar.dev/img/avatar.png";const ue={components:{PlayerNavigationMenu:Y,BannerPromoScrolling:$,NotificationBell:Z},setup(){const c=q(),t=m(""),_=m(!1),l=m("following"),u=X(),h=m([]),k=m([]),P=m([]),p=m(!0),a=async()=>{try{console.log("Loading following for user:",u.userId),h.value=await ee(u.userId)}catch(r){console.error("Error loading following:",r)}},n=async()=>{try{k.value=await oe(u.userId)}catch(r){console.error("Error loading followers:",r)}},Q=async()=>{_.value=!0;try{P.value=await ae(u.userId)}catch(r){console.error("Error loading suggested players:",r)}finally{_.value=!1}},E=async()=>{_.value=!0;try{const r=await te(t.value.trim());l.value==="suggestions"&&(P.value=r)}catch(r){console.error("Error searching players:",r)}finally{_.value=!1}},M=r=>h.value&&le(h.value,r);return j(l,r=>{r==="following"?a():r==="followers"?n():r==="suggestions"&&Q()}),z(()=>{u.userId?(p.value=!1,a(),n(),Q()):(console.error("No user ID found in userStore"),p.value=!1)}),{searchQuery:t,searching:_,selectedTab:l,following:h,followers:k,isLoading:p,suggestedPlayers:P,searchPlayers:E,isFollowing:M,viewPlayerProfile:r=>{c.push(`/player/${r}`)},followPlayer:async r=>{try{await re(u.userId,r),a(),n(),Q()}catch(b){console.error("Error following player:",b)}},unfollowPlayer:async r=>{try{await se(u.userId,r),a(),n(),Q()}catch(b){console.error("Error unfollowing player:",b)}},getPlayerAvatar:ce,formatPlayerName:ie}}},de={class:"header-content"},fe={class:"header-icons"},me={key:0},ge={key:1},_e={class:"search-bar"},ye=["src"],ve={key:1,class:"text-center"},we=["src"],he={key:1,class:"text-center"},Pe=["src"],pe={key:1,class:"text-center"};function ke(c,t,_,l,u,h){const k=N("NotificationBell"),P=N("BannerPromoScrolling"),p=N("PlayerNavigationMenu");return s(),i(O,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:o(()=>[e(U,{elevated:"",class:"text-white"},{default:o(()=>[d("div",de,[t[3]||(t[3]=d("div",{class:"greeting"},[d("img",{src:"/src/assets/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),d("div",fe,[e(k)])]),e(P)]),_:1}),e(W,{class:"home"},{default:o(()=>[e(K,{class:"q-pa-md"},{default:o(()=>[l.isLoading?(s(),f("div",me,[e(A,{showing:!0,size:"xl",color:"primary"})])):(s(),f("div",ge,[d("div",_e,[e(D,{modelValue:l.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>l.searchQuery=a),filled:"",dense:"",placeholder:"Buscar jugador por nombre",onInput:l.searchPlayers,class:"text-dark"},{prepend:o(()=>[e(H,{name:"search",class:"text-primary"})]),_:1},8,["modelValue","onInput"])]),e(G,{modelValue:l.selectedTab,"onUpdate:modelValue":t[1]||(t[1]=a=>l.selectedTab=a),align:"justify",class:"text-white"},{default:o(()=>[e(C,{name:"following",label:"Siguiendo"}),e(C,{name:"followers",label:"Seguidores"}),e(C,{name:"suggestions",label:"Sugerencias"})]),_:1},8,["modelValue"]),e(R,{class:"q-my-md",color:"white"}),e(J,{modelValue:l.selectedTab,"onUpdate:modelValue":t[2]||(t[2]=a=>l.selectedTab=a),animated:""},{default:o(()=>[e(F,{name:"following"},{default:o(()=>[l.following.length>0?(s(),i(V,{key:0},{default:o(()=>[(s(!0),f(I,null,S(l.following,a=>(s(),i(B,{key:a.user_id,clickable:"",onClick:n=>l.viewPlayerProfile(a.user_id)},{default:o(()=>[e(g,{avatar:""},{default:o(()=>[e(x,null,{default:o(()=>[d("img",{src:l.getPlayerAvatar(a.photo_url)},null,8,ye)]),_:2},1024)]),_:2},1024),e(g,null,{default:o(()=>[e(w,null,{default:o(()=>[y(v(l.formatPlayerName(a)),1)]),_:2},1024),e(w,{caption:""},{default:o(()=>[y(v(a.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),f("div",ve,"No est\xE1s siguiendo a nadie."))]),_:1}),e(F,{name:"followers"},{default:o(()=>[l.followers.length>0?(s(),i(V,{key:0},{default:o(()=>[(s(!0),f(I,null,S(l.followers,a=>(s(),i(B,{key:a.user_id,clickable:"",onClick:n=>l.viewPlayerProfile(a.user_id)},{default:o(()=>[e(g,{avatar:""},{default:o(()=>[e(x,null,{default:o(()=>[d("img",{src:l.getPlayerAvatar(a.photo_url)},null,8,we)]),_:2},1024)]),_:2},1024),e(g,null,{default:o(()=>[e(w,null,{default:o(()=>[y(v(l.formatPlayerName(a)),1)]),_:2},1024),e(w,{caption:""},{default:o(()=>[y(v(a.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),f("div",he,"No tienes seguidores."))]),_:1}),e(F,{name:"suggestions"},{default:o(()=>[l.suggestedPlayers.length>0?(s(),i(V,{key:0},{default:o(()=>[(s(!0),f(I,null,S(l.suggestedPlayers,a=>(s(),i(B,{key:a.user_id,clickable:"",onClick:n=>l.viewPlayerProfile(a.user_id)},{default:o(()=>[e(g,{avatar:""},{default:o(()=>[e(x,null,{default:o(()=>[d("img",{src:l.getPlayerAvatar(a.photo_url)},null,8,Pe)]),_:2},1024)]),_:2},1024),e(g,null,{default:o(()=>[e(w,null,{default:o(()=>[y(v(l.formatPlayerName(a)),1)]),_:2},1024),e(w,{caption:""},{default:o(()=>[y(v(a.category),1)]),_:2},1024)]),_:2},1024),e(g,{side:""},{default:o(()=>[l.isFollowing(a.user_id)?(s(),i(L,{key:1,color:"red",label:"Dejar de seguir",size:"sm",onClick:T(n=>l.unfollowPlayer(a.user_id),["stop"])},null,8,["onClick"])):(s(),i(L,{key:0,color:"primary",label:"Seguir",size:"sm",onClick:T(n=>l.followPlayer(a.user_id),["stop"])},null,8,["onClick"]))]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),f("div",pe,"No hay sugerencias."))]),_:1})]),_:1},8,["modelValue"])]))]),_:1})]),_:1}),e(p)]),_:1})}var Ze=ne(ue,[["render",ke]]);export{Ze as default};
