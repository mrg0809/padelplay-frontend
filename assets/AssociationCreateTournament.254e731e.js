import{Q as U}from"./QHeader.289f0645.js";import{x as M,r as y,a0 as x,h as P,a6 as f,o as q,z as Q,A as i,d as l,B as s,aT as T,a7 as _,a8 as m,E as r,aI as A,a as B,ab as w,e as S,D as C}from"./index.687b44e8.js";import{Q as g}from"./QSelect.8af2919e.js";import{Q as N}from"./QForm.c4c1505e.js";import{Q as O}from"./QPage.fcc9aae1.js";import{Q as z,a as D}from"./QLayout.30990248.js";import{u as F}from"./use-quasar.ba375293.js";import{A as R,a as H}from"./AssociationTopMenu.c2c9d0dc.js";import{N as L}from"./NotificationBell.9fdba392.js";import{B as E}from"./BannerPromoScrolling.1700e538.js";import{a as I,e as j}from"./association.b92d73c6.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.c9b5cbc6.js";import"./QItem.eb9291fb.js";import"./QItemLabel.bbebea39.js";import"./QMenu.df8dfc7c.js";import"./position-engine.46674690.js";import"./selection.0f785986.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./QTabs.979bee57.js";import"./QFooter.b7b22f15.js";import"./QList.1288e946.js";import"./QBtnDropdown.17175f2e.js";import"./QBtnGroup.6b9d07ee.js";import"./haptics.57409bd0.js";import"./QBadge.0c3a126f.js";import"./api.1c42dce4.js";const h=["primera","segunda","tercera","cuarta","quinta","libre","otro","open"].map(n=>({label:n.charAt(0).toUpperCase()+n.slice(1),value:n})),J=["mixto","varonil","femenil"].map(n=>({label:n.charAt(0).toUpperCase()+n.slice(1),value:n})),K=["eliminacion directa","round-robin","liga","combinado","retas"].map(n=>({label:n.charAt(0).toUpperCase()+n.slice(1),value:n})),W={name:"AssociationCreateTournament",components:{AssociationNavigationMenu:R,AssociationTopMenu:H,NotificationBell:L,BannerPromoScrolling:E},setup(){const n=F(),a=M(),u=y(!1),o=y([]),t=x({name:"",start_date:"",start_time:"",end_date:"",end_time:"",category:"",gender:"",system:"",min_pairs:2,max_pairs:16,details:"",prize:"",league_id:null,affiliates_only:!1}),d=x({champion:100,finalist:60,semifinal:30,quarterfinal:15}),p=y([]),b=()=>a.push("/dashboard/association"),c=()=>a.push("/association/torneos");return P(async()=>{try{const e=await I();o.value=e.data||[],p.value=o.value}catch(e){console.error(e)}}),{form:t,phasePoints:d,leagueOptions:p,categoriesOptions:h,gendersOptions:J,systemsOptions:K,loading:u,goToDashboard:b,goBack:c,createTournament:async()=>{var e,k;u.value=!0;try{const V={name:t.name,start_date:t.start_date,start_time:t.start_time,end_date:t.end_date||t.start_date,end_time:t.end_time||t.start_time,category:t.category,gender:t.gender,system:t.system,min_pairs:t.min_pairs,max_pairs:t.max_pairs,details:t.details,prize:t.prize,price_per_pair:0,affiliates_only:t.affiliates_only,league_id:t.league_id||void 0,league_phase_points:t.league_id?{champion:d.champion,finalist:d.finalist,semifinal:d.semifinal,quarterfinal:d.quarterfinal}:void 0};await j(V),n.notify({type:"positive",message:"Torneo creado"}),a.push("/association/torneos")}catch(V){n.notify({type:"negative",message:((k=(e=V.response)==null?void 0:e.data)==null?void 0:k.detail)||"Error al crear el torneo"})}finally{u.value=!1}}}}},X={class:"header-content"},Y={class:"greeting"},Z={class:"header-icons"};function $(n,a,u,o,t,d){const p=f("NotificationBell"),b=f("AssociationTopMenu"),c=f("BannerPromoScrolling"),v=f("AssociationNavigationMenu");return q(),Q(z,{view:"hHh lpR fFf",class:"text-white"},{default:i(()=>[l(U,{elevated:"",class:"text-white"},{default:i(()=>[s("div",X,[s("div",Y,[s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:a[0]||(a[0]=(...e)=>o.goToDashboard&&o.goToDashboard(...e))}),a[19]||(a[19]=s("span",{class:"text-subtitle1"},"Crear torneo",-1))]),s("div",Z,[l(p),l(b)])]),l(c)]),_:1}),l(D,null,{default:i(()=>[l(O,{class:"q-pa-md"},{default:i(()=>[l(N,{onSubmit:T(o.createTournament,["prevent"])},{default:i(()=>[l(_,{flat:"",bordered:"",class:"q-mb-lg bg-grey-9 text-white"},{default:i(()=>[l(m,null,{default:i(()=>[...a[20]||(a[20]=[s("div",{class:"text-h6"},"Detalles del torneo",-1)])]),_:1}),l(m,{class:"q-gutter-md"},{default:i(()=>[l(r,{modelValue:o.form.name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.form.name=e),label:"Nombre del torneo",outlined:"",dark:"",dense:"",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"]),l(r,{modelValue:o.form.start_date,"onUpdate:modelValue":a[2]||(a[2]=e=>o.form.start_date=e),label:"Fecha de inicio",type:"date",outlined:"",dark:"",dense:"",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"]),l(r,{modelValue:o.form.start_time,"onUpdate:modelValue":a[3]||(a[3]=e=>o.form.start_time=e),label:"Hora de inicio",type:"time",outlined:"",dark:"",dense:"",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"]),l(r,{modelValue:o.form.end_date,"onUpdate:modelValue":a[4]||(a[4]=e=>o.form.end_date=e),label:"Fecha de fin",type:"date",outlined:"",dark:"",dense:""},null,8,["modelValue"]),l(r,{modelValue:o.form.end_time,"onUpdate:modelValue":a[5]||(a[5]=e=>o.form.end_time=e),label:"Hora de fin",type:"time",outlined:"",dark:"",dense:""},null,8,["modelValue"]),l(g,{modelValue:o.form.category,"onUpdate:modelValue":a[6]||(a[6]=e=>o.form.category=e),options:o.categoriesOptions,label:"Categor\xEDa",outlined:"",dark:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"]),l(g,{modelValue:o.form.gender,"onUpdate:modelValue":a[7]||(a[7]=e=>o.form.gender=e),options:o.gendersOptions,label:"G\xE9nero",outlined:"",dark:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"]),l(g,{modelValue:o.form.system,"onUpdate:modelValue":a[8]||(a[8]=e=>o.form.system=e),options:o.systemsOptions,label:"Sistema de competencia",outlined:"",dark:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"]),l(r,{modelValue:o.form.min_pairs,"onUpdate:modelValue":a[9]||(a[9]=e=>o.form.min_pairs=e),modelModifiers:{number:!0},label:"M\xEDnimo de parejas",type:"number",outlined:"",dark:"",dense:"",min:"2",rules:[e=>e!=null&&e>=2||"M\xEDn. 2"]},null,8,["modelValue","rules"]),l(r,{modelValue:o.form.max_pairs,"onUpdate:modelValue":a[10]||(a[10]=e=>o.form.max_pairs=e),modelModifiers:{number:!0},label:"M\xE1ximo de parejas",type:"number",outlined:"",dark:"",dense:"",min:"2",rules:[e=>e!=null&&e>=2||"M\xEDn. 2"]},null,8,["modelValue","rules"]),l(r,{modelValue:o.form.details,"onUpdate:modelValue":a[11]||(a[11]=e=>o.form.details=e),label:"Detalles",type:"textarea",outlined:"",dark:"",dense:"",rows:"2"},null,8,["modelValue"]),l(r,{modelValue:o.form.prize,"onUpdate:modelValue":a[12]||(a[12]=e=>o.form.prize=e),label:"Premio",outlined:"",dark:"",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),l(_,{flat:"",bordered:"",class:"q-mb-lg bg-grey-9 text-white"},{default:i(()=>[l(m,null,{default:i(()=>[...a[21]||(a[21]=[s("div",{class:"text-h6"},"Restricciones de participaci\xF3n",-1)])]),_:1}),l(m,{class:"q-gutter-md"},{default:i(()=>[l(A,{modelValue:o.form.affiliates_only,"onUpdate:modelValue":a[13]||(a[13]=e=>o.form.affiliates_only=e),label:"Solo para afiliados",color:"primary",dark:""},null,8,["modelValue"]),a[22]||(a[22]=s("p",{class:"text-caption text-grey"}," Si est\xE1 activado, solo los afiliados de la asociaci\xF3n podr\xE1n inscribirse. Si est\xE1 desactivado, cualquier persona puede participar. ",-1))]),_:1})]),_:1}),l(_,{flat:"",bordered:"",class:"q-mb-lg bg-grey-9 text-white"},{default:i(()=>[l(m,null,{default:i(()=>[...a[23]||(a[23]=[s("div",{class:"text-h6"},"Liga (opcional)",-1),s("p",{class:"text-caption text-grey"},"Si el torneo pertenece a una liga, los puntos se sumar\xE1n al ranking.",-1)])]),_:1}),l(m,{class:"q-gutter-md"},{default:i(()=>[l(g,{modelValue:o.form.league_id,"onUpdate:modelValue":a[14]||(a[14]=e=>o.form.league_id=e),options:o.leagueOptions,label:"Pertenece a liga",outlined:"",dark:"",dense:"",clearable:"","emit-value":"","map-options":"","option-value":"id","option-label":"name"},null,8,["modelValue","options"]),o.form.league_id?(q(),B(w,{key:0},[a[24]||(a[24]=s("div",{class:"text-subtitle2 q-mt-md"},"Puntos por fase (para el ranking de la liga)",-1)),l(r,{modelValue:o.phasePoints.champion,"onUpdate:modelValue":a[15]||(a[15]=e=>o.phasePoints.champion=e),modelModifiers:{number:!0},label:"Campe\xF3n",type:"number",outlined:"",dark:"",dense:"",min:"0",class:"q-mb-sm"},null,8,["modelValue"]),l(r,{modelValue:o.phasePoints.finalist,"onUpdate:modelValue":a[16]||(a[16]=e=>o.phasePoints.finalist=e),modelModifiers:{number:!0},label:"Finalista",type:"number",outlined:"",dark:"",dense:"",min:"0",class:"q-mb-sm"},null,8,["modelValue"]),l(r,{modelValue:o.phasePoints.semifinal,"onUpdate:modelValue":a[17]||(a[17]=e=>o.phasePoints.semifinal=e),modelModifiers:{number:!0},label:"Semifinal",type:"number",outlined:"",dark:"",dense:"",min:"0",class:"q-mb-sm"},null,8,["modelValue"]),l(r,{modelValue:o.phasePoints.quarterfinal,"onUpdate:modelValue":a[18]||(a[18]=e=>o.phasePoints.quarterfinal=e),modelModifiers:{number:!0},label:"Cuartos",type:"number",outlined:"",dark:"",dense:"",min:"0"},null,8,["modelValue"])],64)):S("",!0)]),_:1})]),_:1}),l(C,{type:"submit",label:"Crear torneo",color:"primary","text-color":"black",class:"full-width",loading:o.loading},null,8,["loading"]),l(C,{flat:"",label:"Cancelar",class:"full-width q-mt-sm",onClick:o.goBack},null,8,["onClick"])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),l(v)]),_:1})}var Qe=G(W,[["render",$],["__scopeId","data-v-7d83b1e6"]]);export{Qe as default};
