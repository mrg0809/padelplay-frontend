import{q as r,G as c,H as a,v as t,I as n,J as d,a9 as x,aa as Q,s as g,ae as y,ac as w,ad as C,ab as f,x as m,aU as v,y as N}from"./index.cf1ae381.js";import{Q as b}from"./QHeader.22bc8748.js";import{Q as B,a as u}from"./QItem.ff5f9822.js";import{Q as _}from"./QItemLabel.bad9e799.js";import{Q as A}from"./QList.060f9b6d.js";import{Q as I}from"./QPage.3d29d4c0.js";import{Q as L,a as S}from"./QLayout.3b12d370.js";import{a as h}from"./api.f1a1189d.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";const D={data(){return{notifications:[]}},async mounted(){await this.fetchNotifications()},methods:{async fetchNotifications(){try{const e=(await h.get("/notifications/")).data;e&&Array.isArray(e.data)&&e.data.length>0?this.notifications=e.data:this.notifications=[]}catch(s){console.error("Error fetching notifications:",s),this.notifications=[]}},async markAsRead(s,e){try{await h.put(`/notifications/${s}/read`),e?this.$router.push(e):this.fetchNotifications()}catch(p){console.error("Error marking notification as read:",p)}},async deleteNotification(s){try{await h.delete(`/notifications/${s}`),this.fetchNotifications()}catch(e){console.error("Error deleting notification:",e)}},formatDate(s){if(!s)return"Fecha desconocida";const e={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(s).toLocaleDateString("es-MX",e)},goBack(){this.$router.back()}}},R={class:"header-content"},z={class:"header-icons"},E={key:0,class:"text-center q-my-md"};function V(s,e,p,$,k,i){return r(),c(L,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:a(()=>[t(b,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[n("div",R,[e[0]||(e[0]=n("div",{class:"greeting"},[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),n("div",z,[t(d,{flat:"",round:"",icon:"close",onClick:i.goBack},null,8,["onClick"])])])]),_:1}),t(S,null,{default:a(()=>[t(I,{class:"q-pa-md"},{default:a(()=>[t(x,{flat:"",bordered:"",class:"text-black"},{default:a(()=>[t(Q,null,{default:a(()=>e[1]||(e[1]=[n("div",{class:"text-h6 text-center"},"Notificaciones",-1)])),_:1}),k.notifications.length===0?(r(),g("div",E,[t(y,{name:"o_notifications_off",size:"64px",color:"black"}),e[2]||(e[2]=n("p",null,"No tienes notificaciones pendientes.",-1))])):(r(),c(A,{key:1},{default:a(()=>[(r(!0),g(C,null,w(k.notifications,o=>(r(),c(B,{key:o.id,clickable:"",class:"notification-item"},{default:a(()=>[t(u,{avatar:"",onClick:l=>i.markAsRead(o.id,o.route)},{default:a(()=>[t(y,{name:"o_notifications",size:"36px",color:"white"})]),_:2},1032,["onClick"]),t(u,{onClick:l=>i.markAsRead(o.id,o.route)},{default:a(()=>[t(_,{class:"text-bold"},{default:a(()=>[f(m(o.title),1)]),_:2},1024),t(_,{caption:""},{default:a(()=>[f(m(o.message),1)]),_:2},1024),t(_,{caption:"",class:"text-grey text-sm"},{default:a(()=>[f(m(i.formatDate(o.created_at)),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(u,{side:""},{default:a(()=>[o.is_read?N("",!0):(r(),c(d,{key:0,flat:"",round:"",icon:"done",color:"white",size:"sm",class:"q-mr-sm",onClick:v(l=>i.markAsRead(o.id,o.route),["stop"])},null,8,["onClick"])),t(d,{flat:"",round:"",icon:"close",color:"white",size:"sm",class:"q-mr-sm",onClick:v(l=>i.deleteNotification(o.id),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}var j=q(D,[["render",V],["__scopeId","data-v-277253d2"]]);export{j as default};
