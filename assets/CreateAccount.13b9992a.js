import{Q as E}from"./QHeader.8ed599dc.js";import{a5 as L,x as R,y as I,f as b,r as _,a6 as f,o as s,z as d,A as l,d as t,B as r,a as g,ab as U,aa as F,a7 as T,a8 as x,D as C,t as k,E as M,a9 as N,e as Q,ac as z}from"./index.44d6004f.js";import{Q as D}from"./QForm.29e7d3c5.js";import{Q as V}from"./QBanner.fa548e9b.js";import{Q as H}from"./QPage.069cc100.js";import{Q as O,a as W}from"./QLayout.bdadfe99.js";import{B as Y,c as j}from"./BannerPromoScrolling.0ad337b6.js";import{A as G}from"./AdminNavigationMenu.1c866cd8.js";import{S as J}from"./SuperuserNavigationMenu.6c1f81b5.js";import{A as K}from"./AdminTopMenu.92c066f4.js";import{S as X}from"./SuperuserTopMenu.8780f74d.js";import{N as Z}from"./NotificationBell.03dce8ef.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";import"./api.dcb17b1f.js";import"./QTabs.02ad9b81.js";import"./rtl.276c3f1b.js";import"./QFooter.dec25843.js";import"./QItem.cafd0d6f.js";import"./QList.8f6ea51c.js";import"./QBtnDropdown.9d90b70a.js";import"./QBtnGroup.0f4e86aa.js";import"./QMenu.aa52843c.js";import"./position-engine.d7eef48c.js";import"./selection.ab0d7921.js";import"./haptics.bd260566.js";import"./QBadge.182a08f3.js";const h=[{value:"club",label:"Club",icon:"o_business"},{value:"association",label:"Asociaci\xF3n",icon:"o_groups"},{value:"padelite",label:"Padelite",icon:"o_sports_tennis"},{value:"admin",label:"Admin",icon:"o_admin_panel_settings"}],ee={name:"CreateAccount",components:{AdminNavigationMenu:G,SuperuserNavigationMenu:J,AdminTopMenu:K,SuperuserTopMenu:X,NotificationBell:Z,BannerPromoScrolling:Y},setup(){const S=L(),o=R(),q=I(),a=b(()=>q.userType==="superuser"),A=b(()=>S.path.startsWith("/admin")),B=b(()=>{const n=h.filter(c=>c.value!=="admin");return a.value&&n.push(h.find(c=>c.value==="admin")),n}),y=b(()=>S.path.startsWith("/superuser")?"/superuser":"/admin"),i=_(null),u=_({full_name:"",email:"",password:""}),v=_(!1),m=_(""),p=_(""),e=b(()=>{const n=h.find(c=>c.value===i.value);return n?n.label:""});return{accountTypeOptions:B,selectedType:i,form:u,loading:v,successMessage:m,errorMessage:p,typeLabel:e,isAdminPath:A,selectType:n=>{i.value=n,m.value="",p.value=""},goBack:()=>{o.push(y.value==="/superuser"?"/dashboard/superuser":"/dashboard/admin")},goToCreateClub:()=>{o.push(`${y.value}/create-club`)},onSubmit:async()=>{var n,c;if(!(!i.value||i.value==="club")){v.value=!0,m.value="",p.value="";try{await j({full_name:u.value.full_name,email:u.value.email,password:u.value.password,user_type:i.value}),m.value=`Cuenta ${e.value} creada. El usuario puede iniciar sesi\xF3n con ${u.value.email}.`,u.value={full_name:"",email:"",password:""},i.value=null}catch(w){p.value=((c=(n=w.response)==null?void 0:n.data)==null?void 0:c.detail)||w.message||"Error al crear la cuenta"}finally{v.value=!1}}}}}},ae={class:"header-content"},oe={class:"greeting"},te={class:"header-icons"},le={key:0,class:"q-mb-lg"},se={class:"row q-col-gutter-md"},re={class:"text-subtitle2"},ne={key:1,class:"q-mb-lg"},ie={key:2},ue={class:"text-subtitle1 q-mb-md"},ce={class:"row q-gutter-sm q-mt-md"};function de(S,o,q,a,A,B){const y=f("NotificationBell"),i=f("AdminTopMenu"),u=f("SuperuserTopMenu"),v=f("BannerPromoScrolling"),m=f("AdminNavigationMenu"),p=f("SuperuserNavigationMenu");return s(),d(O,{view:"hHh lpR fFf",class:"bg-dark text-white layout-with-bottom-nav"},{default:l(()=>[t(E,{elevated:"",class:"text-white admin-header"},{default:l(()=>[r("div",ae,[r("div",oe,[r("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:o[0]||(o[0]=(...e)=>a.goBack&&a.goBack(...e))}),o[6]||(o[6]=r("span",{class:"text-subtitle1"},"Crear cuenta",-1))]),r("div",te,[t(y),a.isAdminPath?(s(),d(i,{key:0})):(s(),d(u,{key:1}))])]),t(v)]),_:1}),t(W,null,{default:l(()=>[t(H,{class:"q-pa-md"},{default:l(()=>[a.selectedType?a.selectedType==="club"?(s(),g("div",ne,[t(T,{flat:"",bordered:"",class:"bg-grey-9"},{default:l(()=>[t(x,null,{default:l(()=>[o[8]||(o[8]=r("div",{class:"text-subtitle1 q-mb-md"},"Crear usuario Club",-1)),o[9]||(o[9]=r("p",{class:"text-caption text-grey"}," El formulario de club incluye datos del establecimiento (nombre, direcci\xF3n, tel\xE9fono). ",-1)),t(C,{color:"primary",icon:"o_business",label:"Ir al formulario de Club",onClick:a.goToCreateClub,class:"q-mt-md"},null,8,["onClick"]),t(C,{flat:"",label:"Elegir otro tipo",class:"q-ml-sm",onClick:o[1]||(o[1]=e=>a.selectedType=null)})]),_:1})]),_:1})])):(s(),g("div",ie,[t(T,{flat:"",bordered:"",class:"bg-grey-9 create-account-card"},{default:l(()=>[t(x,null,{default:l(()=>[r("div",ue," Nueva cuenta: "+k(a.typeLabel),1),t(D,{onSubmit:a.onSubmit,class:"q-gutter-md"},{default:l(()=>[t(M,{modelValue:a.form.full_name,"onUpdate:modelValue":o[2]||(o[2]=e=>a.form.full_name=e),label:"Nombre completo",outlined:"",dark:"",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"]),t(M,{modelValue:a.form.email,"onUpdate:modelValue":o[3]||(o[3]=e=>a.form.email=e),type:"email",label:"Email",outlined:"",dark:"",rules:[e=>!!e||"Requerido",e=>/.+@.+\..+/.test(e)||"Email inv\xE1lido"]},null,8,["modelValue","rules"]),t(M,{modelValue:a.form.password,"onUpdate:modelValue":o[4]||(o[4]=e=>a.form.password=e),type:"password",label:"Contrase\xF1a",outlined:"",dark:"",rules:[e=>!!e||"Requerido",e=>e&&e.length>=6||"M\xEDnimo 6 caracteres"]},null,8,["modelValue","rules"]),r("div",ce,[t(C,{type:"submit",color:"primary",loading:a.loading,icon:"person_add",label:"Crear cuenta "+a.typeLabel},null,8,["loading","label"]),t(C,{flat:"",label:"Cancelar",onClick:o[5]||(o[5]=e=>a.selectedType=null)})])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),a.successMessage?(s(),d(V,{key:0,class:"bg-positive text-white q-mt-md"},{default:l(()=>[N(k(a.successMessage),1)]),_:1})):Q("",!0),a.errorMessage?(s(),d(V,{key:1,class:"bg-negative text-white q-mt-md"},{default:l(()=>[N(k(a.errorMessage),1)]),_:1})):Q("",!0)])):(s(),g("div",le,[o[7]||(o[7]=r("div",{class:"text-h6 q-mb-md"},"Selecciona el tipo de cuenta",-1)),r("div",se,[(s(!0),g(U,null,F(a.accountTypeOptions,e=>(s(),g("div",{key:e.value,class:"col-6 col-md-4"},[t(T,{flat:"",bordered:"",class:"bg-grey-9 cursor-pointer card-type",onClick:P=>a.selectType(e.value)},{default:l(()=>[t(x,{class:"text-center"},{default:l(()=>[t(z,{name:e.icon,size:"40px",class:"q-mb-sm"},null,8,["name"]),r("div",re,k(e.label),1)]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]))]),_:1})]),_:1}),a.isAdminPath?(s(),d(m,{key:0})):(s(),d(p,{key:1}))]),_:1})}var ze=$(ee,[["render",de],["__scopeId","data-v-e0260414"]]);export{ze as default};
