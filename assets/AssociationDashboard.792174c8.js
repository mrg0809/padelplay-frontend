import{F as P,r as u,B as U,q as d,G as p,H as e,v as a,I as r,ad as _,J as y,ab as f,ac as i,x as c,s as C,y as F,ah as V,ag as D,Q as M,ae as R,af as $,aj as H,K as k,ai as j}from"./index.9df047e9.js";import{Q as G}from"./QHeader.59f6ab7c.js";import{Q as O}from"./QItemLabel.4373daf4.js";import{Q as J,a as T}from"./QItem.c028cd76.js";import{Q as K}from"./QChip.201c3a2b.js";import{Q as X}from"./QList.07f095c7.js";import{Q as W}from"./QPage.3f03e3b3.js";import{Q as Y,a as Z}from"./QLayout.7b0d0242.js";import{C as aa}from"./ClosePopup.c545d544.js";import{u as ea}from"./use-quasar.d3983b74.js";import{a as h}from"./api.2af71db3.js";import{_ as ta}from"./plugin-vue_export-helper.21dcd24c.js";const oa={class:"header-content"},sa={class:"header-icons"},ra={class:"text-h5"},la={key:0,class:"text-caption"},na={class:"row q-col-gutter-md q-mb-md"},ia={class:"col-12 col-md-6"},da={class:"col-12 col-md-6"},ua={class:"text-h6"},ca={__name:"AssociationDashboard",setup(ma){const v=P(),m=ea(),l=u(null),x=u([]),b=u(!1),g=u(!1),w=u(!1),n=u({name:"",description:"",logo_url:""});U(async()=>{await z(),await q()});const z=async()=>{try{const{data:s}=await h.get("/associations/association/organization");l.value=s.data,l.value&&(n.value={name:l.value.name,description:l.value.description||"",logo_url:l.value.logo_url||""})}catch(s){console.error("Error fetching organization:",s)}},q=async()=>{b.value=!0;try{const{data:s}=await h.get("/padelite/association/tournaments");x.value=s.data||[]}catch(s){console.error("Error fetching tournaments:",s),m.notify({type:"negative",message:"Error al cargar torneos"})}finally{b.value=!1}},E=async()=>{var s,t;w.value=!0;try{l.value?(await h.put("/associations/association/organization",n.value),m.notify({type:"positive",message:"Organizaci\xF3n actualizada exitosamente"})):(await h.post("/associations/association/organization",n.value),m.notify({type:"positive",message:"Organizaci\xF3n creada exitosamente"})),g.value=!1,await z()}catch(o){console.error("Error saving organization:",o),m.notify({type:"negative",message:((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.detail)||"Error al guardar organizaci\xF3n"})}finally{w.value=!1}},I=()=>{if(!l.value){m.notify({type:"warning",message:"Por favor, crea tu organizaci\xF3n primero"}),g.value=!0;return}v.push("/association/tournaments/create")},L=()=>{v.push("/association/tournaments")},B=s=>{v.push(`/association/tournaments/${s}`)},N=()=>{localStorage.removeItem("token"),v.push("/")},S=s=>s?new Date(s).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}):"",A=s=>{switch(s){case"open":return"positive";case"closed":return"negative";case"in_progress":return"warning";default:return"grey"}};return(s,t)=>(d(),p(Y,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:e(()=>[a(G,{elevated:"",class:"bg-primary text-white"},{default:e(()=>[r("div",oa,[t[5]||(t[5]=r("div",{class:"greeting"},[r("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),_(" Dashboard Asociaci\xF3n ")],-1)),r("div",sa,[a(y,{flat:"",round:"",icon:"logout",onClick:N})])])]),_:1}),a(Z,null,{default:e(()=>[a(W,{class:"q-pa-md"},{default:e(()=>[a(f,{flat:"",bordered:"",class:"q-mb-md bg-transparent text-white"},{default:e(()=>[a(i,null,{default:e(()=>{var o,Q;return[r("div",ra,c(((o=l.value)==null?void 0:o.name)||"Mi Organizaci\xF3n"),1),(Q=l.value)!=null&&Q.description?(d(),C("div",la,c(l.value.description),1)):F("",!0)]}),_:1}),a(V,null,{default:e(()=>[a(y,{flat:"",color:"primary",label:"Editar Organizaci\xF3n",onClick:t[0]||(t[0]=o=>g.value=!0)})]),_:1})]),_:1}),r("div",na,[r("div",ia,[a(f,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:I},{default:e(()=>[a(i,{class:"text-center"},{default:e(()=>[a(D,{name:"add_circle",size:"48px",color:"primary"}),t[6]||(t[6]=r("div",{class:"text-h6 q-mt-md"},"Crear Torneo Padelite",-1))]),_:1})]),_:1})]),r("div",da,[a(f,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:L},{default:e(()=>[a(i,{class:"text-center"},{default:e(()=>[a(D,{name:"emoji_events",size:"48px",color:"primary"}),t[7]||(t[7]=r("div",{class:"text-h6 q-mt-md"},"Mis Torneos",-1))]),_:1})]),_:1})])]),a(f,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:e(()=>[a(i,null,{default:e(()=>t[8]||(t[8]=[r("div",{class:"text-h6"},"Torneos Recientes",-1)])),_:1}),b.value?(d(),p(i,{key:0},{default:e(()=>[a(M,{color:"primary",size:"50px"})]),_:1})):x.value.length>0?(d(),p(X,{key:1,separator:""},{default:e(()=>[(d(!0),C($,null,R(x.value,o=>(d(),p(J,{key:o.id,clickable:"",onClick:Q=>B(o.id)},{default:e(()=>[a(T,null,{default:e(()=>[a(O,null,{default:e(()=>[_(c(o.name),1)]),_:2},1024),a(O,{caption:""},{default:e(()=>[_(c(S(o.start_date)),1)]),_:2},1024)]),_:2},1024),a(T,{side:""},{default:e(()=>[a(K,{color:A(o.status),"text-color":"white"},{default:e(()=>[_(c(o.status),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(d(),p(i,{key:2},{default:e(()=>t[9]||(t[9]=[r("div",{class:"text-center text-grey"}," No hay torneos recientes ",-1)])),_:1}))]),_:1}),a(H,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=o=>g.value=o)},{default:e(()=>[a(f,{style:{"min-width":"400px"},class:"bg-dark text-white"},{default:e(()=>[a(i,null,{default:e(()=>[r("div",ua,c(l.value?"Editar Organizaci\xF3n":"Crear Organizaci\xF3n"),1)]),_:1}),a(i,null,{default:e(()=>[a(k,{modelValue:n.value.name,"onUpdate:modelValue":t[1]||(t[1]=o=>n.value.name=o),label:"Nombre de la Organizaci\xF3n",outlined:"",dense:"",dark:"",class:"q-mb-md"},null,8,["modelValue"]),a(k,{modelValue:n.value.description,"onUpdate:modelValue":t[2]||(t[2]=o=>n.value.description=o),label:"Descripci\xF3n",type:"textarea",outlined:"",dense:"",dark:"",rows:"3",class:"q-mb-md"},null,8,["modelValue"]),a(k,{modelValue:n.value.logo_url,"onUpdate:modelValue":t[3]||(t[3]=o=>n.value.logo_url=o),label:"URL del Logo",outlined:"",dense:"",dark:""},null,8,["modelValue"])]),_:1}),a(V,{align:"right"},{default:e(()=>[j(a(y,{flat:"",label:"Cancelar",color:"grey"},null,512),[[aa]]),a(y,{flat:"",label:"Guardar",color:"primary",onClick:E,loading:w.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};var za=ta(ca,[["__scopeId","data-v-6e2e24ee"]]);export{za as default};
