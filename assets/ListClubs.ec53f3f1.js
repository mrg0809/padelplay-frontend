import{Q as w}from"./QHeader.fafcae42.js";import{r as f,F as D,a9 as x,y as L,w as P,aa as d,k as l,G as p,H as t,p as e,I as c,K as q,ag as I,l as g,ae as F,af as V,ad as _,q as b,s as E}from"./index.63dc7e23.js";import{Q as S,a as C}from"./QItem.0839bf79.js";import{Q as h}from"./QItemLabel.8574eb87.js";import{Q as T}from"./QList.e359b89a.js";import{Q as M}from"./QPage.2aaa1d93.js";import{Q as H,a as R}from"./QLayout.554612a4.js";import{u as U}from"./use-quasar.a32cc7fc.js";import{g as B}from"./locationUtils.b518cd7a.js";import{n as G}from"./navigationUtils.2c4b9dee.js";import{s as v,a as j}from"./clubs.84c95a3d.js";import{P as A}from"./PlayerNavigationMenu.f00bb1db.js";import{N as K}from"./NotificationBell.7dc8c9be.js";import{B as z}from"./BannerPromoScrolling.c3a2856e.js";import{D as J}from"./DesktopNavigation.6e047a14.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.c98ef0da.js";import"./supabase.87115abf.js";import"./QTabs.6a3d63d5.js";import"./rtl.276c3f1b.js";import"./QFooter.9d6e02eb.js";import"./QBadge.4d5b740f.js";import"./api.e96a150b.js";import"./pinia.53eba05e.js";import"./admin.48eb7fea.js";import"./QTooltip.3d9e405e.js";import"./position-engine.fc47911a.js";import"./selection.f8391a45.js";const W={components:{PlayerNavigationMenu:A,BannerPromoScrolling:z,NotificationBell:K,DesktopNavigation:J},setup(){const r=f([]),n=D(),y=x(),a=f(""),i=f(!1),m=U();return L(async()=>{i.value=!0;try{console.log("Attempting to get user location...");const s=await B();console.log("User location obtained:",s),r.value=await v("",s),console.log("Nearby clubs found:",r.value)}catch(s){console.error("Geolocation error:",s.message),m.notify({type:"warning",message:"No se pudo obtener tu ubicaci\xF3n. Mostrando clubes generales.",icon:"location_off"});try{console.log("Fetching first 10 clubs as fallback..."),r.value=await j(10),console.log("Fallback clubs found:",r.value)}catch(o){console.error("Error fetching first clubs:",o),m.notify({type:"negative",message:"No se pudieron cargar los clubes."}),r.value=[]}}finally{i.value=!1}}),P(a,async s=>{i.value=!0;let o=null;try{o=await B()}catch(u){console.warn("Could not get location for search query:",s,u.message),m.notify({type:"info",message:"Buscando sin ubicaci\xF3n precisa."})}try{r.value=await v(s,o)}catch(u){console.error("Error al buscar clubes:",u.message),m.notify({type:"negative",message:"Error durante la b\xFAsqueda."}),r.value=[]}finally{i.value=!1}}),{clubs:r,searchClubs:v,searchQuery:a,searching:i,viewClubDetails:s=>{const u=y.query.from==="lessons"?"publiclessons":"reservations";n.push({path:`/club/${s}`,query:{tab:u}})},goBack:()=>{n.back()},goToDashboard:()=>{G(n,userStore)}}}},X={class:"header-content"},Y={class:"greeting"},Z={class:"header-icons"},$={class:"search-bar"},oo={class:"clubs-list"},eo=["src"],ao={key:1,class:"text-center"},to={key:2,class:"text-center"};function so(r,n,y,a,i,m){const k=d("NotificationBell"),N=d("BannerPromoScrolling"),Q=d("PlayerNavigationMenu"),s=d("DesktopNavigation");return l(),p(H,{view:"hHh lpR fFf",class:"text-white"},{default:t(()=>[e(w,{elevated:"",class:"text-white"},{default:t(()=>[c("div",X,[c("div",Y,[c("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:n[0]||(n[0]=(...o)=>a.goToDashboard&&a.goToDashboard(...o))})]),c("div",Z,[e(k)])]),e(N)]),_:1}),e(R,null,{default:t(()=>[e(M,{class:"q-pa-md"},{default:t(()=>[c("div",$,[e(q,{modelValue:a.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=o=>a.searchQuery=o),filled:"",dense:"",placeholder:"Buscar por nombre o ubicaci\xF3n",onInput:a.searchClubs,class:"text-dark"},{prepend:t(()=>[e(I,{name:"search",class:"text-primary",color:"black"})]),_:1},8,["modelValue","onInput"])]),c("div",oo,[a.clubs.length>0?(l(),p(T,{key:0,class:"q-mt-md"},{default:t(()=>[(l(!0),g(V,null,F(a.clubs,o=>(l(),p(S,{key:o.id,clickable:"",onClick:u=>a.viewClubDetails(o.id),class:"club-card"},{default:t(()=>[e(C,{avatar:""},{default:t(()=>[c("img",{src:o.logo_url||"/logo.jpeg",alt:"Club Logo",class:"club-logo"},null,8,eo)]),_:2},1024),e(C,null,{default:t(()=>[e(h,{class:"club-name"},{default:t(()=>[_(b(o.name),1)]),_:2},1024),e(h,{caption:""},{default:t(()=>[_(b(o.address),1)]),_:2},1024),o.distance?(l(),p(h,{key:0,caption:""},{default:t(()=>[_(" Distancia: "+b((o.distance/1e3).toFixed(2))+" km ",1)]),_:2},1024)):E("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):a.searching?(l(),g("div",ao,"Buscando...")):(l(),g("div",to,"No se encontraron clubes."))])]),_:1})]),_:1}),e(Q),e(s)]),_:1})}var Vo=O(W,[["render",so]]);export{Vo as default};
