import{Q as N}from"./QHeader.8e557618.js";import{bA as k,F as B,r as f,B as M,a8 as h,q as c,G as T,H as y,v as r,I as t,ab as b,x as p,s as _,ac as E,ad as x,ae as w}from"./index.584acf07.js";import{Q as I,a as L}from"./QLayout.b710bb90.js";import{u as j}from"./use-quasar.c44f5730.js";import{N as C}from"./NotificationBell.a467fcae.js";import{P as D}from"./PlayerNavigationMenu.f62eec82.js";import{P as S}from"./PlayerTopMenu.c48d9a03.js";import{B as Q}from"./BannerPromoScrolling.2492a512.js";import{u as F}from"./userStore.e4b54bb6.js";import{a as R}from"./api.2af71db3.js";import{f as W}from"./dateUtils.d59637e9.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBadge.2e8f5c62.js";import"./QTabs.6a6666b4.js";import"./rtl.276c3f1b.js";import"./QFooter.c5b1de81.js";import"./QItem.b12511a1.js";import"./QList.c5a8907d.js";import"./QBtnDropdown.56b29c58.js";import"./QMenu.f258a5f1.js";import"./position-engine.c3e1b9af.js";import"./selection.216c03ca.js";import"./admin.c99b9bfe.js";import"./pinia.1c5897a4.js";async function H(a,o,i=500,n={}){var d;if(!a||typeof((d=a.loading)==null?void 0:d.show)!="function"){console.error("runTaskWithMinLoading: Se requiere el objeto $q con el plugin Loading.");try{return await o()}catch(s){throw k.create({type:"negative",message:"Ocurri\xF3 un error inesperado.",caption:s.message}),s}}if(typeof o!="function"){const s=new Error('runTaskWithMinLoading: el par\xE1metro "task" debe ser una funci\xF3n as\xEDncrona.');return console.error(s),Promise.reject(s)}a.loading.show(n);const m=new Promise(s=>setTimeout(s,i));let u,l;const g=o().then(s=>{u=s}).catch(s=>{l=s,console.error("Error durante la ejecuci\xF3n de la tarea en runTaskWithMinLoading:",s),k.create({type:"negative",message:"Fall\xF3 la operaci\xF3n.",caption:(s==null?void 0:s.message)||"Error desconocido"})});try{await Promise.all([g,m])}finally{a.loading.hide()}if(l)throw l;return u}const V=async a=>{try{return(await R.get("/events/player/upcoming_events/")).data}catch(o){return console.error("Error fetching upcoming player events from API:",o),[]}};const z={name:"DashboardPlayer",components:{NotificationBell:C,NavigationMenu:D,PlayerTopMenu:S,BannerPromoScrolling:Q},setup(){const a=j(),o=B(),i=f([]),n=f(null),m=f(!0),u=F(),l=[{name:"Reserva tu cancha",icon:"edit_calendar",image_url:"/menu/reserva.jpeg",route:"reservas"},{name:"\xDAnete a un partido",icon:"sports_tennis",image_url:"/menu/unete.jpeg",route:"unete"},{name:"Inscr\xEDbete a torneos",icon:"o_emoji_events",image_url:"/menu/torneos.jpeg",route:"torneos"},{name:"Clases de P\xE1del",icon:"o_school",image_url:"/menu/clases.jpeg",route:"reservas"}],g=async()=>await V(u.userId),d=e=>{e.type==="match"?o.push(`/player/match/${e.id}`):e.type==="lesson"&&e.lesson_type==="private"?o.push(`/player/privatelesson/${e.id}`):e.type==="lesson"&&e.lesson_type==="public"&&o.push(`/player/detallessesion/${e.id}`)},s=e=>{e.name==="Clases de P\xE1del"?o.push({path:`/player/${e.route}`,query:{from:"lessons"}}):o.push(`/player/${e.route}`)};return M(async()=>{m.value=!0,i.value=[];try{const e=await H(a,g,2e3);i.value=e||[]}catch(e){console.error("Error fetching upcoming events:",e),i.value=[]}finally{m.value=!1}}),{full_name:n,options:l,upcomingEvents:i,isInitiallyLoading:m,formatDate:W,goToEventDetails:d,navigateTo:s,userStore:u}}},A={class:"header-content"},O={class:"greeting"},U={class:"header-icons"},$={class:"player-container"},G={class:"home"},J={class:"options-grid"},K=["onClick"],X=["src"],Y={class:"next-events-section"},Z={class:"events-container"},ee={key:0,class:"empty-events"},oe={key:1,class:"events-carousel"},se=["onClick"],te={class:"event-info"},ne={class:"event-date"},ae={class:"event-time"},re={class:"event-club"},ie={class:"event-court"};function le(a,o,i,n,m,u){const l=h("NotificationBell"),g=h("PlayerTopMenu"),d=h("BannerPromoScrolling"),s=h("NavigationMenu");return c(),T(I,{view:"hHh lpR fFf"},{default:y(()=>[r(N,{elevated:"",class:"text-white"},{default:y(()=>[t("div",A,[t("div",O,[o[0]||(o[0]=t("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"},null,-1)),b(" Bienvenido "+p(n.userStore.fullName),1)]),t("div",U,[r(l),r(g)])]),r(d)]),_:1}),r(L,null,{default:y(()=>[t("div",$,[t("div",G,[t("div",J,[(c(!0),_(x,null,E(n.options,e=>(c(),_("div",{key:e.name,class:"option-card",onClick:v=>n.navigateTo(e)},[t("img",{src:e.image_url,alt:"Option Image",class:"option-image"},null,8,X),t("h3",null,p(e.name),1),r(w,{name:e.icon,size:"xl",class:"option-icon"},null,8,["name"])],8,K))),128))]),t("div",Y,[o[2]||(o[2]=t("div",{class:"next-events"},[t("h4",null,"Mis Eventos:")],-1)),t("div",Z,[n.upcomingEvents.length===0&&!n.isInitiallyLoading?(c(),_("div",ee,o[1]||(o[1]=[t("div",{class:"q-pa-md text-center text-grey"}," No tienes pr\xF3ximos eventos registrados. ",-1)]))):(c(),_("div",oe,[(c(!0),_(x,null,E(n.upcomingEvents,e=>{var v,P;return c(),_("div",{key:e.id,class:"event-card",onClick:ce=>n.goToEventDetails(e)},[r(w,{name:e.type==="match"?e.tournament_id?"emoji_events":"sports_tennis":"o_school",class:"event-icon material-icons-outlined",size:"35px"},null,8,["name"]),t("div",te,[t("p",ne,p(n.formatDate(e.match_date||e.lesson_date)),1),t("p",ae,p(e.match_time||e.lesson_time),1),t("p",re,p((v=e.clubs)==null?void 0:v.name),1),t("p",ie,p((P=e.courts)==null?void 0:P.name),1)])],8,se)}),128))]))])])])])]),_:1}),r(s)]),_:1})}var De=q(z,[["render",le],["__scopeId","data-v-147e2742"]]);export{De as default};
