import{Q as w}from"./QHeader.bd213683.js";import{r as f,F as x,a9 as D,B as L,w as P,aa as d,q as l,G as p,H as t,v as e,I as c,K as q,ag as I,s as g,ae as F,af as V,ad as _,x as b,y as E}from"./index.b86c8e6e.js";import{Q as S,a as B}from"./QItem.bb8cfc8e.js";import{Q as v}from"./QItemLabel.37a6fbbb.js";import{Q as T}from"./QList.d2fcba6f.js";import{Q as M}from"./QPage.b77a8772.js";import{Q as H,a as R}from"./QLayout.af46a9b3.js";import{u as U}from"./use-quasar.a2b20f07.js";import{g as C}from"./locationUtils.d9b6d6e7.js";import{n as G}from"./navigationUtils.2c4b9dee.js";import{s as h,a as j}from"./clubs.24f80e50.js";import{P as A}from"./PlayerNavigationMenu.5cc1aa48.js";import{N as K}from"./NotificationBell.53a18a75.js";import{B as z}from"./BannerPromoScrolling.9204dca7.js";import{D as J}from"./DesktopNavigation.0217c101.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.c98ef0da.js";import"./supabase.4d10d376.js";import"./QTabs.273ef540.js";import"./rtl.276c3f1b.js";import"./QFooter.99f9350d.js";import"./QBadge.232753f6.js";import"./api.e96a150b.js";import"./admin.48eb7fea.js";import"./QTooltip.03338ad8.js";import"./position-engine.d601497f.js";import"./selection.d155da32.js";const W={components:{PlayerNavigationMenu:A,BannerPromoScrolling:z,NotificationBell:K,DesktopNavigation:J},setup(){const r=f([]),n=x(),y=D(),a=f(""),i=f(!1),m=U();return L(async()=>{i.value=!0;try{console.log("Attempting to get user location...");const s=await C();console.log("User location obtained:",s),r.value=await h("",s),console.log("Nearby clubs found:",r.value)}catch(s){console.error("Geolocation error:",s.message),m.notify({type:"warning",message:"No se pudo obtener tu ubicaci\xF3n. Mostrando clubes generales.",icon:"location_off"});try{console.log("Fetching first 10 clubs as fallback..."),r.value=await j(10),console.log("Fallback clubs found:",r.value)}catch(o){console.error("Error fetching first clubs:",o),m.notify({type:"negative",message:"No se pudieron cargar los clubes."}),r.value=[]}}finally{i.value=!1}}),P(a,async s=>{i.value=!0;let o=null;try{o=await C()}catch(u){console.warn("Could not get location for search query:",s,u.message),m.notify({type:"info",message:"Buscando sin ubicaci\xF3n precisa."})}try{r.value=await h(s,o)}catch(u){console.error("Error al buscar clubes:",u.message),m.notify({type:"negative",message:"Error durante la b\xFAsqueda."}),r.value=[]}finally{i.value=!1}}),{clubs:r,searchClubs:h,searchQuery:a,searching:i,viewClubDetails:s=>{const u=y.query.from==="lessons"?"publiclessons":"reservations";n.push({path:`/club/${s}`,query:{tab:u}})},goBack:()=>{n.back()},goToDashboard:()=>{G(n,userStore)}}}},X={class:"header-content"},Y={class:"greeting"},Z={class:"header-icons"},$={class:"search-bar"},oo={class:"clubs-list"},eo=["src"],ao={key:1,class:"text-center"},to={key:2,class:"text-center"};function so(r,n,y,a,i,m){const k=d("NotificationBell"),N=d("BannerPromoScrolling"),Q=d("PlayerNavigationMenu"),s=d("DesktopNavigation");return l(),p(H,{view:"hHh lpR fFf",class:"text-white"},{default:t(()=>[e(w,{elevated:"",class:"text-white"},{default:t(()=>[c("div",X,[c("div",Y,[c("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:n[0]||(n[0]=(...o)=>a.goToDashboard&&a.goToDashboard(...o))})]),c("div",Z,[e(k)])]),e(N)]),_:1}),e(R,null,{default:t(()=>[e(M,{class:"q-pa-md"},{default:t(()=>[c("div",$,[e(q,{modelValue:a.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=o=>a.searchQuery=o),filled:"",dense:"",placeholder:"Buscar por nombre o ubicaci\xF3n",onInput:a.searchClubs,class:"text-dark"},{prepend:t(()=>[e(I,{name:"search",class:"text-primary",color:"black"})]),_:1},8,["modelValue","onInput"])]),c("div",oo,[a.clubs.length>0?(l(),p(T,{key:0,class:"q-mt-md"},{default:t(()=>[(l(!0),g(V,null,F(a.clubs,o=>(l(),p(S,{key:o.id,clickable:"",onClick:u=>a.viewClubDetails(o.id),class:"club-card"},{default:t(()=>[e(B,{avatar:""},{default:t(()=>[c("img",{src:o.logo_url||"/logo.jpeg",alt:"Club Logo",class:"club-logo"},null,8,eo)]),_:2},1024),e(B,null,{default:t(()=>[e(v,{class:"club-name"},{default:t(()=>[_(b(o.name),1)]),_:2},1024),e(v,{caption:""},{default:t(()=>[_(b(o.address),1)]),_:2},1024),o.distance?(l(),p(v,{key:0,caption:""},{default:t(()=>[_(" Distancia: "+b((o.distance/1e3).toFixed(2))+" km ",1)]),_:2},1024)):E("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):a.searching?(l(),g("div",ao,"Buscando...")):(l(),g("div",to,"No se encontraron clubes."))])]),_:1})]),_:1}),e(Q),e(s)]),_:1})}var Fo=O(W,[["render",so]]);export{Fo as default};
