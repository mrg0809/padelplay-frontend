import{a8 as v,q as u,G as b,H as a,v as t,I as n,ab as c,J as g,aU as q,a9 as p,aa as i,K as m,aT as V,s as h,ac as x,ad as U,x as T}from"./index.58e85a5d.js";import{Q as w}from"./QHeader.8d5bfa86.js";import{Q as f}from"./QSelect.d41f4184.js";import{Q}from"./QForm.09e33abd.js";import{Q as k}from"./QPage.a530dec3.js";import{Q as S,a as z}from"./QLayout.09e0bdd8.js";import"./userStore.28068154.js";import{n as M}from"./navigationUtils.2c4b9dee.js";import{C as D}from"./ClubNavigationMenu.98167ba1.js";import{a as F}from"./api.2af71db3.js";import{s as I}from"./supabase.29bebebf.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.8c885d9a.js";import"./QItem.e5e2bb84.js";import"./QItemLabel.bea571b7.js";import"./QMenu.59955c92.js";import"./position-engine.e8fed520.js";import"./selection.8f8b987b.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./pinia.1bc53ecb.js";import"./QTabs.f4771d80.js";import"./QFooter.152aacf6.js";const A={name:"CreateTournament",data(){return{form:{name:"",start_date:"",start_time:"",end_date:"",end_time:"",category:"",gender:"",system:"",min_pairs:null,max_pairs:null,price_per_pair:null,prize:"",courts_used:[],details:""},categories:["primera","segunda","tercera","cuarta","quinta","libre","otro","open"],genders:["mixto","varonil","femenil"],systems:["combinado","eliminacion directa","liga","round-robin","retas"],courts:[],selectAllCourts:!1}},async mounted(){const r=localStorage.getItem("token");if(r){const l=r.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=JSON.parse(atob(l));this.clubId=s.club_id||null}const{data:e,error:d}=await I.from("courts").select("id, name").eq("club_id",this.clubId);d||(this.courts=e)},components:{ClubNavigationMenu:D},methods:{toggleSelectAll(r){this.form.courts_used=r?this.courts.map(e=>e.id):[]},async createTournament(){try{const r={...this.form,category:typeof this.form.category=="object"?this.form.category.value:this.form.category,gender:typeof this.form.gender=="object"?this.form.gender.value:this.form.gender,system:typeof this.form.system=="object"?this.form.system.value:this.form.system,club_id:this.clubId},e=await F.post("/tournaments/",r);if(e.status===200)this.$q.notify({type:"positive",message:"Torneo creado exitosamente"}),this.$router.push("/dashboard/club");else throw new Error(e.data.detail||"Error al crear el torneo")}catch(r){this.$q.notify({type:"negative",message:`Error: ${r.message}`})}},goBack(){this.$router.back()},goToDashboard(){M(this.$router,this.userStore)}},computed:{potentialEarnings(){const{price_per_pair:r,max_pairs:e,prize:d}=this.form;return r&&e?r*e-parseFloat(d||0):0},categoriesCapitalized(){return this.categories.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))},gendersCapitalized(){return this.genders.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))},systemsCapitalized(){return this.systems.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))}}},P={class:"header-content"},j={class:"greeting"},B={class:"header-icons"},E={class:"q-mb-sm"},H={class:"q-pa-sm text-white"};function G(r,e,d,y,l,s){const _=v("ClubNavigationMenu");return u(),b(S,{view:"hHh lpR fFf",class:"body text-white"},{default:a(()=>[t(w,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[n("div",P,[n("div",j,[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:e[0]||(e[0]=(...o)=>s.goToDashboard&&s.goToDashboard(...o))}),e[16]||(e[16]=c(" Crear Torneo "))]),n("div",B,[t(g,{flat:"",round:"",icon:"arrow_back",onClick:s.goBack},null,8,["onClick"])])])]),_:1}),t(z,null,{default:a(()=>[t(k,{class:"q-pa-md"},{default:a(()=>[t(Q,{onSubmit:q(s.createTournament,["prevent"])},{default:a(()=>[t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>e[17]||(e[17]=[n("h3",null,"Detalles del Torneo",-1)])),_:1}),t(i,null,{default:a(()=>[t(m,{modelValue:l.form.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.form.name=o),label:"Nombre del Torneo",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.start_date,"onUpdate:modelValue":e[2]||(e[2]=o=>l.form.start_date=o),label:"Fecha de Inicio",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.start_time,"onUpdate:modelValue":e[3]||(e[3]=o=>l.form.start_time=o),label:"Hora de Inicio",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.end_date,"onUpdate:modelValue":e[4]||(e[4]=o=>l.form.end_date=o),label:"Fecha de Fin",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.end_time,"onUpdate:modelValue":e[5]||(e[5]=o=>l.form.end_time=o),label:"Hora de Fin",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(f,{modelValue:l.form.category,"onUpdate:modelValue":e[6]||(e[6]=o=>l.form.category=o),options:s.categoriesCapitalized,label:"Categor\xEDa",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.gender,"onUpdate:modelValue":e[7]||(e[7]=o=>l.form.gender=o),options:s.gendersCapitalized,label:"G\xE9nero",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.system,"onUpdate:modelValue":e[8]||(e[8]=o=>l.form.system=o),options:s.systemsCapitalized,label:"Sistema de Competencia",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(m,{modelValue:l.form.details,"onUpdate:modelValue":e[9]||(e[9]=o=>l.form.details=o),label:"Detalles del Torneo",type:"textarea",outlined:"",dense:"",rows:"3",class:"q-mb-md",hint:"Especificaciones adicionales que se mostrar\xE1n a los jugadores"},null,8,["modelValue"]),t(m,{modelValue:l.form.min_pairs,"onUpdate:modelValue":e[10]||(e[10]=o=>l.form.min_pairs=o),modelModifiers:{number:!0},label:"M\xEDnimo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.max_pairs,"onUpdate:modelValue":e[11]||(e[11]=o=>l.form.max_pairs=o),modelModifiers:{number:!0},label:"M\xE1ximo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>[e[18]||(e[18]=n("h3",null,"Canchas",-1)),n("div",E,[t(V,{modelValue:l.selectAllCourts,"onUpdate:modelValue":[e[12]||(e[12]=o=>l.selectAllCourts=o),s.toggleSelectAll],label:"Seleccionar todas las canchas"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),t(i,null,{default:a(()=>[(u(!0),h(U,null,x(l.courts,o=>(u(),b(V,{key:o.id,modelValue:l.form.courts_used,"onUpdate:modelValue":e[13]||(e[13]=C=>l.form.courts_used=C),label:o.name,val:o.id,outlined:"",dense:"",class:"q-mb-sm"},null,8,["modelValue","label","val"]))),128))]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>e[19]||(e[19]=[n("h3",null,"Detalles Financieros",-1)])),_:1}),t(i,null,{default:a(()=>[t(m,{modelValue:l.form.price_per_pair,"onUpdate:modelValue":e[14]||(e[14]=o=>l.form.price_per_pair=o),modelModifiers:{number:!0},label:"Precio por Pareja",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.prize,"onUpdate:modelValue":e[15]||(e[15]=o=>l.form.prize=o),label:"Premio",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),n("div",H,[n("p",null,[e[20]||(e[20]=n("strong",null,"Ganancias Potenciales:",-1)),c(" "+T(s.potentialEarnings)+" MXN",1)])])]),_:1})]),_:1}),t(g,{type:"submit",label:"Crear Torneo",color:"primary",class:"q-mt-md full-width"})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),t(_)]),_:1})}var fe=N(A,[["render",G],["__scopeId","data-v-481426d9"]]);export{fe as default};
