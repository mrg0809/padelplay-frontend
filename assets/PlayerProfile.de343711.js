import{Q as R}from"./QHeader.0d454933.js";import{F as $,a9 as J,r as _,j as O,B as K,q as t,G as s,H as a,v as e,I as i,bI as g,y as c,ab as j,ac as x,J as n,bG as W,aS as F,s as w,x as u,ad as d}from"./index.44dfb542.js";import{Q as v}from"./QItemLabel.a9393408.js";import{Q as h}from"./QItem.ce9b680d.js";import{Q as X}from"./QList.8d836b6c.js";import{Q as Y}from"./QPage.1698e478.js";import{Q as Z,a as ee}from"./QLayout.f534ad89.js";import{f as ae}from"./players.a723538a.js";import{d as oe}from"./dateUtils.8779c870.js";import{a as te}from"./uploadFileUtils.1e9ae5a6.js";import{s as le}from"./shareUtils.2a8f4ada.js";import{g as D,a as re}from"./countryUtils.f07e8a77.js";import{u as se}from"./userStore.5505b9a8.js";import{u as ie}from"./useDashboardNavigation.cec1079f.js";import{f as ne,c as ue,u as ce}from"./community.51a9e40c.js";import{u as de}from"./use-quasar.78518286.js";import{P as pe}from"./PlayerNavigationMenu.0afc6623.js";import{P as fe}from"./PlayerTopMenu.19041bee.js";import{N as me}from"./NotificationBell.e8ec0716.js";import{B as ye}from"./BannerPromoScrolling.ff516f9b.js";import{D as _e}from"./DesktopNavigation.a6ab08fe.js";import{C as ge}from"./ClubTopMenu.46345f3d.js";import{C as ve}from"./ClubNavigationMenu.3e728507.js";import{_ as he}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.a8148869.js";import"./api.e96a150b.js";import"./index.c98ef0da.js";import"./pinia.70db6e88.js";import"./QTabs.3e576845.js";import"./rtl.276c3f1b.js";import"./QFooter.ee772579.js";import"./QBtnDropdown.3be12f0d.js";import"./QBtnGroup.ac2ad699.js";import"./QMenu.0503986d.js";import"./position-engine.154a5bb3.js";import"./selection.28b53dc5.js";import"./QBadge.797aa0dd.js";import"./admin.48eb7fea.js";import"./QTooltip.57680f54.js";const be={class:"header-content"},ke={class:"greeting"},we={class:"header-icons"},Ce={class:"player-container"},Pe={class:"player-profile-layout"},Ne={class:"profile-header"},xe=["src"],Qe={class:"q-ma-none player-name"},Ie={key:1},qe={key:1,class:"follow-section q-my-sm"},je={class:"icon-buttons"},Fe={__name:"PlayerProfile",setup(De){const b=se(),{goToDashboard:Q}=ie(),p=$(),I=J(),f=de(),q=_(null),m=_(I.params.userId||b.userId),y=O(()=>m.value===b.userId),C=_(!1),S=_([]),k=_(!1),l=_({first_name:"",last_name:"",birth_date:"",phone:"",gender:"",preferred_hand:"",position:"",photo_url:null,category:"sexta",nationality:""}),B=async()=>{if(!m.value){console.error("No user ID provided for profile"),f.notify({type:"negative",message:"Error: No se pudo cargar el perfil del jugador"}),p.push("/player/inicio");return}const o=await ae(m.value);o?l.value=o:(f.notify({type:"negative",message:"No se pudo cargar la informaci\xF3n del jugador"}),p.push("/player/inicio"))},E=async()=>{if(!y.value)try{const o=await ne(b.userId);S.value=o,C.value=o.some(r=>r.user_id===m.value)}catch(o){console.error("Error loading following status:",o)}},M=async()=>{try{await ue(b.userId,m.value),C.value=!0,f.notify({type:"positive",message:"Ahora sigues a este jugador"})}catch(o){console.error("Error following player:",o),f.notify({type:"negative",message:"Error al seguir al jugador"})}},T=async()=>{try{await ce(b.userId,m.value),C.value=!1,f.notify({type:"positive",message:"Has dejado de seguir a este jugador"})}catch(o){console.error("Error unfollowing player:",o),f.notify({type:"negative",message:"Error al dejar de seguir al jugador"})}},H=()=>{q.value.click()},L=o=>{const r=o.target.files[0];r&&te(r,l.value)},z=()=>{const o="Descubre a este jugador.",r=window.location.href;le(o,r,"Echa un vistazo a este perfil.")},U=()=>{p.push("/player/editarinfo")};function P(o){return o?o.charAt(0).toUpperCase()+o.slice(1):"No especificado"}const V=()=>{p.push("/player/community")},A=()=>{p.push("/player/formasdepago")},G=()=>{p.push("/player/historial")};return K(()=>{I.query.from==="club"&&(k.value=!0),B(),E()}),(o,r)=>(t(),s(Z,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[e(R,{elevated:"",class:"text-white"},{default:a(()=>[i("div",be,[i("div",ke,[i("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:r[0]||(r[0]=(...N)=>g(Q)&&g(Q)(...N))})]),i("div",we,[e(me),k.value?c("",!0):(t(),s(fe,{key:0})),k.value?(t(),s(ge,{key:1})):c("",!0)])]),e(ye)]),_:1}),k.value?c("",!0):(t(),s(_e,{key:0})),k.value?(t(),s(ve,{key:1})):c("",!0),e(ee,null,{default:a(()=>[e(Y,{class:"q-pa-md"},{default:a(()=>[i("div",Ce,[i("div",Pe,[e(j,{flat:"",bordered:"",class:"text-white profile-card main-profile"},{default:a(()=>[e(x,{class:"q-pb-none relative"},{default:a(()=>[e(n,{flat:"",round:"",dense:"",icon:"query_stats",class:"absolute-top-left"}),e(n,{flat:"",round:"",dense:"",icon:"o_share",class:"absolute-top-right",onClick:z}),i("div",Ne,[e(W,{size:"120px",class:F(["profile-avatar",{"clickable-avatar":y.value}]),onClick:r[1]||(r[1]=N=>y.value?H():null)},{default:a(()=>[l.value.photo_url?(t(),w("img",{key:0,src:l.value.photo_url,alt:"Foto del jugador"},null,8,xe)):(t(),s(n,{key:1,icon:"person",flat:"",dense:"",size:"70px"}))]),_:1},8,["class"]),i("h4",Qe,u(l.value.first_name),1),y.value?(t(),w("input",{key:0,type:"file",ref_key:"fileInput",ref:q,class:"hidden",accept:"image/*",onChange:L},null,544)):c("",!0)])]),_:1}),e(x,{class:"profile-details"},{default:a(()=>[e(X,{dense:"",class:"text-white player-info-list"},{default:a(()=>[e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Categor\xEDa: "+u(P(l.value.category)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Fecha de nacimiento: "+u(g(oe)(l.value.birth_date)),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("G\xE9nero: "+u(P(l.value.gender)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Mano dominante: "+u(P(l.value.preferred_hand)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Posici\xF3n en pista: "+u(P(l.value.position)||"No especificado"),1)]),_:1})]),_:1}),l.value.nationality?(t(),s(h,{key:0},{default:a(()=>[e(v,null,{default:a(()=>[r[2]||(r[2]=d(" Nacionalidad: ")),g(D)(l.value.nationality)?(t(),w("span",{key:0,class:F(`fi fi-${g(D)(l.value.nationality)}`),style:{"margin-right":"8px"}},null,2)):(t(),w("span",Ie,u(g(re)(l.value.nationality)),1)),d(" "+u(l.value.nationality),1)]),_:1})]),_:1})):c("",!0)]),_:1}),y.value?(t(),s(n,{key:0,flat:"",dense:"",color:"white",icon:"o_edit",label:"Editar",class:"q-my-sm edit-btn",stack:"",onClick:U})):(t(),w("div",qe,[C.value?(t(),s(n,{key:1,color:"red",label:"Dejar de seguir",icon:"person_remove",class:"unfollow-btn",onClick:T})):(t(),s(n,{key:0,color:"primary",label:"Seguir",icon:"person_add",class:"follow-btn",onClick:M}))]))]),_:1})]),_:1}),y.value?(t(),s(j,{key:0,flat:"",bordered:"",class:"text-white profile-card actions-card"},{default:a(()=>[e(x,{class:"q-pb-none"},{default:a(()=>[i("div",je,[e(n,{flat:"",dense:"",color:"white",icon:"o_group",label:"Comunidad",class:"q-my-sm action-btn",stack:"",onClick:V}),e(n,{flat:"",dense:"",color:"white",icon:"o_credit_card",label:"ForMas de pago",class:"q-my-sm action-btn",stack:"",onClick:A}),e(n,{flat:"",dense:"",color:"white",icon:"o_history",label:"Historial",class:"q-my-sm action-btn",stack:"",onClick:G})])]),_:1})]),_:1})):c("",!0)])])]),_:1})]),_:1}),e(pe)]),_:1}))}};var va=he(Fe,[["__scopeId","data-v-75c258ae"]]);export{va as default};
