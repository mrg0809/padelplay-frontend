import{x as A,r as p,f as b,h as D,o as u,z as h,A as a,d as e,B as s,D as F,a7 as c,a8 as m,t as i,a as y,Q as L,aa as S,ab as V,a9 as r,ac as f,aK as $,_ as M}from"./index.7e1eb1fb.js";import{Q as E}from"./QHeader.6c821f61.js";import{Q}from"./QItemLabel.a9ded771.js";import{Q as v,a as l}from"./QItem.ba33f348.js";import{Q as R}from"./QList.1a20363e.js";import{Q as j}from"./QPage.52873f45.js";import{Q as z,a as H}from"./QLayout.3adb72cb.js";import{Q as K}from"./QDrawer.624fd5a6.js";import{u as O}from"./use-quasar.c9f15b94.js";import{a as U}from"./api.43112139.js";import{N as Z}from"./NotificationBell.a406470b.js";import{B as G}from"./BannerPromoScrolling.235ca23c.js";import{A as J}from"./AssociationNavigationMenu.2dd459bd.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";import"./TouchPan.00aafd0b.js";import"./touch.9135741d.js";import"./selection.c251650e.js";import"./format.de7e9769.js";import"./QBadge.2b9406be.js";import"./admin.d9825531.js";import"./QTabs.126199a6.js";import"./rtl.276c3f1b.js";import"./QFooter.2bdcd75c.js";const X={class:"header-content"},Y={class:"header-icons"},ee={class:"row q-col-gutter-md q-mb-md"},te={class:"col-12 col-md-4"},ae={class:"text-h4 text-positive"},se={class:"col-12 col-md-4"},oe={class:"text-h4 text-warning"},le={class:"col-12 col-md-4"},ne={class:"text-h4 text-primary"},ie={key:0,class:"text-center"},re={class:"text-right"},de={class:"text-positive text-bold"},ue={class:"text-caption text-grey"},ce={class:"text-caption"},me={key:2,class:"text-center text-grey q-pa-md"},ve={class:"text-caption q-mb-md"},_e={__name:"AssociationRevenue",setup(pe){const _=A();O();const g=p(!1),d=p([]),x=p(!1),k=p(10),w=b(()=>d.value.reduce((o,t)=>o+t.total_revenue,0)),C=b(()=>d.value.reduce((o,t)=>o+t.commission,0)),B=b(()=>w.value-C.value);D(async()=>{await P()});const P=async()=>{g.value=!0;try{const{data:o}=await U.get("/padelite/association/revenue");d.value=o.data||[],o.commission_rate&&(k.value=o.commission_rate)}catch(o){console.error("Error fetching revenue:",o),d.value=[]}finally{g.value=!1}},I=()=>{_.push("/association/dashboard")},T=()=>{_.push("/association/tournaments")},q=()=>{_.push("/association/revenue")},N=async()=>{const{storage:o}=await M(()=>import("./index.7e1eb1fb.js").then(function(t){return t.bZ}),["assets/index.7e1eb1fb.js","assets/index.bfdcce3b.css"]);await o.removeItem("token"),_.push("/")};return(o,t)=>(u(),h(z,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[e(E,{elevated:"",class:"text-white"},{default:a(()=>[s("div",X,[s("div",{class:"greeting"},[s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:I}),t[2]||(t[2]=s("div",{class:"greeting-text"},[s("p",null,"Bienvenido"),s("p",{class:"text-grey"},"Ingresos")],-1))]),s("div",Y,[e(Z),e(F,{flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=n=>x.value=!0)})])]),e(G)]),_:1}),e(H,null,{default:a(()=>[e(j,{class:"q-pa-md"},{default:a(()=>[t[9]||(t[9]=s("div",{class:"text-h5 q-mb-md"},"Ingresos de la Asociaci\xF3n",-1)),s("div",ee,[s("div",te,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:a(()=>[e(m,null,{default:a(()=>[t[3]||(t[3]=s("div",{class:"text-caption"},"Ingresos Totales",-1)),s("div",ae,"$"+i(w.value.toFixed(2)),1)]),_:1})]),_:1})]),s("div",se,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:a(()=>[e(m,null,{default:a(()=>[t[4]||(t[4]=s("div",{class:"text-caption"},"Comisi\xF3n PadelPlay",-1)),s("div",oe,"$"+i(C.value.toFixed(2)),1)]),_:1})]),_:1})]),s("div",le,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:a(()=>[e(m,null,{default:a(()=>[t[5]||(t[5]=s("div",{class:"text-caption"},"Ingresos Netos",-1)),s("div",ne,"$"+i(B.value.toFixed(2)),1)]),_:1})]),_:1})])]),e(c,{flat:"",bordered:"",class:"bg-transparent text-white q-mb-md"},{default:a(()=>[e(m,null,{default:a(()=>[t[6]||(t[6]=s("div",{class:"text-h6 q-mb-md"},"Ingresos por Torneo",-1)),g.value?(u(),y("div",ie,[e(L,{color:"primary",size:"50px"})])):d.value.length>0?(u(),h(R,{key:1,separator:""},{default:a(()=>[(u(!0),y(V,null,S(d.value,n=>(u(),h(v,{key:n.tournament_id},{default:a(()=>[e(l,null,{default:a(()=>[e(Q,null,{default:a(()=>[r(i(n.tournament_name),1)]),_:2},1024),e(Q,{caption:""},{default:a(()=>[r(i(n.registered_players)+" jugadores inscritos ",1)]),_:2},1024)]),_:2},1024),e(l,{side:""},{default:a(()=>[s("div",re,[s("div",de,"$"+i(n.total_revenue.toFixed(2)),1),s("div",ue,"Comisi\xF3n: $"+i(n.commission.toFixed(2)),1),s("div",ce,"Neto: $"+i(n.net_revenue.toFixed(2)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(u(),y("div",me," No hay datos de ingresos disponibles "))]),_:1})]),_:1}),e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:a(()=>[e(m,null,{default:a(()=>[t[7]||(t[7]=s("div",{class:"text-h6 q-mb-md"},"Detalles de Pagos",-1)),s("div",ve," Tasa de comisi\xF3n de PadelPlay: "+i(k.value)+"% ",1),t[8]||(t[8]=s("div",{class:"text-caption text-grey"}," La comisi\xF3n se calcula sobre cada inscripci\xF3n de jugador ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=n=>x.value=n),side:"right",overlay:"",behavior:"mobile",class:"bg-dark text-white"},{default:a(()=>[e(R,null,{default:a(()=>[e(Q,{header:""},{default:a(()=>[...t[10]||(t[10]=[r("Men\xFA",-1)])]),_:1}),e(v,{clickable:"",onClick:I},{default:a(()=>[e(l,{avatar:""},{default:a(()=>[e(f,{name:"home"})]),_:1}),e(l,null,{default:a(()=>[...t[11]||(t[11]=[r("Dashboard",-1)])]),_:1})]),_:1}),e(v,{clickable:"",onClick:T},{default:a(()=>[e(l,{avatar:""},{default:a(()=>[e(f,{name:"emoji_events"})]),_:1}),e(l,null,{default:a(()=>[...t[12]||(t[12]=[r("Mis Torneos",-1)])]),_:1})]),_:1}),e(v,{clickable:"",onClick:q},{default:a(()=>[e(l,{avatar:""},{default:a(()=>[e(f,{name:"attach_money"})]),_:1}),e(l,null,{default:a(()=>[...t[13]||(t[13]=[r("Ingresos",-1)])]),_:1})]),_:1}),e($),e(v,{clickable:"",onClick:N},{default:a(()=>[e(l,{avatar:""},{default:a(()=>[e(f,{name:"logout"})]),_:1}),e(l,null,{default:a(()=>[...t[14]||(t[14]=[r("Cerrar Sesi\xF3n",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(J)]),_:1}))}};var $e=W(_e,[["__scopeId","data-v-02d1280c"]]);export{$e as default};
