import{Q as Ce}from"./QHeader.435fe33d.js";import{r as u,j as ue,B as fe,w as Ie,q as g,G as M,H as s,v as r,I as o,ac as w,Q as me,y as R,s as ae,ae as _e,af as he,aO as be,J as T,ag as O,x as N,K as ce,aU as ke,aV as Ee,aW as pe,ab as $,aS as qe,F as Se,a9 as Me,aa as ve,aj as ye,ah as ge}from"./index.3f1076a3.js";import{Q as Ne}from"./QBanner.7d1e7c29.js";import{Q as Ve}from"./QPage.76b9f650.js";import{Q as Ae,a as De}from"./QLayout.fe9d4509.js";import{u as xe}from"./use-quasar.0801e5c5.js";import{Q as ze}from"./QForm.336a6287.js";import{_ as Qe}from"./MP_RGB_horizontal.ee11db59.js";import{a as k}from"./api.2af71db3.js";import{_ as we}from"./plugin-vue_export-helper.21dcd24c.js";import{P as je}from"./PlayerNavigationMenu.993558b5.js";import{d as Re,e as Te,g as Fe,h as $e,i as Oe}from"./finalizeUtils.c0456163.js";import"./QTabs.a46b14bb.js";import"./rtl.276c3f1b.js";import"./QFooter.1bfeb9e5.js";import"./hourUtils.24f4f451.js";const Ue={class:"text-center"},Be={class:"row q-col-gutter-sm"},Le={class:"col"},Je={class:"text-body2"},He={class:"text-caption"},Ge={class:"text-caption"},Ke={class:"text-center"},We={class:"text-center text-white"},Ye={key:0,class:"q-mb-md"},Ze={class:"row items-center q-py-md"},Xe=["src","alt"],ea={class:"text-white text-h6"},aa=["src","alt"],ta={class:"row q-col-gutter-md"},oa={class:"col-6"},ra={class:"col-6"},la={class:"text-center"},sa={class:"q-mb-md"},na={__name:"CheckoutAPI",props:{cartItems:{type:Array,required:!0},userInfo:{type:Object,required:!0},totalAmount:{type:Number,required:!0},externalReference:{type:String,required:!0},metadata:{type:Object,default:()=>({})}},emits:["payment-success","payment-error"],setup(z,{emit:d}){const f=z,n=d,E=xe(),q=u(!0),V=u(!1),A=u(!1),y=u(null),P=u(!1),p=u(""),F=u([]),h=u(null),C=u([]),_=u(null),S=u([]),I=u(null),c=u({number:"",holderName:"",expiry:"",cvv:""}),i=u(1),b=u(!1);ue(()=>[{label:"1 pago",value:1}]);const B=ue(()=>I.value&&!P.value?!0:p.value&&p.value!==null&&p.value!==""&&J(c.value.number)&&c.value.holderName&&c.value.holderName.trim()!==""&&H(c.value.expiry)&&G(c.value.cvv)),te=e=>{const a={visa:"credit_card",master:"credit_card",amex:"credit_card",naranja:"credit_card",cabal:"credit_card",default:"credit_card"};return a[e]||a.default},U=e=>({visa:"VISA",master:"Mastercard",amex:"American Express",naranja:"Naranja",cabal:"Cabal"})[e]||(e==null?void 0:e.toUpperCase()),oe=e=>({visa:"visa",master:"mastercard",amex:"amex"})[e]||e,L=e=>`/icons/${oe(e)}.svg`,J=e=>{if(!e)return!1;const a=e.replace(/\s/g,"");return a.length>=13&&a.length<=19&&/^\d+$/.test(a)},H=e=>{if(!e||e.length!==5)return!1;const[a,t]=e.split("/"),x=parseInt(a),l=parseInt("20"+t),m=new Date,Q=m.getFullYear(),D=m.getMonth()+1;return x>=1&&x<=12&&l>=Q&&(l>Q||x>=D)},G=e=>e?e.length>=3&&e.length<=4&&/^\d+$/.test(e):!1,re=()=>{let e=c.value.number.replace(/\s/g,"");e=e.replace(/(.{4})/g,"$1 ").trim(),c.value.number=e;const a=e.replace(/\s/g,"");Y(a)},K=()=>{let e=c.value.expiry.replace(/\D/g,"");e.length>=2&&(e=e.substring(0,2)+"/"+e.substring(2,4)),c.value.expiry=e},W=async e=>{try{if(!e){C.value=[],_.value=null;return}const a=await k.get(`/payments/card_issuers/${e}`);a.data&&a.data.issuers?(C.value=a.data.issuers,C.value.length>0?(_.value=C.value[0].id,console.log(`Auto-selected issuer for Mexico compatibility: ${C.value[0].id} (${C.value[0].name})`)):(_.value=null,console.warn(`No issuers found for payment method: ${e}`))):(C.value=[],_.value=null)}catch(a){console.error("Error loading card issuers:",a),C.value=[],_.value=null}},Y=async e=>{if(!e){p.value="",h.value=null,C.value=[],_.value=null;return}const a={visa:/^4/,master:/^5[1-5]/,amex:/^3[47]/};for(const[t,x]of Object.entries(a))if(x.test(e)){p.value=t,h.value=t,await W(t);return}p.value="",h.value=null,C.value=[],_.value=null},Z=e=>{},X=e=>{},ee=async()=>{try{A.value=!0;const e=await k.get("/payments/payment_methods");if(e.data&&e.data.payment_methods){const a=["visa","master","amex","pse","efecty","bancolombia","banco_agrario","banco_av_villas","banco_bogota","banco_davivienda","banco_falabella","banco_gnb_sudameris","banco_itau","banco_occidente","banco_popular","banco_santander_colombia","bbva_colombia"];F.value=e.data.payment_methods.filter(t=>a.includes(t.id)||t.payment_type_id==="credit_card"&&["visa","master","amex"].includes(t.id)||t.payment_type_id==="bank_transfer"),h.value=null}else throw new Error("Invalid response format")}catch(e){console.error("Error loading payment methods:",e),F.value=[],h.value=null,E.notify({type:"negative",message:"Error al cargar m\xE9todos de pago"})}finally{A.value=!1}},le=async()=>{try{const e=await k.get("/payments/saved_payment_methods");e.data&&e.data.saved_payment_methods?S.value=e.data.saved_payment_methods:S.value=[]}catch(e){console.error("Error loading saved payment methods:",e),S.value=[]}},se=e=>{I.value=e,P.value=!1},ne=async e=>{var a;try{y.value=e.id,await k.delete(`/payments/saved_payment_methods/${e.id}`),S.value=S.value.filter(t=>t.id!==e.id),((a=I.value)==null?void 0:a.id)===e.id&&(I.value=null),E.notify({type:"positive",message:"M\xE9todo de pago eliminado"})}catch(t){console.error("Error deleting saved method:",t),E.notify({type:"negative",message:"Error al eliminar m\xE9todo de pago"})}finally{y.value=null}},ie=async()=>{var e,a,t,x;try{if(V.value=!0,!_.value&&h.value&&(E.notify({type:"warning",message:"Cargando informaci\xF3n del banco emisor..."}),await W(h.value),!_.value))throw new Error("No se pudo determinar el banco emisor de la tarjeta. Este campo es requerido.");const[l,m]=c.value.expiry.split("/"),Q=await k.post("/payments/tokenize_card",{card_number:c.value.number.replace(/\s/g,""),expiration_month:l,expiration_year:"20"+m,security_code:c.value.cvv,card_holder_name:c.value.holderName}),D=Q.data.token;if(!_.value)throw new Error("Falta informaci\xF3n del banco emisor. Por favor, intente nuevamente.");console.log("Processing payment with:",{payment_method_id:h.value,issuer_id:_.value,installments:i.value||1});const j=(await k.post("/payments/process_payment",{transaction_amount:f.totalAmount,description:`Pago por ${f.cartItems.length} items`,payment_method_id:h.value,payer:{email:f.userInfo.email,first_name:((e=f.userInfo.name)==null?void 0:e.split(" ")[0])||"",last_name:((a=f.userInfo.name)==null?void 0:a.split(" ").slice(1).join(" "))||""},payment_method:{token:D,installments:i.value||1,issuer_id:_.value,card_holder_name:c.value.holderName},external_reference:f.externalReference,metadata:f.metadata})).data;if(b.value&&j.status==="approved")try{await k.post("/payments/save_payment_method",{payment_method_id:h.value,last_four_digits:Q.data.last_four_digits,card_holder_name:c.value.holderName,expiration_month:l,expiration_year:"20"+m,issuer_name:j.issuer_name})}catch(Pe){console.error("Error saving payment method:",Pe)}n("payment-success",j)}catch(l){console.error("Payment error:",l);const m=((x=(t=l.response)==null?void 0:t.data)==null?void 0:x.detail)||"Error al procesar el pago";n("payment-error",m),E.notify({type:"negative",message:m})}finally{V.value=!1}},de=async()=>{try{V.value=!0,E.notify({type:"negative",message:"Los m\xE9todos guardados requieren una implementaci\xF3n avanzada. Por favor, usa una nueva tarjeta."}),P.value=!0,I.value=null}catch(e){console.error("Saved method payment error:",e),n("payment-error","Error al procesar pago con m\xE9todo guardado")}finally{V.value=!1}};return fe(async()=>{try{await Promise.all([ee(),le()]),S.value.length===0&&(P.value=!0)}catch(e){console.error("Error during component initialization:",e),E.notify({type:"negative",message:"Error al inicializar el formulario de pago"})}finally{q.value=!1}}),Ie(()=>c.value.number,e=>{if(e){const a=e.replace(/\s/g,"");Y(a)}else p.value="",h.value=null,C.value=[],_.value=null},{immediate:!0}),(e,a)=>(g(),M($,{class:"text-white"},{default:s(()=>[r(w,null,{default:s(()=>a[6]||(a[6]=[o("img",{src:Qe,alt:"Logo",style:{height:"150px",width:"auto"},class:"q-mb-md"},null,-1),o("p",{class:"text-caption"},"Ingresa los datos de tu tarjeta de manera segura",-1)])),_:1}),q.value?(g(),M(w,{key:0},{default:s(()=>[o("div",Ue,[r(me,{color:"primary",size:"3rem"}),a[7]||(a[7]=o("p",{class:"q-mt-md"},"Cargando m\xE9todos de pago...",-1))])]),_:1})):R("",!0),!q.value&&S.value.length>0?(g(),M(w,{key:1},{default:s(()=>[a[8]||(a[8]=o("h5",{class:"q-mb-md"},"M\xE9todos de pago guardados",-1)),o("div",Be,[(g(!0),ae(he,null,_e(S.value,t=>{var x;return g(),ae("div",{key:t.id,class:"col-12"},[r($,{flat:"",bordered:"",class:qe(((x=I.value)==null?void 0:x.id)===t.id?"bg-primary text-white":"bg-grey-8 text-white"),clickable:"",onClick:l=>se(t)},{default:s(()=>[r(w,{class:"row items-center"},{default:s(()=>[r(O,{name:te(t.payment_method_id),size:"sm",class:"q-mr-sm"},null,8,["name"]),o("div",Le,[o("div",Je,"**** **** **** "+N(t.last_four_digits),1),o("div",He,N(t.card_holder_name),1),o("div",Ge,N(t.expiration_month)+"/"+N(t.expiration_year),1)]),r(T,{flat:"",icon:"delete",size:"sm",onClick:pe(l=>ne(t),["stop"]),loading:y.value===t.id},null,8,["onClick","loading"])]),_:2},1024)]),_:2},1032,["class","onClick"])])}),128))]),r(be,{class:"q-my-md"}),r(T,{flat:"",label:P.value?"Usar m\xE9todo guardado":"Usar nueva tarjeta",onClick:a[0]||(a[0]=t=>P.value=!P.value),class:"full-width q-mb-md"},null,8,["label"])]),_:1})):R("",!0),!q.value&&A.value?(g(),M(w,{key:2},{default:s(()=>[o("div",Ke,[r(me,{color:"primary",size:"2rem"}),a[9]||(a[9]=o("p",{class:"q-mt-md text-white"},"Cargando m\xE9todos de pago...",-1))])]),_:1})):R("",!0),!q.value&&!A.value&&F.value.length===0&&(S.value.length===0||P.value)?(g(),M(w,{key:3},{default:s(()=>[o("div",We,[r(O,{name:"error",size:"3rem",color:"negative"}),a[10]||(a[10]=o("p",{class:"q-mt-md"},"No se pudieron cargar los m\xE9todos de pago disponibles.",-1)),r(T,{color:"primary",label:"Reintentar",onClick:ee,class:"q-mt-md"})])]),_:1})):R("",!0),!q.value&&!A.value&&F.value.length>0&&(S.value.length===0||P.value)?(g(),M(w,{key:4},{default:s(()=>[r(ze,{onSubmit:pe(ie,["prevent"])},{default:s(()=>[p.value?(g(),ae("div",Ye,[a[11]||(a[11]=o("div",{class:"text-body2 q-mb-sm text-white"},"Tipo de tarjeta detectado",-1)),o("div",Ze,[o("img",{src:L(p.value),alt:U(p.value),style:{height:"32px",width:"auto",filter:"brightness(1.2)"},class:"q-mr-md",onError:Z,onLoad:X},null,40,Xe),o("span",ea,N(U(p.value)),1)])])):R("",!0),r(ce,{modelValue:c.value.number,"onUpdate:modelValue":a[1]||(a[1]=t=>c.value.number=t),label:"N\xFAmero de tarjeta",placeholder:"1234 5678 9012 3456",filled:"",dark:"",maxlength:"19",rules:[t=>J(t)||"N\xFAmero de tarjeta inv\xE1lido"],onInput:re,class:"q-mb-md"},ke({_:2},[p.value?{name:"prepend",fn:s(()=>[o("img",{src:L(p.value),alt:U(p.value),style:{height:"24px",width:"auto"},onError:Z,onLoad:X},null,40,aa)]),key:"0"}:{name:"prepend",fn:s(()=>[r(O,{name:"credit_card",color:"grey"})]),key:"1"}]),1032,["modelValue","rules"]),r(ce,{modelValue:c.value.holderName,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value.holderName=t),label:"Nombre del titular",placeholder:"JUAN P\xC9REZ",filled:"",dark:"",rules:[t=>!!t||"El nombre es requerido"],class:"q-mb-md"},null,8,["modelValue","rules"]),o("div",ta,[o("div",oa,[r(ce,{modelValue:c.value.expiry,"onUpdate:modelValue":a[3]||(a[3]=t=>c.value.expiry=t),label:"MM/AA",placeholder:"12/28",filled:"",dark:"",maxlength:"5",rules:[t=>H(t)||"Fecha inv\xE1lida (MM/AA)"],onInput:K,onKeyup:K},null,8,["modelValue","rules"])]),o("div",ra,[r(ce,{modelValue:c.value.cvv,"onUpdate:modelValue":a[4]||(a[4]=t=>c.value.cvv=t),label:"CVV",placeholder:"123",filled:"",dark:"",maxlength:"4",type:"password",rules:[t=>G(t)||"CVV inv\xE1lido"]},null,8,["modelValue","rules"])])]),r(Ee,{modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=t=>b.value=t),label:"Guardar m\xE9todo de pago para futuras compras",color:"primary",dark:"",class:"q-mb-md"},null,8,["modelValue"]),r(T,{type:"submit",color:B.value?"positive":"primary",size:"lg",label:`Pagar $${z.totalAmount}`,class:"full-width",loading:V.value,disable:!B.value},null,8,["color","label","loading","disable"])]),_:1})]),_:1})):R("",!0),!q.value&&!A.value&&I.value&&!P.value?(g(),M(w,{key:5},{default:s(()=>[o("div",la,[o("p",sa," Pagar con: **** **** **** "+N(I.value.last_four_digits),1),r(T,{color:"positive",size:"lg",label:`Pagar $${z.totalAmount}`,class:"full-width",loading:V.value,onClick:de},null,8,["label","loading"])])]),_:1})):R("",!0)]),_:1}))}};var ia=we(na,[["__scopeId","data-v-79ea58d6"]]);const da={name:"MercadoPayment",components:{CheckoutAPI:ia,PlayerNavigationMenu:je},setup(){const z=Se(),d=Me(),f=xe(),n=u(!0),E=u(null),q=u([]),V=u({}),A=u(null),y=u(null),P=u(!1),p=u(!1),F=u(!1),h=u(""),C=ue(()=>q.value.reduce((i,b)=>i+b.unit_price*b.quantity,0).toFixed(2)),_=async()=>{n.value=!0,E.value=null;try{try{const b=await k.get("/payments/demo-status");P.value=b.data.demo_mode}catch(b){console.warn("Could not check demo status:",b)}const i=d.params.paymentData||JSON.parse(localStorage.getItem("mercadoPaymentData")||"{}");if(!i.cartItems||!i.userInfo)throw new Error("Datos de pago incompletos");q.value=i.cartItems,V.value=i.userInfo,A.value=i.externalReference,y.value=i.metadata,n.value=!1}catch{E.value="Error al cargar los datos de pago. Por favor, int\xE9ntalo nuevamente.",n.value=!1}},S=async i=>{var B,te,U,oe,L,J,H,G,re,K,W,Y,Z,X,ee,le,se,ne,ie,de,e,a,t,x;console.log("Payment successful:",i);const b=localStorage.getItem("mercadoPaymentData");if(localStorage.removeItem("mercadoPaymentData"),i.status==="approved"){let l={};try{l=JSON.parse(b||"{}")}catch(D){console.error("Error parsing payment data:",D)}const m=(B=l.metadata)==null?void 0:B.item_type,Q=(te=l.metadata)==null?void 0:te.payment_order_id;if(console.log("Processing finalization for item type:",m),console.log("Payment metadata:",l.metadata),m&&Q){const D={baseData:{clubId:(U=l.metadata)==null?void 0:U.club_id,id:(oe=l.metadata)==null?void 0:oe.item_id,participants:((L=l.metadata)==null?void 0:L.participants)||1},extraData:{date:(J=l.metadata)==null?void 0:J.date,time:(H=l.metadata)==null?void 0:H.time,duration:((G=l.metadata)==null?void 0:G.duration)||60,paymentOption:((re=l.metadata)==null?void 0:re.payment_option)||"total",isPublicMatch:((K=l.metadata)==null?void 0:K.is_public_match)||!1,partnerId:(W=l.metadata)==null?void 0:W.partner_id,isRetas:(Y=l.metadata)==null?void 0:Y.is_retas,matchId:(Z=l.metadata)==null?void 0:Z.match_id,slotIndex:(X=l.metadata)==null?void 0:X.slot_index,teamToJoin:(ee=l.metadata)==null?void 0:ee.team_to_join},selectedProducts:((le=l.metadata)==null?void 0:le.additional_items)||[],paymentOrderId:Q,totalAmount:((se=l.metadata)==null?void 0:se.total_amount)||((ie=(ne=l.cartItems)==null?void 0:ne[0])==null?void 0:ie.unit_price)||0,amountToPay:((de=l.metadata)==null?void 0:de.amount_to_pay)||((a=(e=l.cartItems)==null?void 0:e[0])==null?void 0:a.unit_price)||0,itemDetails:((t=l.metadata)==null?void 0:t.item_details)||[],paymentOption:((x=l.metadata)==null?void 0:x.payment_option)||"total"};try{let v={success:!1},j="/player/dashboard";m==="court"?(v=await Re(i,D,k,f),v.success&&v.matchId&&(j=`/player/match/${v.matchId}`)):m==="class"||m==="private_lesson"?(v=await Te(i,D,k,f),v.success&&v.path&&(j=v.path)):m==="public_lesson"?v=await Fe(i,D,k,f):m==="match"||m==="match_join"||m==="open_match_join"?(v=await $e(i,D,k,f),v.success&&v.matchId&&(j=`/player/match/${v.matchId}`)):m==="tournament"?v=await Oe(i,D,k,f):(console.warn("Unknown item type:",m),f.notify({type:"warning",message:"Tipo de compra no reconocido, pero el pago fue exitoso.",timeout:3e3}),v={success:!0}),v.success?(localStorage.setItem("mercadoPagoSuccessRedirect",j),p.value=!0):I("El pago fue exitoso, pero hubo un problema al completar la operaci\xF3n. Contacta al soporte.")}catch(v){console.error("Error during finalization:",v),I("El pago fue exitoso, pero hubo un problema al completar la operaci\xF3n. Contacta al soporte.")}}else console.warn("Could not determine item type or payment order ID"),p.value=!0}else i.status==="pending"?(f.notify({type:"info",message:"Tu pago est\xE1 siendo procesado. Te notificaremos cuando se complete.",timeout:5e3}),setTimeout(()=>{z.push("/player/dashboard")},2e3)):I("El pago no fue aprobado. Por favor, intenta con otro m\xE9todo de pago.")},I=i=>{console.error("Payment error:",i),h.value=i,F.value=!0},c=()=>{p.value=!1;const i=localStorage.getItem("mercadoPagoSuccessRedirect");localStorage.removeItem("mercadoPagoSuccessRedirect"),i?z.push(i).catch(b=>{console.error("Error navigating to stored path:",b),z.push("/player/dashboard")}):z.push("/player/dashboard").catch(()=>{z.push("/")})};return fe(()=>{_()}),{loading:n,error:E,cartItems:q,userInfo:V,externalReference:A,metadata:y,demoModeActive:P,totalAmount:C,showSuccessDialog:p,showErrorDialog:F,paymentErrorMessage:h,initPayment:_,handlePaymentSuccess:S,handlePaymentError:I,navigateToSuccess:c}}},ca={class:"row q-col-gutter-md"},ua={class:"col-12 col-md-6"},ma={class:"row justify-between"},pa={class:"row justify-between text-h6"},va={class:"col-12 col-md-6"},ya={class:"text-center"},ga={class:"text-center text-negative"},fa={class:"q-mt-md"};function _a(z,d,f,n,E,q){const V=ve("CheckoutAPI"),A=ve("PlayerNavigationMenu");return g(),M(Ae,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:s(()=>[r(Ce,{elevated:"",class:"text-white"},{default:s(()=>d[3]||(d[3]=[o("div",{class:"header-content"},[o("div",{class:"greeting"},[o("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})]),o("div",{class:"header-icons"})],-1)])),_:1}),r(De,{class:"home"},{default:s(()=>[r(Ve,{class:"q-pa-md"},{default:s(()=>[n.demoModeActive?(g(),M(Ne,{key:0,class:"bg-orange text-white q-mb-md"},{avatar:s(()=>[r(O,{name:"info",color:"white"})]),default:s(()=>[d[4]||(d[4]=o("strong",null,"MODO DEMOSTRACI\xD3N ACTIVO",-1)),d[5]||(d[5]=o("div",{class:"text-caption"}," Todos los pagos se aprueban autom\xE1ticamente para prop\xF3sitos de demostraci\xF3n. ",-1))]),_:1})):R("",!0),o("div",ca,[o("div",ua,[r($,{class:"text-white"},{default:s(()=>[r(w,null,{default:s(()=>d[6]||(d[6]=[o("h4",{class:"text-white q-my-none"},"Resumen de la compra",-1)])),_:1}),r(w,null,{default:s(()=>[(g(!0),ae(he,null,_e(n.cartItems,y=>(g(),ae("div",{key:y.id,class:"q-mb-sm"},[o("div",ma,[o("span",null,N(y.title)+" (x"+N(y.quantity)+")",1),o("span",null,"$"+N((y.unit_price*y.quantity).toFixed(2)),1)])]))),128)),r(be,{class:"q-my-md"}),o("div",pa,[o("strong",null,"Total: $"+N(n.totalAmount),1)])]),_:1})]),_:1})]),o("div",va,[n.loading?(g(),M($,{key:0,class:"text-white"},{default:s(()=>[r(w,null,{default:s(()=>[o("div",ya,[r(me,{color:"primary",size:"3rem"}),d[7]||(d[7]=o("p",{class:"q-mt-md"},"Cargando formulario de pago...",-1))])]),_:1})]),_:1})):n.error?(g(),M($,{key:1,class:"text-white"},{default:s(()=>[r(w,null,{default:s(()=>[o("div",ga,[r(O,{name:"error",size:"3rem"}),o("p",fa,N(n.error),1),r(T,{color:"primary",label:"Reintentar",onClick:n.initPayment,class:"q-mt-md"},null,8,["onClick"])])]),_:1})]),_:1})):(g(),M(V,{key:2,"cart-items":n.cartItems,"user-info":n.userInfo,"total-amount":parseFloat(n.totalAmount),"external-reference":n.externalReference,metadata:n.metadata,onPaymentSuccess:n.handlePaymentSuccess,onPaymentError:n.handlePaymentError},null,8,["cart-items","user-info","total-amount","external-reference","metadata","onPaymentSuccess","onPaymentError"]))])]),r(ye,{modelValue:n.showSuccessDialog,"onUpdate:modelValue":d[0]||(d[0]=y=>n.showSuccessDialog=y),persistent:""},{default:s(()=>[r($,{class:"text-center"},{default:s(()=>[r(w,null,{default:s(()=>[r(O,{name:"check_circle",color:"positive",size:"4rem"}),d[8]||(d[8]=o("h4",{class:"q-my-md"},"\xA1Pago exitoso!",-1)),d[9]||(d[9]=o("p",null,"Tu pago ha sido procesado correctamente.",-1))]),_:1}),r(ge,{align:"center"},{default:s(()=>[r(T,{color:"primary",label:"Continuar",onClick:n.navigateToSuccess},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(ye,{modelValue:n.showErrorDialog,"onUpdate:modelValue":d[2]||(d[2]=y=>n.showErrorDialog=y)},{default:s(()=>[r($,{class:"text-center"},{default:s(()=>[r(w,null,{default:s(()=>[r(O,{name:"error",color:"negative",size:"4rem"}),d[10]||(d[10]=o("h4",{class:"q-my-md"},"Error en el pago",-1)),o("p",null,N(n.paymentErrorMessage),1)]),_:1}),r(ge,{align:"center"},{default:s(()=>[r(T,{color:"primary",label:"Intentar nuevamente",onClick:d[1]||(d[1]=y=>n.showErrorDialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(A)]),_:1})}var za=we(da,[["render",_a],["__scopeId","data-v-dd95ff3c"]]);export{za as default};
