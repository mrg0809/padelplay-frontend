import{a8 as N,q as _,G as y,H as i,v as e,I as n,ab as t,J as s,s as m,ac as I,ad as c,a9 as k,aa as h,x as p,K as f,aK as b,af as v,ag as D,ah as x,y as C,aU as B}from"./index.cf1ae381.js";import{Q as L}from"./QHeader.22bc8748.js";import{Q as q,a as w}from"./QItem.ff5f9822.js";import{Q}from"./QItemLabel.bad9e799.js";import{Q as H}from"./QList.060f9b6d.js";import{Q as P,a as F}from"./QLayout.3b12d370.js";import{C as O}from"./ClosePopup.145d8a42.js";import{a as g,g as U}from"./api.f1a1189d.js";import{C as S}from"./ClubNavigationMenu.e493d6d8.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";import"./QTabs.2d6a2a07.js";import"./rtl.276c3f1b.js";import"./QFooter.b33a1995.js";const z={data(){return{courts:[],isDialogOpen:!1,isDeleteDialogOpen:!1,dialogTitle:"Agregar Cancha",form:{id:null,name:"",price_per_hour:null,enable_price_per_hour:!1,price_per_hour_and_half:null,enable_price_per_hour_and_half:!1,price_per_two_hour:null,enable_price_per_two_hour:!1,is_indoor:!1,club_id:null}}},components:{ClubNavigationMenu:S},methods:{async fetchCourts(){try{const o=await g.get("/courts");this.courts=o.data}catch(o){console.error("Error al obtener las canchas:",o)}},openCourtDialog(){this.resetForm(),this.dialogTitle="Agregar Cancha",this.isDialogOpen=!0},editCourt(o){this.form={...o,enable_price_per_hour:o.price_per_hour!==null,enable_price_per_hour_and_half:o.price_per_hour_and_half!==null,enable_price_per_two_hour:o.price_per_two_hour!==null},this.dialogTitle="Editar Cancha",this.isDialogOpen=!0},async saveCourt(){try{const o={name:this.form.name,price_per_hour:this.form.enable_price_per_hour?this.form.price_per_hour:null,price_per_hour_and_half:this.form.enable_price_per_hour_and_half?this.form.price_per_hour_and_half:null,price_per_two_hour:this.form.enable_price_per_two_hour?this.form.price_per_two_hour:null,is_indoor:this.form.is_indoor,club_id:this.form.club_id};this.form.id?await g.put(`/courts/${this.form.id}`,o):await g.post("/courts",o),this.isDialogOpen=!1,await this.fetchCourts()}catch(o){console.error("Error al guardar la cancha:",o)}},confirmDelete(o){this.courtToDelete=o,this.isDeleteDialogOpen=!0},async deleteCourt(){var o,r;try{await g.delete(`/courts/${this.courtToDelete}`),this.courts=this.courts.filter(d=>d.id!==this.courtToDelete),this.isDeleteDialogOpen=!1,this.$q.notify({type:"positive",message:"La cancha ha sido eliminada con \xE9xito.",position:"top"})}catch(d){console.error("Error al eliminar la cancha:",d);const V=((r=(o=d.response)==null?void 0:o.data)==null?void 0:r.detail)||"No se pudo eliminar la cancha. Int\xE9ntalo nuevamente.";this.$q.notify({type:"negative",message:V,position:"bottom"})}},resetForm(){const o=U();this.form={id:null,name:"",price_per_hour:null,enable_price_per_hour:!1,price_per_hour_and_half:null,enable_price_per_hour_and_half:!1,price_per_two_hour:null,enable_price_per_two_hour:!1,is_indoor:!1,club_id:o?o.club_id:null}},goBack(){this.$router.back()}},mounted(){const o=U();o&&(this.form.club_id=o.club_id),this.fetchCourts()}},G={class:"header-content"},K={class:"header-icons"},R={class:"row-number"},J={class:"text-h6"};function j(o,r,d,V,a,u){const E=N("ClubNavigationMenu");return _(),y(P,{view:"hHh lpR fFf",class:"body"},{default:i(()=>[e(L,{elevated:"",class:"bg-primary text-white"},{default:i(()=>[n("div",G,[r[10]||(r[10]=n("div",{class:"greeting"},[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),t(" Listado de canchas ")],-1)),n("div",K,[e(s,{flat:"",round:"",icon:"close",onClick:u.goBack},null,8,["onClick"])])])]),_:1}),e(F,null,{default:i(()=>[r[12]||(r[12]=n("div",{class:"q-mt-xl"},null,-1)),e(H,{class:"court-list"},{default:i(()=>[(_(!0),m(c,null,I(a.courts,(l,M)=>(_(),y(q,{key:l.id,clickable:"",onClick:T=>u.editCourt(l),class:"text-black court-item"},{default:i(()=>[e(w,{avatar:""},{default:i(()=>[n("div",R,p(M+1),1)]),_:2},1024),e(w,null,{default:i(()=>[e(Q,null,{default:i(()=>[t(p(l.name),1)]),_:2},1024),e(Q,{caption:"",class:"text-black"},{default:i(()=>[r[11]||(r[11]=t(" PRECIOS: ")),l.price_per_hour?(_(),m(c,{key:0},[t("1 hora: $"+p(l.price_per_hour),1)],64)):C("",!0),l.price_per_hour_and_half?(_(),m(c,{key:1},[t(" | 1 1/2 hora: $"+p(l.price_per_hour_and_half),1)],64)):C("",!0),l.price_per_two_hour?(_(),m(c,{key:2},[t(" | 2 horas: $"+p(l.price_per_two_hour),1)],64)):C("",!0)]),_:2},1024)]),_:2},1024),e(w,{side:""},{default:i(()=>[e(s,{flat:"",icon:"o_delete",color:"black",size:"lg",onClick:B(T=>u.confirmDelete(l.id),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),e(s,{glossy:"",round:"",size:"lg",color:"black",icon:"add",onClick:u.openCourtDialog,class:"fixed-bottom-right q-mb-xl"},null,8,["onClick"])]),_:1}),e(x,{modelValue:a.isDialogOpen,"onUpdate:modelValue":r[8]||(r[8]=l=>a.isDialogOpen=l)},{default:i(()=>[e(k,{class:"bg-black text-white",style:{"min-width":"400px"}},{default:i(()=>[e(h,null,{default:i(()=>[n("div",J,p(a.dialogTitle),1)]),_:1}),e(h,null,{default:i(()=>[e(f,{modelValue:a.form.name,"onUpdate:modelValue":r[0]||(r[0]=l=>a.form.name=l),label:"Nombre de la cancha",outlined:"",dense:"",color:"white"},null,8,["modelValue"]),e(b,{modelValue:a.form.enable_price_per_hour,"onUpdate:modelValue":r[1]||(r[1]=l=>a.form.enable_price_per_hour=l),label:"\xBFHabilitar precio por hora?",dense:"",color:"white"},null,8,["modelValue"]),e(f,{modelValue:a.form.price_per_hour,"onUpdate:modelValue":r[2]||(r[2]=l=>a.form.price_per_hour=l),modelModifiers:{number:!0},label:"Precio por hora",outlined:"",dense:"",type:"number",disable:!a.form.enable_price_per_hour,color:"white"},null,8,["modelValue","disable"]),e(b,{modelValue:a.form.enable_price_per_hour_and_half,"onUpdate:modelValue":r[3]||(r[3]=l=>a.form.enable_price_per_hour_and_half=l),label:"\xBFHabilitar precio por hora y media?",dense:"",color:"white"},null,8,["modelValue"]),e(f,{modelValue:a.form.price_per_hour_and_half,"onUpdate:modelValue":r[4]||(r[4]=l=>a.form.price_per_hour_and_half=l),modelModifiers:{number:!0},label:"Precio por hora y media",outlined:"",dense:"",type:"number",disable:!a.form.enable_price_per_hour_and_half,color:"white"},null,8,["modelValue","disable"]),e(b,{modelValue:a.form.enable_price_per_two_hour,"onUpdate:modelValue":r[5]||(r[5]=l=>a.form.enable_price_per_two_hour=l),label:"\xBFHabilitar precio por dos horas?",dense:"",color:"white"},null,8,["modelValue"]),e(f,{modelValue:a.form.price_per_two_hour,"onUpdate:modelValue":r[6]||(r[6]=l=>a.form.price_per_two_hour=l),modelModifiers:{number:!0},label:"Precio por dos horas",outlined:"",dense:"",type:"number",disable:!a.form.enable_price_per_two_hour,color:"white"},null,8,["modelValue","disable"]),e(b,{modelValue:a.form.is_indoor,"onUpdate:modelValue":r[7]||(r[7]=l=>a.form.is_indoor=l),label:"\xBFEs indoor?",dense:"",color:"white"},null,8,["modelValue"])]),_:1}),e(v,{align:"right"},{default:i(()=>[D(e(s,{flat:"",label:"Cancelar",color:"red"},null,512),[[O]]),e(s,{flat:"",label:"Guardar",color:"green",onClick:u.saveCourt},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(x,{modelValue:a.isDeleteDialogOpen,"onUpdate:modelValue":r[9]||(r[9]=l=>a.isDeleteDialogOpen=l)},{default:i(()=>[e(k,{class:"bg-dark text-white"},{default:i(()=>[e(h,{class:"text-h6"},{default:i(()=>r[13]||(r[13]=[t(" Confirmar eliminaci\xF3n ")])),_:1}),e(h,null,{default:i(()=>r[14]||(r[14]=[t(" \xBFEst\xE1s seguro de que deseas eliminar esta cancha? Esta acci\xF3n no se puede deshacer. ")])),_:1}),e(v,{align:"right"},{default:i(()=>[D(e(s,{flat:"",label:"Cancelar",color:"primary"},null,512),[[O]]),e(s,{flat:"",label:"Eliminar",color:"negative",onClick:u.deleteCourt},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E)]),_:1})}var se=A(z,[["render",j],["__scopeId","data-v-b58a1a4a"]]);export{se as default};
