import{Q as q}from"./QHeader.8ed599dc.js";import{x as I,r as T,f,h as V,a6 as g,o as c,z as x,A as n,d as o,B as i,a7 as k,a8 as w,Q as L,a as _,t as u,ab as C,aa as Y,e as P,ac as A,a9 as M}from"./index.44d6004f.js";import{Q as E}from"./QDate.4d91a7f7.js";import{Q as F,a as Q}from"./QItem.cafd0d6f.js";import{Q as B}from"./QItemLabel.30a3dfed.js";import{Q as z}from"./QList.8f6ea51c.js";import{Q as H}from"./QPage.069cc100.js";import{Q as R,a as U}from"./QLayout.bdadfe99.js";import{u as W}from"./use-quasar.00fa2d0c.js";import{A as j,a as X}from"./AssociationTopMenu.55ec1150.js";import{N as G}from"./NotificationBell.03dce8ef.js";import{B as J}from"./BannerPromoScrolling.0ad337b6.js";import{b as K}from"./association.a03ae41f.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-render-cache.3aae9b27.js";import"./format.de7e9769.js";import"./QTabs.02ad9b81.js";import"./rtl.276c3f1b.js";import"./QFooter.dec25843.js";import"./QBtnDropdown.9d90b70a.js";import"./QBtnGroup.0f4e86aa.js";import"./QMenu.aa52843c.js";import"./position-engine.d7eef48c.js";import"./selection.ab0d7921.js";import"./haptics.bd260566.js";import"./QBadge.182a08f3.js";import"./api.dcb17b1f.js";const Z={name:"AssociationCalendario",components:{AssociationNavigationMenu:j,AssociationTopMenu:X,NotificationBell:G,BannerPromoScrolling:J},setup(){W();const v=I(),s=T(!0),d=T([]),e=T(null),S=()=>v.push("/dashboard/association"),y=a=>{v.push(`/association/torneos/${a}`)},h=f(()=>{const a=new Set;return d.value.forEach(t=>{if(t.start_date){const l=t.start_date.replace(/-/g,"/");a.add(l)}}),Array.from(a)}),m=f(()=>{const a={};return d.value.forEach(t=>{if(!t.start_date)return;const l=t.start_date.replace(/-/g,"/");a[l]||(a[l]=[]),a[l].push(t)}),a}),D=f(()=>{if(!e.value)return[];const a=typeof e.value=="string"?e.value:null;return a?m.value[a]||[]:[]}),b=f(()=>{if(!e.value)return"";const a=e.value;if(typeof a!="string")return"";const[t,l,p]=a.split("/");return new Date(parseInt(t,10),parseInt(l,10)-1,parseInt(p,10)).toLocaleDateString("es-MX",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),r=a=>{var p;if(!a)return;const t=typeof a=="string"?a:null;if(!t||!((p=m.value[t])!=null&&p.length))return;const l=m.value[t];l.length===1&&y(l[0].id)};return V(async()=>{s.value=!0;try{const a=await K();if(d.value=a.data||[],!e.value&&d.value.length){const t=d.value[0];t!=null&&t.start_date&&(e.value=t.start_date.replace(/-/g,"/"))}if(!e.value){const t=new Date;e.value=`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`}}catch(a){console.error("Error loading tournaments:",a),d.value=[];const t=new Date;e.value=`${t.getFullYear()}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}`}finally{s.value=!1}}),{goToDashboard:S,loading:s,tournaments:d,selectedDate:e,datesWithTournaments:h,dateToTournamentsMap:m,selectedDayTournaments:D,formattedSelectedDate:b,onDateSelected:r,goToTournament:y}}},$={class:"header-content"},ee={class:"greeting"},te={class:"header-icons"},ae={class:"calendar-wrapper"},oe={key:0,class:"q-mt-md"},ne={class:"text-subtitle1 q-mb-sm"},se={key:1,class:"text-grey text-center q-mt-md"};function re(v,s,d,e,S,y){const h=g("NotificationBell"),m=g("AssociationTopMenu"),D=g("BannerPromoScrolling"),b=g("AssociationNavigationMenu");return c(),x(R,{view:"hHh lpR fFf",class:"text-white"},{default:n(()=>[o(q,{elevated:"",class:"text-white"},{default:n(()=>[i("div",$,[i("div",ee,[i("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:s[0]||(s[0]=(...r)=>e.goToDashboard&&e.goToDashboard(...r))}),s[2]||(s[2]=i("span",{class:"text-subtitle1"},"Calendario",-1))]),i("div",te,[o(h),o(m)])]),o(D)]),_:1}),o(U,null,{default:n(()=>[o(H,{class:"q-pa-md"},{default:n(()=>[s[3]||(s[3]=i("div",{class:"text-h5 q-mb-md"},"Calendario de torneos",-1)),s[4]||(s[4]=i("p",{class:"text-caption text-grey q-mb-md"},"Las fechas con torneos aparecen marcadas. Toca una fecha para ver los torneos del d\xEDa.",-1)),e.loading?(c(),x(k,{key:0,flat:"",bordered:"",class:"bg-grey-9 text-white"},{default:n(()=>[o(w,{class:"text-center"},{default:n(()=>[o(L,{color:"primary",size:"40px"})]),_:1})]),_:1})):(c(),_(C,{key:1},[i("div",ae,[o(k,{flat:"",bordered:"",class:"bg-grey-9 text-white calendar-card"},{default:n(()=>[o(w,{class:"q-pa-sm calendar-section"},{default:n(()=>[o(E,{modelValue:e.selectedDate,"onUpdate:modelValue":[s[1]||(s[1]=r=>e.selectedDate=r),e.onDateSelected],minimal:"",mask:"YYYY/MM/DD",events:e.datesWithTournaments,"event-color":"primary",class:"calendar-date bg-transparent text-white"},null,8,["modelValue","events","onUpdate:modelValue"])]),_:1})]),_:1})]),e.selectedDayTournaments.length?(c(),_("div",oe,[i("div",ne,"Torneos el "+u(e.formattedSelectedDate),1),o(z,{bordered:"",class:"rounded-borders bg-transparent"},{default:n(()=>[(c(!0),_(C,null,Y(e.selectedDayTournaments,r=>(c(),x(F,{key:r.id,class:"q-mb-sm bg-grey-9",clickable:"",onClick:N=>e.goToTournament(r.id)},{default:n(()=>[o(Q,{avatar:""},{default:n(()=>[o(A,{name:"o_emoji_events",color:"primary",size:"sm"})]),_:1}),o(Q,null,{default:n(()=>[o(B,{class:"text-weight-medium"},{default:n(()=>[M(u(r.name),1)]),_:2},1024),o(B,{caption:""},{default:n(()=>[M(u(r.start_date)+" \xB7 "+u(r.system),1)]),_:2},1024)]),_:2},1024),o(Q,{side:""},{default:n(()=>[o(A,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):e.selectedDate&&!e.loading?(c(),_("p",se," No hay torneos el "+u(e.formattedSelectedDate)+". ",1)):P("",!0)],64))]),_:1})]),_:1}),o(b)]),_:1})}var Ve=O(Z,[["render",re],["__scopeId","data-v-00a60601"]]);export{Ve as default};
