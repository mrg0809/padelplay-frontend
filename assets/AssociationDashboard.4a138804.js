import{x as F,r as c,h as j,o as m,z as y,A as e,d as a,B as s,D as k,a7 as b,a8 as u,t as f,a as B,e as H,ad as q,ac as g,Q as G,aa as K,ab as X,af as Z,E as D,ae as J,a9 as d,aK as W,_ as Y}from"./index.343c8145.js";import{Q as aa}from"./QHeader.74e9ea06.js";import{Q as T}from"./QItemLabel.05574ce5.js";import{Q as x,a as n}from"./QItem.a116c19a.js";import{Q as ea}from"./QChip.29699f7b.js";import{Q as A}from"./QList.0714427a.js";import{Q as ta}from"./QPage.c2a4954a.js";import{Q as oa,a as la}from"./QLayout.cf8964e2.js";import{Q as sa}from"./QDrawer.6a2f39e2.js";import{C as ra}from"./ClosePopup.cad45813.js";import{u as na}from"./use-quasar.ffcb6c45.js";import{a as h}from"./api.c78da0f8.js";import{N as ia}from"./NotificationBell.764a7663.js";import{B as ua}from"./BannerPromoScrolling.a2fcb367.js";import{A as da}from"./AssociationNavigationMenu.e6134b81.js";import{_ as ca}from"./plugin-vue_export-helper.21dcd24c.js";import"./TouchPan.f80222c1.js";import"./touch.9135741d.js";import"./selection.77230eb1.js";import"./format.de7e9769.js";import"./QBadge.79f62308.js";import"./admin.3e0a6143.js";import"./QTabs.ffe1e49b.js";import"./rtl.276c3f1b.js";import"./QFooter.32609e6a.js";const ma={class:"header-content"},pa={class:"header-icons"},fa={class:"text-h5"},ga={key:0,class:"text-caption"},va={class:"row q-col-gutter-md q-mb-md"},_a={class:"col-12 col-md-6"},ya={class:"col-12 col-md-6"},ba={class:"text-h6"},xa={__name:"AssociationDashboard",setup(ka){const p=F(),v=na(),r=c(null),w=c([]),Q=c(!1),_=c(!1),C=c(!1),z=c(!1),i=c({name:"",description:"",logo_url:""});j(async()=>{await O(),await I()});const O=async()=>{try{const{data:l}=await h.get("/associations/association/organization");r.value=l.data,r.value&&(i.value={name:r.value.name,description:r.value.description||"",logo_url:r.value.logo_url||""})}catch(l){console.error("Error fetching organization:",l)}},I=async()=>{Q.value=!0;try{const{data:l}=await h.get("/padelite/association/tournaments");w.value=l.data||[]}catch(l){console.error("Error fetching tournaments:",l),v.notify({type:"negative",message:"Error al cargar torneos"})}finally{Q.value=!1}},L=async()=>{var l,t;z.value=!0;try{r.value?(await h.put("/associations/association/organization",i.value),v.notify({type:"positive",message:"Organizaci\u0E23\u0E13n actualizada exitosamente"})):(await h.post("/associations/association/organization",i.value),v.notify({type:"positive",message:"Organizaci\u0E23\u0E13n creada exitosamente"})),_.value=!1,await O()}catch(o){console.error("Error saving organization:",o),v.notify({type:"negative",message:((t=(l=o.response)==null?void 0:l.data)==null?void 0:t.detail)||"Error al guardar organizaci\u0E23\u0E13n"})}finally{z.value=!1}},N=()=>{if(!r.value){v.notify({type:"warning",message:"Por favor, crea tu organizaci\u0E23\u0E13n primero"}),_.value=!0;return}p.push("/association/tournaments/create")},M=()=>{p.push("/association/dashboard")},E=()=>{p.push("/association/tournaments")},P=()=>{p.push("/association/revenue")},S=l=>{p.push(`/association/tournaments/${l}`)},R=async()=>{const{storage:l}=await Y(()=>import("./index.343c8145.js").then(function(t){return t.bZ}),["assets/index.343c8145.js","assets/index.bfdcce3b.css"]);await l.removeItem("token"),p.push("/")},U=l=>l?new Date(l).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}):"",$=l=>{switch(l){case"open":return"positive";case"closed":return"negative";case"in_progress":return"warning";default:return"grey"}};return(l,t)=>(m(),y(oa,{view:"hHh lpR fFf",class:"text-white"},{default:e(()=>[a(aa,{elevated:"",class:"text-white"},{default:e(()=>[s("div",ma,[t[7]||(t[7]=s("div",{class:"greeting"},[s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),s("div",{class:"greeting-text"},[s("p",null,"Bienvenido"),s("p",{class:"text-grey"},"Dashboard Asociaci\u0E23\u0E13n")])],-1)),s("div",pa,[a(ia),a(k,{flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=o=>C.value=!0)})])]),a(ua)]),_:1}),a(la,null,{default:e(()=>[a(ta,{class:"q-pa-md"},{default:e(()=>[a(b,{flat:"",bordered:"",class:"q-mb-md bg-transparent text-white"},{default:e(()=>[a(u,null,{default:e(()=>{var o,V;return[s("div",fa,f(((o=r.value)==null?void 0:o.name)||"Mi Organizaci\u0E23\u0E13n"),1),(V=r.value)!=null&&V.description?(m(),B("div",ga,f(r.value.description),1)):H("",!0)]}),_:1}),a(q,null,{default:e(()=>[a(k,{flat:"",color:"primary",label:"Editar Organizaci\u0E23\u0E13n",onClick:t[1]||(t[1]=o=>_.value=!0)})]),_:1})]),_:1}),s("div",va,[s("div",_a,[a(b,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:N},{default:e(()=>[a(u,{class:"text-center"},{default:e(()=>[a(g,{name:"add_circle",size:"48px",color:"primary"}),t[8]||(t[8]=s("div",{class:"text-h6 q-mt-md"},"Crear Torneo Padelite",-1))]),_:1})]),_:1})]),s("div",ya,[a(b,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:E},{default:e(()=>[a(u,{class:"text-center"},{default:e(()=>[a(g,{name:"emoji_events",size:"48px",color:"primary"}),t[9]||(t[9]=s("div",{class:"text-h6 q-mt-md"},"Mis Torneos",-1))]),_:1})]),_:1})])]),a(b,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:e(()=>[a(u,null,{default:e(()=>[...t[10]||(t[10]=[s("div",{class:"text-h6"},"Torneos Recientes",-1)])]),_:1}),Q.value?(m(),y(u,{key:0},{default:e(()=>[a(G,{color:"primary",size:"50px"})]),_:1})):w.value.length>0?(m(),y(A,{key:1,separator:""},{default:e(()=>[(m(!0),B(X,null,K(w.value,o=>(m(),y(x,{key:o.id,clickable:"",onClick:V=>S(o.id)},{default:e(()=>[a(n,null,{default:e(()=>[a(T,null,{default:e(()=>[d(f(o.name),1)]),_:2},1024),a(T,{caption:""},{default:e(()=>[d(f(U(o.start_date)),1)]),_:2},1024)]),_:2},1024),a(n,{side:""},{default:e(()=>[a(ea,{color:$(o.status),"text-color":"white"},{default:e(()=>[d(f(o.status),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(m(),y(u,{key:2},{default:e(()=>[...t[11]||(t[11]=[s("div",{class:"text-center text-grey"}," No hay torneos recientes ",-1)])]),_:1}))]),_:1}),a(Z,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o)},{default:e(()=>[a(b,{style:{"min-width":"400px"},class:"bg-dark text-white"},{default:e(()=>[a(u,null,{default:e(()=>[s("div",ba,f(r.value?"Editar Organizaci\u0E23\u0E13n":"Crear Organizaci\u0E23\u0E13n"),1)]),_:1}),a(u,null,{default:e(()=>[a(D,{modelValue:i.value.name,"onUpdate:modelValue":t[2]||(t[2]=o=>i.value.name=o),label:"Nombre de la Organizaci\u0E23\u0E13n",outlined:"",dense:"",dark:"",class:"q-mb-md"},null,8,["modelValue"]),a(D,{modelValue:i.value.description,"onUpdate:modelValue":t[3]||(t[3]=o=>i.value.description=o),label:"Descripci\u0E23\u0E13n",type:"textarea",outlined:"",dense:"",dark:"",rows:"3",class:"q-mb-md"},null,8,["modelValue"]),a(D,{modelValue:i.value.logo_url,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value.logo_url=o),label:"URL del Logo",outlined:"",dense:"",dark:""},null,8,["modelValue"])]),_:1}),a(q,{align:"right"},{default:e(()=>[J(a(k,{flat:"",label:"Cancelar",color:"grey"},null,512),[[ra]]),a(k,{flat:"",label:"Guardar",color:"primary",onClick:L,loading:z.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(da),a(sa,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o),side:"right",overlay:"",behavior:"mobile",class:"bg-dark text-white"},{default:e(()=>[a(A,null,{default:e(()=>[a(T,{header:""},{default:e(()=>[...t[12]||(t[12]=[d("Men\u0E23\u0E1A",-1)])]),_:1}),a(x,{clickable:"",onClick:M},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"home"})]),_:1}),a(n,null,{default:e(()=>[...t[13]||(t[13]=[d("Dashboard",-1)])]),_:1})]),_:1}),a(x,{clickable:"",onClick:E},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"emoji_events"})]),_:1}),a(n,null,{default:e(()=>[...t[14]||(t[14]=[d("Mis Torneos",-1)])]),_:1})]),_:1}),a(x,{clickable:"",onClick:P},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"attach_money"})]),_:1}),a(n,null,{default:e(()=>[...t[15]||(t[15]=[d("Ingresos",-1)])]),_:1})]),_:1}),a(W),a(x,{clickable:"",onClick:R},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(g,{name:"logout"})]),_:1}),a(n,null,{default:e(()=>[...t[16]||(t[16]=[d("Cerrar Sesi\u0E23\u0E13n",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Ga=ca(xa,[["__scopeId","data-v-5cecdda9"]]);export{Ga as default};
