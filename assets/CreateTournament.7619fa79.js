import{a6 as v,o as u,z as b,A as a,d as t,B as n,a9 as c,D as g,aT as q,a7 as p,a8 as i,E as m,aS as V,a as h,aa as x,ab as U,t as T}from"./index.284c5517.js";import{Q as w}from"./QHeader.54948f97.js";import{Q as f}from"./QSelect.8e127923.js";import{Q}from"./QForm.c0077694.js";import{Q as k}from"./QPage.dfd00166.js";import{Q as S,a as z}from"./QLayout.c9dda368.js";import{n as D}from"./navigationUtils.2c4b9dee.js";import{C as M}from"./ClubNavigationMenu.8d466819.js";import{a as A}from"./api.9de4aea7.js";import{s as F}from"./supabase.d0690741.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.baef4018.js";import"./QItem.756b5f76.js";import"./QItemLabel.b8ba1298.js";import"./QMenu.3b8f6fe8.js";import"./position-engine.0a68525e.js";import"./selection.fdad0a51.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./QTabs.b10b01c4.js";import"./QFooter.d2ce5627.js";const B={name:"CreateTournament",data(){return{form:{name:"",start_date:"",start_time:"",end_date:"",end_time:"",category:"",gender:"",system:"",min_pairs:null,max_pairs:null,price_per_pair:null,prize:"",courts_used:[],details:""},categories:["primera","segunda","tercera","cuarta","quinta","libre","otro","open"],genders:["mixto","varonil","femenil"],systems:["combinado","eliminacion directa","liga","round-robin","retas"],courts:[],selectAllCourts:!1}},async mounted(){const r=localStorage.getItem("token");if(r){const l=r.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=JSON.parse(atob(l));this.clubId=s.club_id||null}const{data:e,error:d}=await F.from("courts").select("id, name").eq("club_id",this.clubId);d||(this.courts=e)},components:{ClubNavigationMenu:M},methods:{toggleSelectAll(r){this.form.courts_used=r?this.courts.map(e=>e.id):[]},async createTournament(){try{const r={...this.form,category:typeof this.form.category=="object"?this.form.category.value:this.form.category,gender:typeof this.form.gender=="object"?this.form.gender.value:this.form.gender,system:typeof this.form.system=="object"?this.form.system.value:this.form.system,club_id:this.clubId},e=await A.post("/tournaments/",r);if(e.status===200)this.$q.notify({type:"positive",message:"Torneo creado exitosamente"}),this.$router.push("/dashboard/club");else throw new Error(e.data.detail||"Error al crear el torneo")}catch(r){this.$q.notify({type:"negative",message:`Error: ${r.message}`})}},goBack(){this.$router.back()},goToDashboard(){D(this.$router,this.userStore)}},computed:{potentialEarnings(){const{price_per_pair:r,max_pairs:e,prize:d}=this.form;return r&&e?r*e-parseFloat(d||0):0},categoriesCapitalized(){return this.categories.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))},gendersCapitalized(){return this.genders.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))},systemsCapitalized(){return this.systems.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))}}},E={class:"header-content"},I={class:"greeting"},P={class:"header-icons"},j={class:"q-mb-sm"},H={class:"q-pa-sm text-white"};function L(r,e,d,y,l,s){const _=v("ClubNavigationMenu");return u(),b(S,{view:"hHh lpR fFf",class:"body text-white"},{default:a(()=>[t(w,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[n("div",E,[n("div",I,[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:e[0]||(e[0]=(...o)=>s.goToDashboard&&s.goToDashboard(...o))}),e[16]||(e[16]=c(" Crear Torneo ",-1))]),n("div",P,[t(g,{flat:"",round:"",icon:"arrow_back",onClick:s.goBack},null,8,["onClick"])])])]),_:1}),t(z,null,{default:a(()=>[t(k,{class:"q-pa-md"},{default:a(()=>[t(Q,{onSubmit:q(s.createTournament,["prevent"])},{default:a(()=>[t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>[...e[17]||(e[17]=[n("h3",null,"Detalles del Torneo",-1)])]),_:1}),t(i,null,{default:a(()=>[t(m,{modelValue:l.form.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.form.name=o),label:"Nombre del Torneo",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.start_date,"onUpdate:modelValue":e[2]||(e[2]=o=>l.form.start_date=o),label:"Fecha de Inicio",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.start_time,"onUpdate:modelValue":e[3]||(e[3]=o=>l.form.start_time=o),label:"Hora de Inicio",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.end_date,"onUpdate:modelValue":e[4]||(e[4]=o=>l.form.end_date=o),label:"Fecha de Fin",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.end_time,"onUpdate:modelValue":e[5]||(e[5]=o=>l.form.end_time=o),label:"Hora de Fin",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(f,{modelValue:l.form.category,"onUpdate:modelValue":e[6]||(e[6]=o=>l.form.category=o),options:s.categoriesCapitalized,label:"Categor\xEDa",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.gender,"onUpdate:modelValue":e[7]||(e[7]=o=>l.form.gender=o),options:s.gendersCapitalized,label:"G\xE9nero",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.system,"onUpdate:modelValue":e[8]||(e[8]=o=>l.form.system=o),options:s.systemsCapitalized,label:"Sistema de Competencia",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(m,{modelValue:l.form.details,"onUpdate:modelValue":e[9]||(e[9]=o=>l.form.details=o),label:"Detalles del Torneo",type:"textarea",outlined:"",dense:"",rows:"3",class:"q-mb-md",hint:"Especificaciones adicionales que se mostrar\xE1n a los jugadores"},null,8,["modelValue"]),t(m,{modelValue:l.form.min_pairs,"onUpdate:modelValue":e[10]||(e[10]=o=>l.form.min_pairs=o),modelModifiers:{number:!0},label:"M\xEDnimo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.max_pairs,"onUpdate:modelValue":e[11]||(e[11]=o=>l.form.max_pairs=o),modelModifiers:{number:!0},label:"M\xE1ximo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>[e[18]||(e[18]=n("h3",null,"Canchas",-1)),n("div",j,[t(V,{modelValue:l.selectAllCourts,"onUpdate:modelValue":[e[12]||(e[12]=o=>l.selectAllCourts=o),s.toggleSelectAll],label:"Seleccionar todas las canchas"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),t(i,null,{default:a(()=>[(u(!0),h(U,null,x(l.courts,o=>(u(),b(V,{key:o.id,modelValue:l.form.courts_used,"onUpdate:modelValue":e[13]||(e[13]=C=>l.form.courts_used=C),label:o.name,val:o.id,outlined:"",dense:"",class:"q-mb-sm"},null,8,["modelValue","label","val"]))),128))]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>[...e[19]||(e[19]=[n("h3",null,"Detalles Financieros",-1)])]),_:1}),t(i,null,{default:a(()=>[t(m,{modelValue:l.form.price_per_pair,"onUpdate:modelValue":e[14]||(e[14]=o=>l.form.price_per_pair=o),modelModifiers:{number:!0},label:"Precio por Pareja",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(m,{modelValue:l.form.prize,"onUpdate:modelValue":e[15]||(e[15]=o=>l.form.prize=o),label:"Premio",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),n("div",H,[n("p",null,[e[20]||(e[20]=n("strong",null,"Ganancias Potenciales:",-1)),c(" "+T(s.potentialEarnings)+" MXN",1)])])]),_:1})]),_:1}),t(g,{type:"submit",label:"Crear Torneo",color:"primary",class:"q-mt-md full-width"})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),t(_)]),_:1})}var ue=N(B,[["render",L],["__scopeId","data-v-481426d9"]]);export{ue as default};
