import{a8 as v,q as u,G as b,H as a,v as t,I as s,ab as c,J as g,aU as q,a9 as p,aa as i,K as n,aT as V,s as x,ac as U,ad as h,x as w}from"./index.a39c4dc5.js";import{Q}from"./QHeader.802cd4d1.js";import{Q as f}from"./QSelect.f0bc1f33.js";import{Q as k}from"./QForm.eeae11f5.js";import{Q as T}from"./QPage.5832dc0d.js";import{Q as S,a as z}from"./QLayout.4dd7e8db.js";import{C as M}from"./ClubNavigationMenu.512cef8b.js";import{a as F}from"./api.92f95132.js";import{s as I}from"./supabase.22abb6aa.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.f13cc075.js";import"./QItem.061e6110.js";import"./QItemLabel.b45ee078.js";import"./QMenu.ebb4d86d.js";import"./position-engine.3e047e6f.js";import"./selection.ce16caff.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./QTabs.adf13df0.js";import"./QFooter.bbb29d47.js";const A={name:"CreateTournament",data(){return{form:{name:"",start_date:"",start_time:"",end_date:"",end_time:"",category:"",gender:"",system:"",min_pairs:null,max_pairs:null,price_per_pair:null,prize:"",courts_used:[],details:""},categories:["primera","segunda","tercera","cuarta","quinta","libre","otro","open"],genders:["mixto","varonil","femenil"],systems:["combinado","eliminacion directa","liga","round-robin","retas"],courts:[],selectAllCourts:!1}},async mounted(){const r=localStorage.getItem("token");if(r){const l=r.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),m=JSON.parse(atob(l));this.clubId=m.club_id||null}const{data:e,error:d}=await I.from("courts").select("id, name").eq("club_id",this.clubId);d||(this.courts=e)},components:{ClubNavigationMenu:M},methods:{toggleSelectAll(r){this.form.courts_used=r?this.courts.map(e=>e.id):[]},async createTournament(){try{const r={...this.form,category:typeof this.form.category=="object"?this.form.category.value:this.form.category,gender:typeof this.form.gender=="object"?this.form.gender.value:this.form.gender,system:typeof this.form.system=="object"?this.form.system.value:this.form.system,club_id:this.clubId},e=await F.post("/tournaments/",r);if(e.status===200)this.$q.notify({type:"positive",message:"Torneo creado exitosamente"}),this.$router.push("/dashboard/club");else throw new Error(e.data.detail||"Error al crear el torneo")}catch(r){this.$q.notify({type:"negative",message:`Error: ${r.message}`})}},goBack(){this.$router.back()}},computed:{potentialEarnings(){const{price_per_pair:r,max_pairs:e,prize:d}=this.form;return r&&e?r*e-parseFloat(d||0):0},categoriesCapitalized(){return this.categories.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))},gendersCapitalized(){return this.genders.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))},systemsCapitalized(){return this.systems.map(r=>({label:r.charAt(0).toUpperCase()+r.slice(1),value:r}))}}},P={class:"header-content"},j={class:"header-icons"},B={class:"q-mb-sm"},E={class:"q-pa-sm text-white"};function D(r,e,d,y,l,m){const _=v("ClubNavigationMenu");return u(),b(S,{view:"hHh lpR fFf",class:"body text-white"},{default:a(()=>[t(Q,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[s("div",P,[e[15]||(e[15]=s("div",{class:"greeting"},[s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),c(" Crear Torneo ")],-1)),s("div",j,[t(g,{flat:"",round:"",icon:"arrow_back",onClick:m.goBack},null,8,["onClick"])])])]),_:1}),t(z,null,{default:a(()=>[t(T,{class:"q-pa-md"},{default:a(()=>[t(k,{onSubmit:q(m.createTournament,["prevent"])},{default:a(()=>[t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>e[16]||(e[16]=[s("h3",null,"Detalles del Torneo",-1)])),_:1}),t(i,null,{default:a(()=>[t(n,{modelValue:l.form.name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.form.name=o),label:"Nombre del Torneo",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(n,{modelValue:l.form.start_date,"onUpdate:modelValue":e[1]||(e[1]=o=>l.form.start_date=o),label:"Fecha de Inicio",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(n,{modelValue:l.form.start_time,"onUpdate:modelValue":e[2]||(e[2]=o=>l.form.start_time=o),label:"Hora de Inicio",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(n,{modelValue:l.form.end_date,"onUpdate:modelValue":e[3]||(e[3]=o=>l.form.end_date=o),label:"Fecha de Fin",type:"date",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(n,{modelValue:l.form.end_time,"onUpdate:modelValue":e[4]||(e[4]=o=>l.form.end_time=o),label:"Hora de Fin",type:"time",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(f,{modelValue:l.form.category,"onUpdate:modelValue":e[5]||(e[5]=o=>l.form.category=o),options:m.categoriesCapitalized,label:"Categor\xEDa",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.gender,"onUpdate:modelValue":e[6]||(e[6]=o=>l.form.gender=o),options:m.gendersCapitalized,label:"G\xE9nero",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(f,{modelValue:l.form.system,"onUpdate:modelValue":e[7]||(e[7]=o=>l.form.system=o),options:m.systemsCapitalized,label:"Sistema de Competencia",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),t(n,{modelValue:l.form.details,"onUpdate:modelValue":e[8]||(e[8]=o=>l.form.details=o),label:"Detalles del Torneo",type:"textarea",outlined:"",dense:"",rows:"3",class:"q-mb-md",hint:"Especificaciones adicionales que se mostrar\xE1n a los jugadores"},null,8,["modelValue"]),t(n,{modelValue:l.form.min_pairs,"onUpdate:modelValue":e[9]||(e[9]=o=>l.form.min_pairs=o),modelModifiers:{number:!0},label:"M\xEDnimo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(n,{modelValue:l.form.max_pairs,"onUpdate:modelValue":e[10]||(e[10]=o=>l.form.max_pairs=o),modelModifiers:{number:!0},label:"M\xE1ximo de Parejas",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>[e[17]||(e[17]=s("h3",null,"Canchas",-1)),s("div",B,[t(V,{modelValue:l.selectAllCourts,"onUpdate:modelValue":[e[11]||(e[11]=o=>l.selectAllCourts=o),m.toggleSelectAll],label:"Seleccionar todas las canchas"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),t(i,null,{default:a(()=>[(u(!0),x(h,null,U(l.courts,o=>(u(),b(V,{key:o.id,modelValue:l.form.courts_used,"onUpdate:modelValue":e[12]||(e[12]=C=>l.form.courts_used=C),label:o.name,val:o.id,outlined:"",dense:"",class:"q-mb-sm"},null,8,["modelValue","label","val"]))),128))]),_:1})]),_:1}),t(p,{flat:"",bordered:"",class:"q-mb-lg bg-transparent text-white"},{default:a(()=>[t(i,null,{default:a(()=>e[18]||(e[18]=[s("h3",null,"Detalles Financieros",-1)])),_:1}),t(i,null,{default:a(()=>[t(n,{modelValue:l.form.price_per_pair,"onUpdate:modelValue":e[13]||(e[13]=o=>l.form.price_per_pair=o),modelModifiers:{number:!0},label:"Precio por Pareja",type:"number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),t(n,{modelValue:l.form.prize,"onUpdate:modelValue":e[14]||(e[14]=o=>l.form.prize=o),label:"Premio",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),s("div",E,[s("p",null,[e[19]||(e[19]=s("strong",null,"Ganancias Potenciales:",-1)),c(" "+w(m.potentialEarnings)+" MXN",1)])])]),_:1})]),_:1}),t(g,{type:"submit",label:"Crear Torneo",color:"primary",class:"q-mt-md full-width"})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),t(_)]),_:1})}var me=N(A,[["render",D],["__scopeId","data-v-5053b780"]]);export{me as default};
