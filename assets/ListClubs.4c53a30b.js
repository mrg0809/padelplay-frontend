import{Q as w}from"./QHeader.54921acb.js";import{r as f,F as x,a7 as D,B as L,w as P,a8 as d,q as l,G as p,H as t,v as e,I as c,K as q,ae as I,s as g,ac as F,ad as V,ab as _,x as b,y as E}from"./index.1566f29d.js";import{Q as S,a as B}from"./QItem.e116c373.js";import{Q as v}from"./QItemLabel.d288c8d5.js";import{Q as T}from"./QList.ebf37292.js";import{Q as M}from"./QPage.fbc29baa.js";import{Q as H,a as R}from"./QLayout.fe0a2002.js";import{u as U}from"./use-quasar.e31cf88f.js";import{g as C}from"./locationUtils.25dc967c.js";import{n as G}from"./navigationUtils.2c4b9dee.js";import{s as h,a as j}from"./clubs.28dcd794.js";import{P as A}from"./PlayerNavigationMenu.902215d2.js";import{N as K}from"./NotificationBell.5ebae4a5.js";import{B as z}from"./BannerPromoScrolling.8596b48b.js";import{D as J}from"./DesktopNavigation.5a81fcbb.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.0df94144.js";import"./QTabs.4f592614.js";import"./rtl.276c3f1b.js";import"./QFooter.4d1d6c3f.js";import"./QBadge.84fd1958.js";import"./api.2af71db3.js";import"./admin.c99b9bfe.js";import"./QTooltip.5a5b7cac.js";import"./position-engine.ad0a1325.js";import"./selection.72ed1d7a.js";const W={components:{PlayerNavigationMenu:A,BannerPromoScrolling:z,NotificationBell:K,DesktopNavigation:J},setup(){const r=f([]),n=x(),y=D(),a=f(""),i=f(!1),m=U();return L(async()=>{i.value=!0;try{console.log("Attempting to get user location...");const s=await C();console.log("User location obtained:",s),r.value=await h("",s),console.log("Nearby clubs found:",r.value)}catch(s){console.error("Geolocation error:",s.message),m.notify({type:"warning",message:"No se pudo obtener tu ubicaci\xF3n. Mostrando clubes generales.",icon:"location_off"});try{console.log("Fetching first 10 clubs as fallback..."),r.value=await j(10),console.log("Fallback clubs found:",r.value)}catch(o){console.error("Error fetching first clubs:",o),m.notify({type:"negative",message:"No se pudieron cargar los clubes."}),r.value=[]}}finally{i.value=!1}}),P(a,async s=>{i.value=!0;let o=null;try{o=await C()}catch(u){console.warn("Could not get location for search query:",s,u.message),m.notify({type:"info",message:"Buscando sin ubicaci\xF3n precisa."})}try{r.value=await h(s,o)}catch(u){console.error("Error al buscar clubes:",u.message),m.notify({type:"negative",message:"Error durante la b\xFAsqueda."}),r.value=[]}finally{i.value=!1}}),{clubs:r,searchClubs:h,searchQuery:a,searching:i,viewClubDetails:s=>{const u=y.query.from==="lessons"?"publiclessons":"reservations";n.push({path:`/club/${s}`,query:{tab:u}})},goBack:()=>{n.back()},goToDashboard:()=>{G(n,userStore)}}}},X={class:"header-content"},Y={class:"greeting"},Z={class:"header-icons"},$={class:"search-bar"},oo={class:"clubs-list"},eo=["src"],ao={key:1,class:"text-center"},to={key:2,class:"text-center"};function so(r,n,y,a,i,m){const k=d("NotificationBell"),N=d("BannerPromoScrolling"),Q=d("PlayerNavigationMenu"),s=d("DesktopNavigation");return l(),p(H,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:t(()=>[e(w,{elevated:"",class:"text-white"},{default:t(()=>[c("div",X,[c("div",Y,[c("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:n[0]||(n[0]=(...o)=>a.goToDashboard&&a.goToDashboard(...o))})]),c("div",Z,[e(k)])]),e(N)]),_:1}),e(R,null,{default:t(()=>[e(M,{class:"q-pa-md"},{default:t(()=>[c("div",$,[e(q,{modelValue:a.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=o=>a.searchQuery=o),filled:"",dense:"",placeholder:"Buscar por nombre o ubicaci\xF3n",onInput:a.searchClubs,class:"text-dark"},{prepend:t(()=>[e(I,{name:"search",class:"text-primary"})]),_:1},8,["modelValue","onInput"])]),c("div",oo,[a.clubs.length>0?(l(),p(T,{key:0,class:"q-mt-md"},{default:t(()=>[(l(!0),g(V,null,F(a.clubs,o=>(l(),p(S,{key:o.id,clickable:"",onClick:u=>a.viewClubDetails(o.id),class:"club-card"},{default:t(()=>[e(B,{avatar:""},{default:t(()=>[c("img",{src:o.logo_url||"/logo.jpeg",alt:"Club Logo",class:"club-logo"},null,8,eo)]),_:2},1024),e(B,null,{default:t(()=>[e(v,{class:"club-name"},{default:t(()=>[_(b(o.name),1)]),_:2},1024),e(v,{caption:""},{default:t(()=>[_(b(o.address),1)]),_:2},1024),o.distance?(l(),p(v,{key:0,caption:""},{default:t(()=>[_(" Distancia: "+b((o.distance/1e3).toFixed(2))+" km ",1)]),_:2},1024)):E("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):a.searching?(l(),g("div",ao,"Buscando...")):(l(),g("div",to,"No se encontraron clubes."))])]),_:1})]),_:1}),e(Q),e(s)]),_:1})}var Io=O(W,[["render",so]]);export{Io as default};
