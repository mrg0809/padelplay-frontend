import{Q as I}from"./QToolbarTitle.ca61c75c.js";import{a5 as P,x as E,r as d,h as S,a6 as w,o as x,z as J,A as o,s as V,d as r,a9 as n,D as g,a7 as f,a8 as v,B as l,t as u,E as _}from"./index.687b44e8.js";import{Q as B}from"./QToolbar.7ee4439e.js";import{Q as R}from"./QHeader.289f0645.js";import{Q as U}from"./QPage.fcc9aae1.js";import{Q as H,a as F}from"./QLayout.30990248.js";import{u as j}from"./use-quasar.ba375293.js";import{u as A}from"./summaryStore.ade2e05f.js";import"./api.1c42dce4.js";import{D as L}from"./DesktopNavigation.642093f4.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./QTooltip.a50ac131.js";import"./position-engine.46674690.js";import"./selection.0f785986.js";const z={components:{DesktopNavigation:L},setup(){const t=P(),a=E(),y=j(),e=d({name:t.query.tournamentName||"Torneo",start_date:t.query.startDate||"",start_time:t.query.startTime||"",price:t.query.pricePerPair||0,club_name:t.query.clubName||"Club"}),s=d(""),m=d(""),p=d(""),i=d(20),q=d(Number(e.value.price)+i.value),C=async()=>{const c=await V.getItem("token");if(c){const N=c.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),D=JSON.parse(atob(N));s.value=D.email||"Jugador 1"}},k=async()=>{if(m.value!==p.value){y.notify({type:"negative",message:"Los emails del Jugador 2 no coinciden."});return}b()},b=()=>{const c={summaryTitle:"Inscripci\xF3n al Torneo",itemDetails:[{label:"Torneo",value:e.value.name},{label:"Fecha",value:e.value.start_date},{label:"Hora",value:e.value.start_time},{label:"Club",value:e.value.club_name},{label:"Jugador 1",value:s.value},{label:"Jugador 2",value:m.value}],baseData:{id:t.query.tournamentId,type:"tournament",price:Number(e.value.price),participants:1,clubId:t.query.clubId,recipient_user_id:t.query.clubUserId||null,tournament_id:t.query.tournamentId,player1_name:s.value,player2_email:m.value},commissionRate:4,showPublicToggle:!1,allowPaymentSplit:!1,extraData:{tournament_id:t.query.tournamentId,player1_name:s.value,player2_email:m.value,tournament_name:e.value.name}};A().setSummaryDetails(c),a.push({name:"OrderSummary"})},T=()=>{a.back()};return S(async()=>{await C()}),{tournament:e,player1Name:s,player2Email:m,player2EmailConfirm:p,commission:i,totalPrice:q,registerTeam:k,goBack:T,proceedToPayment:b}}};function G(t,a,y,e,s,m){const p=w("DesktopNavigation");return x(),J(H,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:o(()=>[r(R,{elevated:"",class:"bg-primary text-white"},{default:o(()=>[r(B,null,{default:o(()=>[r(I,null,{default:o(()=>[...a[2]||(a[2]=[n("Inscripci\xF3n al Torneo",-1)])]),_:1}),r(g,{flat:"",round:"",icon:"arrow_back",onClick:e.goBack,label:"REGRESAR"},null,8,["onClick"])]),_:1})]),_:1}),r(p),r(F,null,{default:o(()=>[r(U,{class:"q-pa-md"},{default:o(()=>[r(f,{class:"q-mb-md"},{default:o(()=>[r(v,null,{default:o(()=>[l("h4",null,u(e.tournament.name),1),l("p",null,[a[3]||(a[3]=l("strong",null,"Fecha:",-1)),n(" "+u(e.tournament.start_date),1)]),l("p",null,[a[4]||(a[4]=l("strong",null,"Hora:",-1)),n(" "+u(e.tournament.start_time),1)]),l("p",null,[a[5]||(a[5]=l("strong",null,"Club:",-1)),n(" "+u(e.tournament.club_name),1)]),l("p",null,[a[6]||(a[6]=l("strong",null,"Precio por pareja:",-1)),n(" $"+u(e.tournament.price),1)]),l("p",null,[a[7]||(a[7]=l("strong",null,"Comisi\xF3n:",-1)),n(" $"+u(e.commission),1)]),l("p",null,[a[8]||(a[8]=l("strong",null,"Total a pagar:",-1)),n(" $"+u(e.totalPrice),1)])]),_:1})]),_:1}),r(f,{class:"q-mb-md"},{default:o(()=>[r(v,null,{default:o(()=>[a[10]||(a[10]=l("h5",null,"Jugadores",-1)),l("p",null,[a[9]||(a[9]=l("strong",null,"Jugador 1:",-1)),n(" "+u(e.player1Name),1)]),r(_,{modelValue:e.player2Email,"onUpdate:modelValue":a[0]||(a[0]=i=>e.player2Email=i),label:"Email del Jugador 2",type:"email",outlined:"",color:"orange","label-color":"orange",standout:"",clearable:"",class:"q-mb-md",required:""},null,8,["modelValue"]),r(_,{modelValue:e.player2EmailConfirm,"onUpdate:modelValue":a[1]||(a[1]=i=>e.player2EmailConfirm=i),label:"Confirmar Email del Jugador 2",type:"email",outlined:"",color:"orange","label-color":"orange",standout:"",clearable:"",class:"q-mb-md",required:""},null,8,["modelValue"])]),_:1})]),_:1}),r(g,{label:"Inscribir Pareja",color:"primary",class:"full-width q-mt-md",onClick:e.registerTeam},null,8,["onClick"])]),_:1})]),_:1})]),_:1})}var na=O(z,[["render",G],["__scopeId","data-v-cd640616"]]);export{na as default};
