import{Q as T}from"./QHeader.54948f97.js";import{bA as x,x as E,r as f,y as M,h as B,a6 as g,o as c,z as N,A as y,d as n,B as o,t as p,a as _,aa as w,ab as b,br as C,aT as S,ac as P}from"./index.284c5517.js";import{Q as D,a as L}from"./QLayout.c9dda368.js";import{u as j}from"./use-quasar.58056b10.js";import{N as I}from"./NotificationBell.113bcbcc.js";import{P as Q}from"./PlayerNavigationMenu.3819ea2c.js";import{P as W}from"./PlayerTopMenu.1f86021b.js";import{B as z}from"./BannerPromoScrolling.c22fe0eb.js";import{a as R}from"./api.9de4aea7.js";import{f as A}from"./dateUtils.08c0966a.js";import{f as F}from"./hourUtils.51636ade.js";import{u as U}from"./useMeta.cf7e61e4.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBadge.d9f1db5b.js";import"./QTabs.b10b01c4.js";import"./rtl.276c3f1b.js";import"./QFooter.d2ce5627.js";import"./QItem.756b5f76.js";import"./QList.541389d3.js";import"./QBtnDropdown.cd4e4664.js";import"./QBtnGroup.b104983d.js";import"./QMenu.3b8f6fe8.js";import"./position-engine.0a68525e.js";import"./selection.fdad0a51.js";import"./tokenUtils.1c8d4e9c.js";import"./haptics.e02b7879.js";import"./admin.b5ca9f0e.js";async function H(r,t,i=500,a={}){var u;if(!r||typeof((u=r.loading)==null?void 0:u.show)!="function"){console.error("runTaskWithMinLoading: Se requiere el objeto $q con el plugin Loading.");try{return await t()}catch(s){throw x.create({type:"negative",message:"Ocurri\xF3 un error inesperado.",caption:s.message}),s}}if(typeof t!="function"){const s=new Error('runTaskWithMinLoading: el par\xE1metro "task" debe ser una funci\xF3n as\xEDncrona.');return console.error(s),Promise.reject(s)}r.loading.show(a);const m=new Promise(s=>setTimeout(s,i));let d,l;const v=t().then(s=>{d=s}).catch(s=>{l=s,console.error("Error durante la ejecuci\xF3n de la tarea en runTaskWithMinLoading:",s),x.create({type:"negative",message:"Fall\xF3 la operaci\xF3n.",caption:(s==null?void 0:s.message)||"Error desconocido"})});try{await Promise.all([v,m])}finally{r.loading.hide()}if(l)throw l;return d}const V=async r=>{try{return(await R.get("/events/player/upcoming_events/")).data}catch(t){return console.error("Error fetching upcoming player events from API:",t),[]}};const $={name:"DashboardPlayer",components:{NotificationBell:I,NavigationMenu:Q,PlayerTopMenu:W,BannerPromoScrolling:z},setup(){U({title:"Dashboard"});const r=j(),t=E(),i=f([]),a=f(null),m=f(!0),d=M(),l=[{name:"Reservar cancha",icon:"edit_calendar",image_url:"/menu/reserva.jpeg",route:"reservas"},{name:"Unirse a un partido",icon:"sports_tennis",image_url:"/menu/unirse.jpeg",route:"unete"},{name:"Torneos",icon:"o_emoji_events",image_url:"/menu/torneo.jpeg",route:"torneos"},{name:"Clases de P\xE1del",icon:"o_school",image_url:"/menu/clases.jpeg",route:"reservas"}],v=async()=>await V(d.userId),u=e=>{e.type==="match"?t.push(`/player/match/${e.id}`):e.type==="lesson"&&e.lesson_type==="private"?t.push(`/player/privatelesson/${e.id}`):e.type==="lesson"&&e.lesson_type==="public"&&t.push(`/player/detallessesion/${e.id}`)},s=e=>{e.name==="Clases de P\xE1del"?t.push({path:`/player/${e.route}`,query:{from:"lessons"}}):t.push(`/player/${e.route}`)};return B(async()=>{m.value=!0,i.value=[];try{const e=await H(r,v,1500);i.value=e||[]}catch(e){console.error("Error fetching upcoming events:",e),i.value=[]}finally{m.value=!1}}),{full_name:a,options:l,upcomingEvents:i,isInitiallyLoading:m,formatDate:A,formatTimeWithoutSeconds:F,goToEventDetails:u,navigateTo:s,userStore:d}}},O={class:"header-content"},G={class:"greeting"},J={class:"greeting-text"},K={class:"text-grey"},X={class:"header-icons"},Y={class:"player-container"},Z={class:"home"},ee={class:"options-grid"},oe=["onClick"],te=["onClick"],se={class:"option-overlay"},ae={class:"overlay-left"},ne={class:"overlay-icon"},re={class:"overlay-text"},ie={class:"overlay-title"},le={class:"next-events-section"},ce={class:"events-container"},me={key:0,class:"empty-events"},de={key:1,class:"events-carousel"},ue=["onClick"],pe={class:"event-info"},_e={class:"event-date"},ve={class:"event-time"},he={class:"event-club"},ge={class:"event-court"};function fe(r,t,i,a,m,d){const l=g("NotificationBell"),v=g("PlayerTopMenu"),u=g("BannerPromoScrolling"),s=g("NavigationMenu");return c(),N(D,{view:"hHh lpR fFf"},{default:y(()=>[n(T,{elevated:"",class:"text-white"},{default:y(()=>[o("div",O,[o("div",G,[t[1]||(t[1]=o("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"},null,-1)),o("div",J,[t[0]||(t[0]=o("p",null,"Bienvenido",-1)),o("p",K,p(a.userStore.fullName),1)])]),o("div",X,[n(l),n(v)])]),n(u)]),_:1}),n(L,null,{default:y(()=>[o("div",Y,[o("div",Z,[o("div",ee,[(c(!0),_(b,null,w(a.options,e=>(c(),_("div",{key:e.name,class:"option-card",style:C({backgroundImage:`url(${e.image_url})`}),onClick:h=>a.navigateTo(e)},[o("div",{class:"option-arrow",onClick:S(h=>a.navigateTo(e),["stop"])},[n(P,{name:"arrow_forward",size:"18px"})],8,te),o("div",se,[o("div",ae,[o("div",ne,[n(P,{name:e.icon,size:"48px"},null,8,["name"])]),o("div",re,[o("div",ie,p(e.name),1)])])])],12,oe))),128))]),o("div",le,[t[3]||(t[3]=o("div",{class:"next-events bg-primary"},[o("h4",{class:"text-black text-weight-bold"},"Mis Eventos:")],-1)),o("div",ce,[a.upcomingEvents.length===0&&!a.isInitiallyLoading?(c(),_("div",me,[...t[2]||(t[2]=[o("div",{class:"q-pa-md text-center text-grey text-weight-bold"}," No tienes pr\xF3ximos eventos registrados. ",-1)])])):(c(),_("div",de,[(c(!0),_(b,null,w(a.upcomingEvents,e=>{var h,k;return c(),_("div",{key:e.id,class:"event-card",onClick:ye=>a.goToEventDetails(e)},[n(P,{name:e.type==="match"?e.tournament_id?"emoji_events":"sports_tennis":"o_school",class:"event-icon material-icons-outlined",size:"35px"},null,8,["name"]),o("div",pe,[o("p",_e,p(a.formatDate(e.match_date||e.lesson_date)),1),o("p",ve,p(a.formatTimeWithoutSeconds(e.match_time||e.lesson_time)),1),o("p",he,p((h=e.clubs)==null?void 0:h.name),1),o("p",ge,p((k=e.courts)==null?void 0:k.name),1)])],8,ue)}),128))]))])])])])]),_:1}),n(s)]),_:1})}var Oe=q($,[["render",fe],["__scopeId","data-v-6407082e"]]);export{Oe as default};
