import{Q as w}from"./QHeader.8ed599dc.js";import{r as p,x,a5 as D,h as L,w as P,a6 as d,o as l,z as f,A as t,d as e,B as c,E as q,ac as E,a as g,aa as I,ab as V,a9 as _,t as b,e as F}from"./index.44d6004f.js";import{Q as S,a as B}from"./QItem.cafd0d6f.js";import{Q as h}from"./QItemLabel.30a3dfed.js";import{Q as T}from"./QList.8f6ea51c.js";import{Q as M}from"./QPage.069cc100.js";import{Q as R,a as U}from"./QLayout.bdadfe99.js";import{u as A}from"./use-quasar.00fa2d0c.js";import{g as C}from"./locationUtils.6d2b6adc.js";import{n as H}from"./navigationUtils.2c4b9dee.js";import{s as v,a as j}from"./clubs.2f0ce716.js";import{P as z}from"./PlayerNavigationMenu.2ea5455a.js";import{N as G}from"./NotificationBell.03dce8ef.js";import{B as J}from"./BannerPromoScrolling.0ad337b6.js";import{D as K}from"./DesktopNavigation.886a6566.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.3e81c9a1.js";import"./QTabs.02ad9b81.js";import"./rtl.276c3f1b.js";import"./QFooter.dec25843.js";import"./QBadge.182a08f3.js";import"./api.dcb17b1f.js";import"./QTooltip.c172b4a3.js";import"./position-engine.d7eef48c.js";import"./selection.ab0d7921.js";const W={components:{PlayerNavigationMenu:z,BannerPromoScrolling:J,NotificationBell:G,DesktopNavigation:K},setup(){const r=p([]),n=x(),y=D(),a=p(""),i=p(!1),m=A();return L(async()=>{i.value=!0;try{console.log("Attempting to get user location...");const s=await C();console.log("User location obtained:",s),r.value=await v("",s),console.log("Nearby clubs found:",r.value)}catch(s){console.error("Geolocation error:",s.message),m.notify({type:"warning",message:"No se pudo obtener tu ubicaci\xF3n. Mostrando clubes generales.",icon:"location_off"});try{console.log("Fetching first 10 clubs as fallback..."),r.value=await j(10),console.log("Fallback clubs found:",r.value)}catch(o){console.error("Error fetching first clubs:",o),m.notify({type:"negative",message:"No se pudieron cargar los clubes."}),r.value=[]}}finally{i.value=!1}}),P(a,async s=>{i.value=!0;let o=null;try{o=await C()}catch(u){console.warn("Could not get location for search query:",s,u.message),m.notify({type:"info",message:"Buscando sin ubicaci\xF3n precisa."})}try{r.value=await v(s,o)}catch(u){console.error("Error al buscar clubes:",u.message),m.notify({type:"negative",message:"Error durante la b\xFAsqueda."}),r.value=[]}finally{i.value=!1}}),{clubs:r,searchClubs:v,searchQuery:a,searching:i,viewClubDetails:s=>{const u=y.query.from==="lessons"?"publiclessons":"reservations";n.push({path:`/club/${s}`,query:{tab:u}})},goBack:()=>{n.back()},goToDashboard:()=>{H(n,userStore)}}}},X={class:"header-content"},Y={class:"greeting"},Z={class:"header-icons"},$={class:"search-bar"},oo={class:"clubs-list"},eo=["src"],ao={key:1,class:"text-center"},to={key:2,class:"text-center"};function so(r,n,y,a,i,m){const k=d("NotificationBell"),N=d("BannerPromoScrolling"),Q=d("PlayerNavigationMenu"),s=d("DesktopNavigation");return l(),f(R,{view:"hHh lpR fFf",class:"text-white"},{default:t(()=>[e(w,{elevated:"",class:"text-white"},{default:t(()=>[c("div",X,[c("div",Y,[c("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:n[0]||(n[0]=(...o)=>a.goToDashboard&&a.goToDashboard(...o))})]),c("div",Z,[e(k)])]),e(N)]),_:1}),e(U,null,{default:t(()=>[e(M,{class:"q-pa-md"},{default:t(()=>[c("div",$,[e(q,{modelValue:a.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=o=>a.searchQuery=o),filled:"",dense:"",placeholder:"Buscar por nombre o ubicaci\xF3n",onInput:a.searchClubs,class:"text-dark"},{prepend:t(()=>[e(E,{name:"search",class:"text-primary",color:"black"})]),_:1},8,["modelValue","onInput"])]),c("div",oo,[a.clubs.length>0?(l(),f(T,{key:0,class:"q-mt-md"},{default:t(()=>[(l(!0),g(V,null,I(a.clubs,o=>(l(),f(S,{key:o.id,clickable:"",onClick:u=>a.viewClubDetails(o.id),class:"club-card"},{default:t(()=>[e(B,{avatar:""},{default:t(()=>[c("img",{src:o.logo_url||"/logo.jpeg",alt:"Club Logo",class:"club-logo"},null,8,eo)]),_:2},1024),e(B,null,{default:t(()=>[e(h,{class:"club-name"},{default:t(()=>[_(b(o.name),1)]),_:2},1024),e(h,{caption:""},{default:t(()=>[_(b(o.address),1)]),_:2},1024),o.distance?(l(),f(h,{key:0,caption:""},{default:t(()=>[_(" Distancia: "+b((o.distance/1e3).toFixed(2))+" km ",1)]),_:2},1024)):F("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):a.searching?(l(),g("div",ao,"Buscando...")):(l(),g("div",to,"No se encontraron clubes."))])]),_:1})]),_:1}),e(Q),e(s)]),_:1})}var qo=O(W,[["render",so]]);export{qo as default};
