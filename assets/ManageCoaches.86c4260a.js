import{F as Z,r as d,B as $,a8 as ee,q as n,G as s,H as r,v as a,I as u,ab as S,J as C,a9 as O,aa as p,s as q,ac as L,ad as N,y as m,K as g,af as ae,ag as oe,ah as le,bC as re,x as w,aK as te}from"./index.1566f29d.js";import{Q as ne}from"./QHeader.54921acb.js";import{Q as P,a as Q}from"./QItem.e116c373.js";import{Q as D}from"./QItemLabel.d288c8d5.js";import{Q as R}from"./QList.ebf37292.js";import{Q as se}from"./QPage.fbc29baa.js";import{Q as ce,a as ie}from"./QLayout.fe0a2002.js";import{Q as de}from"./QSelect.688fe2ed.js";import{C as ue}from"./ClosePopup.1c54f187.js";import{s as me}from"./supabase.0df94144.js";import{n as fe}from"./navigationUtils.2c4b9dee.js";import{u as pe}from"./userStore.54a18707.js";import{C as ge}from"./ClubNavigationMenu.01f0e531.js";import{a as j}from"./api.2af71db3.js";import{_ as _e}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.c4d6d4b9.js";import"./QMenu.72259432.js";import"./position-engine.ad0a1325.js";import"./selection.72ed1d7a.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./pinia.19a50246.js";import"./QTabs.4f592614.js";import"./QFooter.4d1d6c3f.js";const he={name:"ManageCoaches",components:{ClubNavigationMenu:ge},setup(){const v=Z(),o=pe(),F=d([]),e=d([]),k=d([]),y=d(!1),_=d(null),l=d(null),c=d(null),f=d(null),x=d(null),T=d(""),U=d(""),V=d(1),A=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"],B=d(Array(7).fill(null).map(()=>({is_open:!1,start_time:"09:00",end_time:"13:00"}))),H=t=>{console.log("ir al coach"),v.push({name:"CoachProfile",params:{id:t}})},J=()=>{v.back()},E=async()=>{try{const{data:t,error:h}=await me.from("coaches").select(`
                id, 
                name, 
                coach_focus, 
                players(gender, photo_url, category)
            `).eq("club_id",o.clubId).eq("is_active",!0);if(h)throw h;F.value=t.map(i=>{var b,I,M;return{id:i.id,name:i.name,coach_focus:i.coach_focus,gender:((b=i.players)==null?void 0:b.gender)||"Desconocido",photo_url:((I=i.players)==null?void 0:I.photo_url)||null,category:((M=i.players)==null?void 0:M.category)||"No especificado"}})}catch(t){console.error("Error obteniendo coaches:",t.message)}},K=async()=>{try{const t=await j.get("/coaches/search-coaches");e.value=t.data,k.value=t.data}catch(t){console.error("Error obteniendo coaches disponibles:",t.message)}},W=(t,h)=>{h(()=>{const i=t.toLowerCase();k.value=e.value.filter(b=>b.name.toLowerCase().indexOf(i)>-1)})},z=async()=>{await K(),y.value=!0,V.value=1},G=()=>{V.value++},X=()=>{V.value--},Y=async()=>{if(!_.value){console.error("Debes seleccionar un jugador.");return}try{const t={user_id:_.value.user_id,club_id:o.clubId,name:_.value.name,price_for_one:l.value,price_for_two:c.value,price_for_three:f.value,price_for_four:x.value,coach_resume:T.value,coach_focus:U.value,availability:B.value.filter(i=>i.is_open).map((i,b)=>({day:A[b],start_time:i.start_time,end_time:i.end_time}))},h=await j.post("/coaches/add-coach",t);console.log("Coach agregado:",h.data),E(),y.value=!1}catch(t){console.error("Error agregando coach:",t.message)}};return $(E),{goBack:J,coaches:F,isCoachDialogOpen:y,openCoachDialog:z,availableCoaches:e,filteredAvailableCoaches:k,selectedCoach:_,priceForOne:l,priceForTwo:c,priceForThree:f,priceForFour:x,coachResume:T,coachFocus:U,currentStep:V,nextStep:G,previousStep:X,addCoach:Y,filterCoaches:W,daysOfWeek:A,generalSchedule:B,goToCoachProfile:H,goToDashboard:()=>{fe(v,o)}}}},be={class:"header-content"},Ce={class:"greeting"},ve={class:"header-icons"},ke={class:"q-mb-md"},ye=["src"],Ve={class:"text-bold"};function Se(v,o,F,e,k,y){const _=ee("ClubNavigationMenu");return n(),s(ce,{view:"hHh lpR fFf"},{default:r(()=>[a(ne,{elevated:"",class:"bg-primary text-white"},{default:r(()=>[u("div",be,[u("div",Ce,[u("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:o[0]||(o[0]=(...l)=>e.goToDashboard&&e.goToDashboard(...l))}),o[9]||(o[9]=S(" Instructores "))]),u("div",ve,[a(C,{flat:"",round:"",icon:"arrow_back",onClick:e.goBack},null,8,["onClick"])])])]),_:1}),a(ie,null,{default:r(()=>[a(se,{class:"q-pa-md"},{default:r(()=>[u("div",ke,[a(O,{class:"transparent-card"},{default:r(()=>[a(p,null,{default:r(()=>o[10]||(o[10]=[u("h5",{class:"text-white"},"Coaches:",-1)])),_:1}),e.coaches.length>0?(n(),s(p,{key:0},{default:r(()=>[a(R,{bordered:"",separator:""},{default:r(()=>[(n(!0),q(N,null,L(e.coaches,l=>(n(),s(P,{key:l.id},{default:r(()=>[a(Q,{avatar:""},{default:r(()=>[a(re,null,{default:r(()=>[u("img",{src:l.photo_url||"default-avatar.png"},null,8,ye)]),_:2},1024)]),_:2},1024),a(Q,{onClick:c=>e.goToCoachProfile(l.id)},{default:r(()=>[a(D,{class:"text-white"},{default:r(()=>[S(w(l.name),1)]),_:2},1024),l.coach_focus?(n(),s(D,{key:0,class:"text-white"},{default:r(()=>[S(w(l.coach_focus),1)]),_:2},1024)):m("",!0)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):(n(),s(p,{key:1},{default:r(()=>[a(D,{class:"text-center text-black"},{default:r(()=>o[11]||(o[11]=[S(" A\xFAn no tienes coaches disponibles ")])),_:1})]),_:1}))]),_:1})]),a(C,{glossy:"",round:"",size:"lg",color:"black",icon:"add",class:"fixed-bottom-right q-mb-xl",onClick:e.openCoachDialog},null,8,["onClick"])]),_:1})]),_:1}),a(_),a(le,{modelValue:e.isCoachDialogOpen,"onUpdate:modelValue":o[8]||(o[8]=l=>e.isCoachDialogOpen=l),persistent:"","full-width":""},{default:r(()=>[a(O,{class:"bg-black"},{default:r(()=>[a(p,null,{default:r(()=>o[12]||(o[12]=[u("div",{class:"text-h6"},"Agregar Coach",-1)])),_:1}),e.currentStep===1?(n(),s(p,{key:0},{default:r(()=>[a(de,{modelValue:e.selectedCoach,"onUpdate:modelValue":o[1]||(o[1]=l=>e.selectedCoach=l),options:e.filteredAvailableCoaches,"option-label":"name","option-value":"user_id",label:"Buscar jugador",filled:"","use-input":"",onFilter:e.filterCoaches,class:"custom-select"},null,8,["modelValue","options","onFilter"])]),_:1})):m("",!0),e.currentStep===2?(n(),s(p,{key:1},{default:r(()=>[a(g,{modelValue:e.priceForOne,"onUpdate:modelValue":o[2]||(o[2]=l=>e.priceForOne=l),label:"Entrenamiento individual",filled:"",type:"number"},null,8,["modelValue"]),a(g,{modelValue:e.priceForTwo,"onUpdate:modelValue":o[3]||(o[3]=l=>e.priceForTwo=l),label:"Entrenamiento pareja",filled:"",type:"number"},null,8,["modelValue"]),a(g,{modelValue:e.priceForThree,"onUpdate:modelValue":o[4]||(o[4]=l=>e.priceForThree=l),label:"Entrenamiento 3 jugadores",filled:"",type:"number"},null,8,["modelValue"]),a(g,{modelValue:e.priceForFour,"onUpdate:modelValue":o[5]||(o[5]=l=>e.priceForFour=l),label:"Entrenamiento 4 jugadores",filled:"",type:"number"},null,8,["modelValue"])]),_:1})):m("",!0),e.currentStep===3?(n(),s(p,{key:2},{default:r(()=>[a(g,{modelValue:e.coachResume,"onUpdate:modelValue":o[6]||(o[6]=l=>e.coachResume=l),label:"Resumen del Coach",filled:"",type:"textarea"},null,8,["modelValue"]),a(g,{modelValue:e.coachFocus,"onUpdate:modelValue":o[7]||(o[7]=l=>e.coachFocus=l),label:"Enfoque del Coach",filled:"",type:"textarea"},null,8,["modelValue"])]),_:1})):m("",!0),e.currentStep===4?(n(),s(p,{key:3},{default:r(()=>[a(R,{bordered:""},{default:r(()=>[(n(!0),q(N,null,L(e.generalSchedule,(l,c)=>(n(),s(P,{key:c,class:"q-mb-md"},{default:r(()=>[a(Q,null,{default:r(()=>[u("div",Ve,w(e.daysOfWeek[c]),1),a(te,{modelValue:e.generalSchedule[c].is_open,"onUpdate:modelValue":f=>e.generalSchedule[c].is_open=f,label:"\xBFDisponible?",dense:"",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e.generalSchedule[c].is_open?(n(),s(Q,{key:0},{default:r(()=>[a(g,{modelValue:e.generalSchedule[c].start_time,"onUpdate:modelValue":f=>e.generalSchedule[c].start_time=f,label:"Hora de inicio",dense:"",outlined:"",color:"black",class:"text-black",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"]),a(g,{modelValue:e.generalSchedule[c].end_time,"onUpdate:modelValue":f=>e.generalSchedule[c].end_time=f,label:"Hora de fin",dense:"",outlined:"",color:"black",class:"text-black",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):m("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):m("",!0),a(ae,{align:"right"},{default:r(()=>[oe(a(C,{flat:"",label:"Cancelar",color:"red"},null,512),[[ue]]),e.currentStep>1?(n(),s(C,{key:0,flat:"",label:"Anterior",color:"blue",onClick:e.previousStep},null,8,["onClick"])):m("",!0),e.currentStep<4?(n(),s(C,{key:1,flat:"",label:"Siguiente",color:"green",onClick:e.nextStep},null,8,["onClick"])):m("",!0),e.currentStep===4?(n(),s(C,{key:2,flat:"",label:"Agregar",color:"green",onClick:e.addCoach},null,8,["onClick"])):m("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Xe=_e(he,[["render",Se],["__scopeId","data-v-20fa42aa"]]);export{Xe as default};
