import{q as r,G as l,H as a,v as t,I as n,J as f,a9 as x,aa as w,s as k,ae as y,ac as C,ad as Q,ab as m,x as u,aU as v,y as b}from"./index.f6c480ed.js";import{Q as N}from"./QHeader.26d63954.js";import{Q as L,a as _}from"./QItem.fad1ed2a.js";import{Q as h}from"./QItemLabel.f6769314.js";import{Q as R}from"./QList.4a3c2def.js";import{Q as A}from"./QPage.aa7ab5cd.js";import{Q as B,a as I}from"./QLayout.8540ebb4.js";import{a as c}from"./api.2af71db3.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";const E={data(){return{notifications:[]}},async mounted(){await this.fetchNotifications()},methods:{async fetchNotifications(){try{const e=(await c.get("/notifications/")).data;e&&Array.isArray(e.data)&&e.data.length>0?this.notifications=e.data:this.notifications=[]}catch(o){console.error("Error fetching notifications:",o),o.message&&o.message.includes("Mixed Content")&&console.error("Mixed Content Error detected in notifications. API Base URL:",c.defaults.baseURL),console.log("Current API configuration:",{baseURL:c.defaults.baseURL,hostname:window.location.hostname,protocol:window.location.protocol}),this.notifications=[],this.$q.notify({type:"negative",message:"Error al cargar las notificaciones. Por favor intenta m\xE1s tarde.",timeout:3e3})}},async markAsRead(o,e){try{await c.put(`/notifications/${o}/read`),e?this.$router.push(e):this.fetchNotifications()}catch(p){console.error("Error marking notification as read:",p)}},async deleteNotification(o){try{await c.delete(`/notifications/${o}`),this.fetchNotifications()}catch(e){console.error("Error deleting notification:",e)}},formatDate(o){if(!o)return"Fecha desconocida";const e={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(o).toLocaleDateString("es-MX",e)},goBack(){this.$router.back()}}},S={class:"header-content"},D={class:"header-icons"},P={key:0,class:"text-center q-my-md"};function U(o,e,p,$,g,i){return r(),l(B,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:a(()=>[t(N,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[n("div",S,[e[0]||(e[0]=n("div",{class:"greeting"},[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),n("div",D,[t(f,{flat:"",round:"",icon:"close",onClick:i.goBack},null,8,["onClick"])])])]),_:1}),t(I,null,{default:a(()=>[t(A,{class:"q-pa-md"},{default:a(()=>[t(x,{flat:"",bordered:"",class:"text-black"},{default:a(()=>[t(w,null,{default:a(()=>e[1]||(e[1]=[n("div",{class:"text-h6 text-center"},"Notificaciones",-1)])),_:1}),g.notifications.length===0?(r(),k("div",P,[t(y,{name:"o_notifications_off",size:"64px",color:"black"}),e[2]||(e[2]=n("p",null,"No tienes notificaciones pendientes.",-1))])):(r(),l(R,{key:1},{default:a(()=>[(r(!0),k(Q,null,C(g.notifications,s=>(r(),l(L,{key:s.id,clickable:"",class:"notification-item"},{default:a(()=>[t(_,{avatar:"",onClick:d=>i.markAsRead(s.id,s.route)},{default:a(()=>[t(y,{name:"o_notifications",size:"36px",color:"white"})]),_:2},1032,["onClick"]),t(_,{onClick:d=>i.markAsRead(s.id,s.route)},{default:a(()=>[t(h,{class:"text-bold"},{default:a(()=>[m(u(s.title),1)]),_:2},1024),t(h,{caption:""},{default:a(()=>[m(u(s.message),1)]),_:2},1024),t(h,{caption:"",class:"text-grey text-sm"},{default:a(()=>[m(u(i.formatDate(s.created_at)),1)]),_:2},1024)]),_:2},1032,["onClick"]),t(_,{side:""},{default:a(()=>[s.is_read?b("",!0):(r(),l(f,{key:0,flat:"",round:"",icon:"done",color:"white",size:"sm",class:"q-mr-sm",onClick:v(d=>i.markAsRead(s.id,s.route),["stop"])},null,8,["onClick"])),t(f,{flat:"",round:"",icon:"close",color:"white",size:"sm",class:"q-mr-sm",onClick:v(d=>i.deleteNotification(s.id),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}var j=q(E,[["render",U],["__scopeId","data-v-046bcd4e"]]);export{j as default};
