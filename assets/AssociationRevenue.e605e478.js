import{x as P,r as f,f as b,h as S,o as u,z as h,A as t,d as e,B as s,D as A,a7 as c,a8 as m,t as i,a as y,Q as D,aa as $,ab as L,a9 as r,ac as _,aK as V}from"./index.284c5517.js";import{Q as M}from"./QHeader.54948f97.js";import{Q}from"./QItemLabel.b8ba1298.js";import{Q as v,a as l}from"./QItem.756b5f76.js";import{Q as B}from"./QList.541389d3.js";import{Q as j}from"./QPage.dfd00166.js";import{Q as z,a as E}from"./QLayout.c9dda368.js";import{Q as H}from"./QDrawer.f272a462.js";import{u as K}from"./use-quasar.58056b10.js";import{a as U}from"./api.9de4aea7.js";import{N as G}from"./NotificationBell.113bcbcc.js";import{B as J}from"./BannerPromoScrolling.c22fe0eb.js";import{A as O}from"./AssociationNavigationMenu.e45b13d0.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";import"./TouchPan.1fb6dc9f.js";import"./touch.9135741d.js";import"./selection.fdad0a51.js";import"./format.de7e9769.js";import"./QBadge.d9f1db5b.js";import"./admin.b5ca9f0e.js";import"./QTabs.b10b01c4.js";import"./rtl.276c3f1b.js";import"./QFooter.d2ce5627.js";const X={class:"header-content"},Y={class:"header-icons"},Z={class:"row q-col-gutter-md q-mb-md"},ee={class:"col-12 col-md-4"},te={class:"text-h4 text-positive"},ae={class:"col-12 col-md-4"},se={class:"text-h4 text-warning"},oe={class:"col-12 col-md-4"},le={class:"text-h4 text-primary"},ne={key:0,class:"text-center"},ie={class:"text-right"},re={class:"text-positive text-bold"},de={class:"text-caption text-grey"},ue={class:"text-caption"},ce={key:2,class:"text-center text-grey q-pa-md"},me={class:"text-caption q-mb-md"},ve={__name:"AssociationRevenue",setup(pe){const p=P();K();const g=f(!1),d=f([]),x=f(!1),k=f(10),w=b(()=>d.value.reduce((o,a)=>o+a.total_revenue,0)),C=b(()=>d.value.reduce((o,a)=>o+a.commission,0)),R=b(()=>w.value-C.value);S(async()=>{await q()});const q=async()=>{g.value=!0;try{const{data:o}=await U.get("/padelite/association/revenue");d.value=o.data||[],o.commission_rate&&(k.value=o.commission_rate)}catch(o){console.error("Error fetching revenue:",o),d.value=[]}finally{g.value=!1}},I=()=>{p.push("/association/dashboard")},N=()=>{p.push("/association/tournaments")},T=()=>{p.push("/association/revenue")},F=()=>{localStorage.removeItem("token"),p.push("/")};return(o,a)=>(u(),h(z,{view:"hHh lpR fFf",class:"text-white"},{default:t(()=>[e(M,{elevated:"",class:"text-white"},{default:t(()=>[s("div",X,[s("div",{class:"greeting"},[s("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:I}),a[2]||(a[2]=s("div",{class:"greeting-text"},[s("p",null,"Bienvenido"),s("p",{class:"text-grey"},"Ingresos")],-1))]),s("div",Y,[e(G),e(A,{flat:"",round:"",icon:"menu",onClick:a[0]||(a[0]=n=>x.value=!0)})])]),e(J)]),_:1}),e(E,null,{default:t(()=>[e(j,{class:"q-pa-md"},{default:t(()=>[a[9]||(a[9]=s("div",{class:"text-h5 q-mb-md"},"Ingresos de la Asociaci\xF3n",-1)),s("div",Z,[s("div",ee,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[3]||(a[3]=s("div",{class:"text-caption"},"Ingresos Totales",-1)),s("div",te,"$"+i(w.value.toFixed(2)),1)]),_:1})]),_:1})]),s("div",ae,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[4]||(a[4]=s("div",{class:"text-caption"},"Comisi\xF3n PadelPlay",-1)),s("div",se,"$"+i(C.value.toFixed(2)),1)]),_:1})]),_:1})]),s("div",oe,[e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[5]||(a[5]=s("div",{class:"text-caption"},"Ingresos Netos",-1)),s("div",le,"$"+i(R.value.toFixed(2)),1)]),_:1})]),_:1})])]),e(c,{flat:"",bordered:"",class:"bg-transparent text-white q-mb-md"},{default:t(()=>[e(m,null,{default:t(()=>[a[6]||(a[6]=s("div",{class:"text-h6 q-mb-md"},"Ingresos por Torneo",-1)),g.value?(u(),y("div",ne,[e(D,{color:"primary",size:"50px"})])):d.value.length>0?(u(),h(B,{key:1,separator:""},{default:t(()=>[(u(!0),y(L,null,$(d.value,n=>(u(),h(v,{key:n.tournament_id},{default:t(()=>[e(l,null,{default:t(()=>[e(Q,null,{default:t(()=>[r(i(n.tournament_name),1)]),_:2},1024),e(Q,{caption:""},{default:t(()=>[r(i(n.registered_players)+" jugadores inscritos ",1)]),_:2},1024)]),_:2},1024),e(l,{side:""},{default:t(()=>[s("div",ie,[s("div",re,"$"+i(n.total_revenue.toFixed(2)),1),s("div",de,"Comisi\xF3n: $"+i(n.commission.toFixed(2)),1),s("div",ue,"Neto: $"+i(n.net_revenue.toFixed(2)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(u(),y("div",ce," No hay datos de ingresos disponibles "))]),_:1})]),_:1}),e(c,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:t(()=>[e(m,null,{default:t(()=>[a[7]||(a[7]=s("div",{class:"text-h6 q-mb-md"},"Detalles de Pagos",-1)),s("div",me," Tasa de comisi\xF3n de PadelPlay: "+i(k.value)+"% ",1),a[8]||(a[8]=s("div",{class:"text-caption text-grey"}," La comisi\xF3n se calcula sobre cada inscripci\xF3n de jugador ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=n=>x.value=n),side:"right",overlay:"",behavior:"mobile",class:"bg-dark text-white"},{default:t(()=>[e(B,null,{default:t(()=>[e(Q,{header:""},{default:t(()=>[...a[10]||(a[10]=[r("Men\xFA",-1)])]),_:1}),e(v,{clickable:"",onClick:I},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"home"})]),_:1}),e(l,null,{default:t(()=>[...a[11]||(a[11]=[r("Dashboard",-1)])]),_:1})]),_:1}),e(v,{clickable:"",onClick:N},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"emoji_events"})]),_:1}),e(l,null,{default:t(()=>[...a[12]||(a[12]=[r("Mis Torneos",-1)])]),_:1})]),_:1}),e(v,{clickable:"",onClick:T},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"attach_money"})]),_:1}),e(l,null,{default:t(()=>[...a[13]||(a[13]=[r("Ingresos",-1)])]),_:1})]),_:1}),e(V),e(v,{clickable:"",onClick:F},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[e(_,{name:"logout"})]),_:1}),e(l,null,{default:t(()=>[...a[14]||(a[14]=[r("Cerrar Sesi\xF3n",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(O)]),_:1}))}};var Le=W(ve,[["__scopeId","data-v-73e3fc50"]]);export{Le as default};
