import{Q as R}from"./QHeader.fafcae42.js";import{F as $,a9 as J,r as _,j as O,y as K,k as t,G as s,H as a,p as e,I as i,bI as g,s as c,ab as j,ac as Q,J as n,bG as W,aS as F,l as w,q as u,ad as d}from"./index.63dc7e23.js";import{Q as v}from"./QItemLabel.8574eb87.js";import{Q as h}from"./QItem.0839bf79.js";import{Q as X}from"./QList.e359b89a.js";import{Q as Y}from"./QPage.2aaa1d93.js";import{Q as Z,a as ee}from"./QLayout.554612a4.js";import{f as ae}from"./players.e93d5edd.js";import{d as oe}from"./dateUtils.5f24b5d2.js";import{a as te}from"./uploadFileUtils.5e3c94e2.js";import{s as le}from"./shareUtils.eab17df3.js";import{g as D,a as re}from"./countryUtils.f07e8a77.js";import{u as se}from"./userStore.45e0b5eb.js";import{u as ie}from"./useDashboardNavigation.0080d3f5.js";import{f as ne,c as ue,u as ce}from"./community.981ae100.js";import{u as de}from"./use-quasar.a32cc7fc.js";import{P as pe}from"./PlayerNavigationMenu.f00bb1db.js";import{P as fe}from"./PlayerTopMenu.28ec1fba.js";import{N as me}from"./NotificationBell.7dc8c9be.js";import{B as ye}from"./BannerPromoScrolling.c3a2856e.js";import{D as _e}from"./DesktopNavigation.6e047a14.js";import{C as ge}from"./ClubTopMenu.b81f33dc.js";import{C as ve}from"./ClubNavigationMenu.e9a58f98.js";import{_ as he}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.87115abf.js";import"./api.e96a150b.js";import"./index.c98ef0da.js";import"./pinia.53eba05e.js";import"./QTabs.6a3d63d5.js";import"./rtl.276c3f1b.js";import"./QFooter.9d6e02eb.js";import"./QBtnDropdown.db03bdad.js";import"./QBtnGroup.46afdd70.js";import"./QMenu.c6f4e2d1.js";import"./position-engine.fc47911a.js";import"./selection.f8391a45.js";import"./QBadge.4d5b740f.js";import"./admin.48eb7fea.js";import"./QTooltip.3d9e405e.js";const ke={class:"header-content"},be={class:"greeting"},we={class:"header-icons"},Ce={class:"player-container"},Pe={class:"player-profile-layout"},Ne={class:"profile-header"},Qe=["src"],xe={class:"q-ma-none player-name"},Ie={key:1},qe={key:1,class:"follow-section q-my-sm"},je={class:"icon-buttons"},Fe={__name:"PlayerProfile",setup(De){const k=se(),{goToDashboard:x}=ie(),p=$(),I=J(),f=de(),q=_(null),m=_(I.params.userId||k.userId),y=O(()=>m.value===k.userId),C=_(!1),S=_([]),b=_(!1),l=_({first_name:"",last_name:"",birth_date:"",phone:"",gender:"",preferred_hand:"",position:"",photo_url:null,category:"sexta",nationality:""}),E=async()=>{if(!m.value){console.error("No user ID provided for profile"),f.notify({type:"negative",message:"Error: No se pudo cargar el perfil del jugador"}),p.push("/player/inicio");return}const o=await ae(m.value);o?l.value=o:(f.notify({type:"negative",message:"No se pudo cargar la informaci\xF3n del jugador"}),p.push("/player/inicio"))},B=async()=>{if(!y.value)try{const o=await ne(k.userId);S.value=o,C.value=o.some(r=>r.user_id===m.value)}catch(o){console.error("Error loading following status:",o)}},M=async()=>{try{await ue(k.userId,m.value),C.value=!0,f.notify({type:"positive",message:"Ahora sigues a este jugador"})}catch(o){console.error("Error following player:",o),f.notify({type:"negative",message:"Error al seguir al jugador"})}},T=async()=>{try{await ce(k.userId,m.value),C.value=!1,f.notify({type:"positive",message:"Has dejado de seguir a este jugador"})}catch(o){console.error("Error unfollowing player:",o),f.notify({type:"negative",message:"Error al dejar de seguir al jugador"})}},H=()=>{q.value.click()},L=o=>{const r=o.target.files[0];r&&te(r,l.value)},z=()=>{const o="Descubre a este jugador.",r=window.location.href;le(o,r,"Echa un vistazo a este perfil.")},U=()=>{p.push("/player/editarinfo")};function P(o){return o?o.charAt(0).toUpperCase()+o.slice(1):"No especificado"}const V=()=>{p.push("/player/community")},A=()=>{p.push("/player/formasdepago")},G=()=>{p.push("/player/historial")};return K(()=>{I.query.from==="club"&&(b.value=!0),E(),B()}),(o,r)=>(t(),s(Z,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[e(R,{elevated:"",class:"text-white"},{default:a(()=>[i("div",ke,[i("div",be,[i("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:r[0]||(r[0]=(...N)=>g(x)&&g(x)(...N))})]),i("div",we,[e(me),b.value?c("",!0):(t(),s(fe,{key:0})),b.value?(t(),s(ge,{key:1})):c("",!0)])]),e(ye)]),_:1}),b.value?c("",!0):(t(),s(_e,{key:0})),b.value?(t(),s(ve,{key:1})):c("",!0),e(ee,null,{default:a(()=>[e(Y,{class:"q-pa-md"},{default:a(()=>[i("div",Ce,[i("div",Pe,[e(j,{flat:"",bordered:"",class:"text-white profile-card main-profile"},{default:a(()=>[e(Q,{class:"q-pb-none relative"},{default:a(()=>[e(n,{flat:"",round:"",dense:"",icon:"query_stats",class:"absolute-top-left"}),e(n,{flat:"",round:"",dense:"",icon:"o_share",class:"absolute-top-right",onClick:z}),i("div",Ne,[e(W,{size:"120px",class:F(["profile-avatar",{"clickable-avatar":y.value}]),onClick:r[1]||(r[1]=N=>y.value?H():null)},{default:a(()=>[l.value.photo_url?(t(),w("img",{key:0,src:l.value.photo_url,alt:"Foto del jugador"},null,8,Qe)):(t(),s(n,{key:1,icon:"person",flat:"",dense:"",size:"70px"}))]),_:1},8,["class"]),i("h4",xe,u(l.value.first_name),1),y.value?(t(),w("input",{key:0,type:"file",ref_key:"fileInput",ref:q,class:"hidden",accept:"image/*",onChange:L},null,544)):c("",!0)])]),_:1}),e(Q,{class:"profile-details"},{default:a(()=>[e(X,{dense:"",class:"text-white player-info-list"},{default:a(()=>[e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Categor\xEDa: "+u(P(l.value.category)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Fecha de nacimiento: "+u(g(oe)(l.value.birth_date)),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("G\xE9nero: "+u(P(l.value.gender)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Mano dominante: "+u(P(l.value.preferred_hand)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Posici\xF3n en pista: "+u(P(l.value.position)||"No especificado"),1)]),_:1})]),_:1}),l.value.nationality?(t(),s(h,{key:0},{default:a(()=>[e(v,null,{default:a(()=>[r[2]||(r[2]=d(" Nacionalidad: ")),g(D)(l.value.nationality)?(t(),w("span",{key:0,class:F(`fi fi-${g(D)(l.value.nationality)}`),style:{"margin-right":"8px"}},null,2)):(t(),w("span",Ie,u(g(re)(l.value.nationality)),1)),d(" "+u(l.value.nationality),1)]),_:1})]),_:1})):c("",!0)]),_:1}),y.value?(t(),s(n,{key:0,flat:"",dense:"",color:"white",icon:"o_edit",label:"Editar",class:"q-my-sm edit-btn",stack:"",onClick:U})):(t(),w("div",qe,[C.value?(t(),s(n,{key:1,color:"red",label:"Dejar de seguir",icon:"person_remove",class:"unfollow-btn",onClick:T})):(t(),s(n,{key:0,color:"primary",label:"Seguir",icon:"person_add",class:"follow-btn",onClick:M}))]))]),_:1})]),_:1}),y.value?(t(),s(j,{key:0,flat:"",bordered:"",class:"text-white profile-card actions-card"},{default:a(()=>[e(Q,{class:"q-pb-none"},{default:a(()=>[i("div",je,[e(n,{flat:"",dense:"",color:"white",icon:"o_group",label:"Comunidad",class:"q-my-sm action-btn",stack:"",onClick:V}),e(n,{flat:"",dense:"",color:"white",icon:"o_credit_card",label:"ForMas de pago",class:"q-my-sm action-btn",stack:"",onClick:A}),e(n,{flat:"",dense:"",color:"white",icon:"o_history",label:"Historial",class:"q-my-sm action-btn",stack:"",onClick:G})])]),_:1})]),_:1})):c("",!0)])])]),_:1})]),_:1}),e(pe)]),_:1}))}};var va=he(Fe,[["__scopeId","data-v-75c258ae"]]);export{va as default};
