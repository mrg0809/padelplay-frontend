import{F as X,a7 as Y,r as b,B as Z,a8 as $,q as v,G as y,H as l,v as e,I as c,ab as i,J as p,bC as ee,x as f,a9 as h,aa as u,af as V,s as q,ac as B,ad as N,K as g,ag as w,ah as P,aK as ae,y as le}from"./index.a05546fd.js";import{Q as oe}from"./QHeader.3518b267.js";import{Q as re,a as Q}from"./QTabs.b249ec85.js";import{Q as n}from"./QItemLabel.3b94dbaa.js";import{a as te,Q as E}from"./QTabPanel.2d964c2d.js";import{Q as L,a as I}from"./QItem.e38a8786.js";import{Q as M}from"./QList.f969f6a2.js";import{Q as ie}from"./QPage.f01afbe1.js";import{Q as ne,a as se}from"./QLayout.46a61ef3.js";import{C as U}from"./ClosePopup.2375f5fe.js";import{C as de}from"./ClubNavigationMenu.7c7c2736.js";import{n as ue}from"./navigationUtils.2c4b9dee.js";import{a as A}from"./api.2af71db3.js";import{s as ce}from"./supabase.9337c7d0.js";import{_ as fe}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.276c3f1b.js";import"./use-panel.cb708166.js";import"./use-render-cache.770e5fe8.js";import"./selection.a09e7172.js";import"./QFooter.216d5ed8.js";const _e={name:"CoachProfile",components:{ClubNavigationMenu:de},setup(){const x=X(),o=Y(),T=b("info"),a=b({id:null,name:"",photo_url:"",coach_focus:"",resume:"",focus:"",category:"",gender:"",price_for_one:null,price_for_two:null,price_for_three:null,price_for_four:null,schedule:[]}),C=b(!1),k=b(!1),D=b(!1),r=b({resume:"",focus:""}),s=b({price_for_one:null,price_for_two:null,price_for_three:null,price_for_four:null}),_=b([]),O=["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"],G=async()=>{const d=o.params.id;try{const{data:t,error:m}=await ce.from("coaches").select(`
              id, 
              name,
              price_for_one,
              price_for_two,
              price_for_three,
              price_for_four,
              coach_resume,
              coach_focus,
              availability, 
              players(gender, photo_url, category)
            `).eq("id",d).single();if(m)throw m;a.value={id:t.id,name:t.name,photo_url:t.players.photo_url,coach_focus:t.coach_focus,resume:t.coach_resume,focus:t.coach_focus,category:t.players.category,gender:t.players.gender,price_for_one:t.price_for_one,price_for_two:t.price_for_two,price_for_three:t.price_for_three,price_for_four:t.price_for_four,schedule:t.availability||[]},r.value={resume:t.coach_resume,focus:t.coach_focus},s.value={price_for_one:t.price_for_one,price_for_two:t.price_for_two,price_for_three:t.price_for_three,price_for_four:t.price_for_four},_.value=O.map(S=>t.availability.find(W=>W.day===S)||{day:S,is_open:!1,start_time:"",end_time:""})}catch(t){console.error("Error obteniendo datos del coach:",t.message)}},H=()=>{r.value={resume:a.value.resume,focus:a.value.focus},C.value=!0},R=()=>{s.value={price_for_one:a.value.price_for_one,price_for_two:a.value.price_for_two,price_for_three:a.value.price_for_three,price_for_four:a.value.price_for_four},k.value=!0},z=()=>{_.value=O.map(d=>a.value.schedule.find(m=>m.day===d)||{day:d,is_open:!1,start_time:"",end_time:""}),D.value=!0},j=async()=>{try{(await A.put(`coaches/edit-info/${a.value.id}`,{coach_resume:r.value.resume,coach_focus:r.value.focus})).data&&(a.value.resume=r.value.resume,a.value.focus=r.value.focus,C.value=!1)}catch(d){console.error("Error actualizando informaci\xF3n:",d.message)}},F=async()=>{try{(await A.put(`coaches/edit-prices/${a.value.id}`,{price_for_one:s.value.price_for_one,price_for_two:s.value.price_for_two,price_for_three:s.value.price_for_three,price_for_four:s.value.price_for_four})).data&&(a.value.price_for_one=s.value.price_for_one,a.value.price_for_two=s.value.price_for_two,a.value.price_for_three=s.value.price_for_three,a.value.price_for_four=s.value.price_for_four,k.value=!1)}catch(d){console.error("Error actualizando precios:",d.message)}},J=async()=>{try{const d=_.value.filter(m=>m.is_open).map(m=>({day:m.day,start_time:m.start_time,end_time:m.end_time}));(await A.put(`coaches/edit-availability/${a.value.id}`,{availability:d})).data&&(a.value.schedule=d,D.value=!1)}catch(d){console.error("Error actualizando disponibilidad:",d.message)}},K=()=>{x.back()};return Z(G),{coach:a,tab:T,isEditInfoDialogOpen:C,isEditPricesDialogOpen:k,isEditAvailabilityDialogOpen:D,editInfoData:r,editPricesData:s,editAvailabilityData:_,openEditInfoDialog:H,openEditPricesDialog:R,openEditAvailabilityDialog:z,saveInfo:j,savePrices:F,saveAvailability:J,goBack:K,goToDashboard:()=>{ue(x,userStore)}}}},me={class:"header-content"},pe={class:"greeting"},be={class:"header-icons"},ve={class:"q-mb-md text-center"},ge=["src"],ye={class:"text-h5"},he={class:"text-caption text-white"},Ve={class:"text-bold"},De={class:"text-bold"};function Ce(x,o,T,a,C,k){const D=$("ClubNavigationMenu");return v(),y(ne,{view:"hHh lpR fFf",class:"body text-white"},{default:l(()=>[e(oe,{elevated:"",class:"bg-primary text-white"},{default:l(()=>[c("div",me,[c("div",pe,[c("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:o[0]||(o[0]=(...r)=>a.goToDashboard&&a.goToDashboard(...r))}),o[12]||(o[12]=i(" Perfil del Coach "))]),c("div",be,[e(p,{flat:"",round:"",icon:"arrow_back",onClick:a.goBack},null,8,["onClick"])])])]),_:1}),e(se,null,{default:l(()=>[e(ie,{class:"q-pa-md"},{default:l(()=>[c("div",ve,[e(ee,{size:"200px",class:"q-mb-md"},{default:l(()=>[c("img",{src:a.coach.photo_url||"default-avatar.png"},null,8,ge)]),_:1}),c("div",ye,f(a.coach.name),1),c("div",he,f(a.coach.coach_focus),1)]),e(re,{modelValue:a.tab,"onUpdate:modelValue":o[1]||(o[1]=r=>a.tab=r),align:"justify",class:"bg-black text-white"},{default:l(()=>[e(Q,{name:"info",label:"Informaci\xF3n"}),e(Q,{name:"prices",label:"Precios"}),e(Q,{name:"availability",label:"Disponibilidad"})]),_:1},8,["modelValue"]),e(te,{modelValue:a.tab,"onUpdate:modelValue":o[2]||(o[2]=r=>a.tab=r),animated:"",class:"bg-black"},{default:l(()=>[e(E,{name:"info"},{default:l(()=>[e(h,{class:"bg-transparent"},{default:l(()=>[e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>o[13]||(o[13]=[i("Resumen:")])),_:1}),e(n,null,{default:l(()=>[i(f(a.coach.resume),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>o[14]||(o[14]=[i("Categor\xEDa Jugador:")])),_:1}),e(n,null,{default:l(()=>[i(f(a.coach.category),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>o[15]||(o[15]=[i("G\xE9nero:")])),_:1}),e(n,null,{default:l(()=>[i(f(a.coach.gender),1)]),_:1})]),_:1}),e(V,{align:"right"},{default:l(()=>[e(p,{color:"primary",label:"Editar",onClick:a.openEditInfoDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),e(E,{name:"prices"},{default:l(()=>[e(h,{class:"bg-transparent"},{default:l(()=>[e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>o[16]||(o[16]=[i("Individual:")])),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_one),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>o[17]||(o[17]=[i("Pareja:")])),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_two),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>o[18]||(o[18]=[i("3 personas:")])),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_three),1)]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(n,{class:"text-bold"},{default:l(()=>o[19]||(o[19]=[i("4 personas:")])),_:1}),e(n,null,{default:l(()=>[i("$ "+f(a.coach.price_for_four),1)]),_:1})]),_:1}),e(V,{align:"right"},{default:l(()=>[e(p,{color:"primary",label:"Editar",onClick:a.openEditPricesDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1}),e(E,{name:"availability"},{default:l(()=>[e(h,{class:"bg-transparent"},{default:l(()=>[e(u,null,{default:l(()=>[e(M,{bordered:""},{default:l(()=>[(v(!0),q(N,null,B(a.coach.schedule,(r,s)=>(v(),y(L,{key:s,class:"q-mb-md"},{default:l(()=>[e(I,null,{default:l(()=>[c("div",Ve,f(r.day),1),r.start_time&&r.end_time?(v(),y(n,{key:0},{default:l(()=>[i(f(r.start_time)+" - "+f(r.end_time),1)]),_:2},1024)):(v(),y(n,{key:1},{default:l(()=>o[20]||(o[20]=[i(" No disponible ")])),_:1}))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(V,{align:"right"},{default:l(()=>[e(p,{color:"primary",label:"Editar",onClick:a.openEditAvailabilityDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(P,{modelValue:a.isEditInfoDialogOpen,"onUpdate:modelValue":o[5]||(o[5]=r=>a.isEditInfoDialogOpen=r)},{default:l(()=>[e(h,{class:"bg-black text-white"},{default:l(()=>[e(u,null,{default:l(()=>o[21]||(o[21]=[c("div",{class:"text-h6"},"Editar Informaci\xF3n",-1)])),_:1}),e(u,null,{default:l(()=>[e(g,{modelValue:a.editInfoData.resume,"onUpdate:modelValue":o[3]||(o[3]=r=>a.editInfoData.resume=r),label:"Resumen",filled:"",type:"textarea"},null,8,["modelValue"]),e(g,{modelValue:a.editInfoData.focus,"onUpdate:modelValue":o[4]||(o[4]=r=>a.editInfoData.focus=r),label:"Enfoque",filled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(V,{align:"right"},{default:l(()=>[w(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[U]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:a.saveInfo},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{modelValue:a.isEditPricesDialogOpen,"onUpdate:modelValue":o[10]||(o[10]=r=>a.isEditPricesDialogOpen=r)},{default:l(()=>[e(h,{class:"bg-black text-white"},{default:l(()=>[e(u,null,{default:l(()=>o[22]||(o[22]=[c("div",{class:"text-h6"},"Editar Precios",-1)])),_:1}),e(u,null,{default:l(()=>[e(g,{modelValue:a.editPricesData.price_for_one,"onUpdate:modelValue":o[6]||(o[6]=r=>a.editPricesData.price_for_one=r),label:"Individual",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:a.editPricesData.price_for_two,"onUpdate:modelValue":o[7]||(o[7]=r=>a.editPricesData.price_for_two=r),label:"Pareja",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:a.editPricesData.price_for_three,"onUpdate:modelValue":o[8]||(o[8]=r=>a.editPricesData.price_for_three=r),label:"3 personas",filled:"",type:"number"},null,8,["modelValue"]),e(g,{modelValue:a.editPricesData.price_for_four,"onUpdate:modelValue":o[9]||(o[9]=r=>a.editPricesData.price_for_four=r),label:"4 personas",filled:"",type:"number"},null,8,["modelValue"])]),_:1}),e(V,{align:"right"},{default:l(()=>[w(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[U]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:a.savePrices},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{modelValue:a.isEditAvailabilityDialogOpen,"onUpdate:modelValue":o[11]||(o[11]=r=>a.isEditAvailabilityDialogOpen=r)},{default:l(()=>[e(h,{class:"bg-black text-white"},{default:l(()=>[e(u,null,{default:l(()=>o[23]||(o[23]=[c("div",{class:"text-h6"},"Editar Disponibilidad",-1)])),_:1}),e(u,null,{default:l(()=>[e(M,{bordered:""},{default:l(()=>[(v(!0),q(N,null,B(a.editAvailabilityData,(r,s)=>(v(),y(L,{key:s,class:"q-mb-md"},{default:l(()=>[e(I,null,{default:l(()=>[c("div",De,f(r.day),1),e(ae,{modelValue:r.is_open,"onUpdate:modelValue":_=>r.is_open=_,label:"\xBFDisponible?",dense:"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),r.is_open?(v(),y(I,{key:0},{default:l(()=>[e(g,{modelValue:r.start_time,"onUpdate:modelValue":_=>r.start_time=_,label:"Hora de inicio",filled:"",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"]),e(g,{modelValue:r.end_time,"onUpdate:modelValue":_=>r.end_time=_,label:"Hora de fin",filled:"",mask:"time",rules:["time"]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):le("",!0)]),_:2},1024))),128))]),_:1})]),_:1}),e(V,{align:"right"},{default:l(()=>[w(e(p,{flat:"",label:"Cancelar",color:"red"},null,512),[[U]]),e(p,{flat:"",label:"Guardar",color:"green",onClick:a.saveAvailability},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(D)]),_:1})}var Fe=fe(_e,[["render",Ce],["__scopeId","data-v-6cd601ef"]]);export{Fe as default};
