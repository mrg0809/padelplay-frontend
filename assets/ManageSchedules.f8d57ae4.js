import{a8 as k,q as i,G as d,H as a,v as o,I as m,ab as v,J as f,a9 as S,aa as b,s as V,ac as Q,ad as w,y as h,af as x,x as U,aK as H,K as C}from"./index.56341446.js";import{Q as q}from"./QHeader.1db0ddd8.js";import{Q as B}from"./QSelect.7cfff3c2.js";import{Q as M,a as y}from"./QItem.a7fd1b44.js";import{Q as N}from"./QList.5d56ae56.js";import{Q as D}from"./QPage.69414caa.js";import{Q as E,a as A}from"./QLayout.5f4c29cc.js";import{C as I}from"./ClubNavigationMenu.b4cd5f7c.js";import{a as p}from"./api.2af71db3.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.ea73a0aa.js";import"./QItemLabel.361a6fb7.js";import"./QMenu.7fbf39fd.js";import"./position-engine.2b476e0a.js";import"./selection.1524277a.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./QTabs.de963594.js";import"./QFooter.ef734339.js";const O={data(){return{selectedCourt:null,courts:[],generalSchedule:Array(7).fill(null).map(()=>({is_open:!1,opening_time:"06:00",closing_time:"23:00"})),daysOfWeek:["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado","Domingo"],confirmDialogVisible:!1,blockCourtDialogVisible:!1,blockCourtData:{date:null,start_time:null,end_time:null,reason:""},holidayData:{date:null,reason:""}}},components:{ClubNavigationMenu:I},methods:{async fetchCourts(){try{const s=await p.get("/courts/");this.courts=s.data.map(t=>({id:t.id,name:t.name}))}catch(s){console.error("Error al obtener las canchas:",s)}},async onCourtChange(){if(this.generalSchedule=Array(7).fill(null).map(()=>({is_open:!1,opening_time:null,closing_time:null})),!!this.selectedCourt)try{const t=(await p.get("/clubs/schedules",{params:{court_id:this.selectedCourt}})).data.data.filter(l=>l.court_id===this.selectedCourt.id);t.length>0&&t.forEach(l=>{const c=l.day_of_week;this.generalSchedule[c]={is_open:l.opening_time!==null&&l.closing_time!==null,opening_time:l.opening_time||"06:00",closing_time:l.closing_time||"23:00"}})}catch(s){console.error("Error al obtener los horarios:",s)}},async saveOrUpdateSchedules(){var s,t,l,c;if(!this.selectedCourt){this.$q.notify({type:"negative",message:"Por favor, selecciona una cancha"});return}try{const e=this.generalSchedule.map((n,_)=>({day_of_week:_,opening_time:n.is_open?n.opening_time:null,closing_time:n.is_open?n.closing_time:null,court_id:this.selectedCourt}));((t=(s=(await p.get("/clubs/schedules",{params:{court_id:this.selectedCourt}})).data)==null?void 0:s.data)==null?void 0:t.length)>0?(await p.put("/clubs/schedules",{court_id:this.selectedCourt,schedules:e}),this.$q.notify({type:"positive",message:"Horarios actualizados exitosamente"})):(await p.post("/clubs/schedules",{schedules:e}),this.$q.notify({type:"positive",message:"Horarios creados exitosamente"}))}catch(e){console.error("Error al guardar los horarios:",((c=(l=e.response)==null?void 0:l.data)==null?void 0:c.detail)||e.message),this.$q.notify({type:"negative",message:"Error al guardar los horarios"})}},goBack(){this.$router.back()}},mounted(){this.fetchCourts()}},P={class:"header-content"},F={class:"header-icons"},G={class:"text-bold"};function J(s,t,l,c,e,g){const n=k("ClubNavigationMenu");return i(),d(E,{view:"hHh lpR fFf",class:"body text-black"},{default:a(()=>[o(q,{elevated:"",class:"bg-primary text-white"},{default:a(()=>[m("div",P,[t[1]||(t[1]=m("div",{class:"greeting"},[m("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),v(" Horarios ")],-1)),m("div",F,[o(f,{flat:"",round:"",icon:"close",onClick:g.goBack},null,8,["onClick"])])])]),_:1}),o(A,null,{default:a(()=>[o(D,{class:"q-pa-md"},{default:a(()=>[o(S,{class:"courts-card text-black"},{default:a(()=>[o(b,null,{default:a(()=>[o(B,{modelValue:e.selectedCourt,"onUpdate:modelValue":[t[0]||(t[0]=_=>e.selectedCourt=_),g.onCourtChange],options:e.courts,"option-label":"name","option-value":"id",label:"Selecciona una cancha",outlined:"",dense:"",class:"custom-select"},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1}),e.selectedCourt?(i(),d(b,{key:0},{default:a(()=>[o(N,{bordered:""},{default:a(()=>[(i(!0),V(w,null,Q(e.generalSchedule,(_,r)=>(i(),d(M,{key:r,class:"q-mb-md"},{default:a(()=>[o(y,null,{default:a(()=>[m("div",G,U(e.daysOfWeek[r]),1),o(H,{modelValue:e.generalSchedule[r].is_open,"onUpdate:modelValue":u=>e.generalSchedule[r].is_open=u,label:"\xBFAbierto?",dense:"",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e.generalSchedule[r].is_open?(i(),d(y,{key:0},{default:a(()=>[o(C,{modelValue:e.generalSchedule[r].opening_time,"onUpdate:modelValue":u=>e.generalSchedule[r].opening_time=u,label:"Hora de Apertura",dense:"",outlined:"",color:"black",class:"text-black"},null,8,["modelValue","onUpdate:modelValue"]),o(C,{modelValue:e.generalSchedule[r].closing_time,"onUpdate:modelValue":u=>e.generalSchedule[r].closing_time=u,label:"Hora de Cierre",dense:"",outlined:"",color:"black",class:"text-black"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):h("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):h("",!0),e.selectedCourt?(i(),d(x,{key:1,align:"right"},{default:a(()=>[o(f,{label:"Guardar Cambios",color:"primary",onClick:g.saveOrUpdateSchedules},null,8,["onClick"])]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1}),o(n)]),_:1})}var ce=L(O,[["render",J],["__scopeId","data-v-159512b3"]]);export{ce as default};
