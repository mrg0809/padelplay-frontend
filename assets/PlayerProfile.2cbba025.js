import{Q as $}from"./QHeader.289f0645.js";import{y as G,x as O,a5 as J,r as _,f as K,h as W,o as t,z as r,A as a,d as e,B as i,bN as g,e as c,a7 as j,a8 as x,D as n,bE as X,aP as D,a as w,t as u,a9 as d}from"./index.687b44e8.js";import{Q as v}from"./QItemLabel.bbebea39.js";import{Q as h}from"./QItem.eb9291fb.js";import{Q as Y}from"./QList.1288e946.js";import{Q as Z}from"./QPage.fcc9aae1.js";import{Q as ee,a as ae}from"./QLayout.30990248.js";import{f as oe}from"./players.d11af278.js";import{d as te}from"./dateUtils.8e31f283.js";import{a as le}from"./uploadFileUtils.d5bf7972.js";import{s as se}from"./shareUtils.25b14e2f.js";import{g as F,a as re}from"./countryUtils.f07e8a77.js";import{u as ie}from"./useDashboardNavigation.a26a0a3f.js";import{f as ne,c as ue,u as ce}from"./community.ba831a8d.js";import{u as de}from"./use-quasar.ba375293.js";import{P as pe}from"./PlayerNavigationMenu.1a7d2e68.js";import{P as fe}from"./PlayerTopMenu.269cc714.js";import{N as me}from"./NotificationBell.9fdba392.js";import{B as ye}from"./BannerPromoScrolling.1700e538.js";import{D as _e}from"./DesktopNavigation.642093f4.js";import{C as ge}from"./ClubTopMenu.119e23e8.js";import{C as ve}from"./ClubNavigationMenu.44af5278.js";import{_ as he}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.66aa98e2.js";import"./api.1c42dce4.js";import"./QTabs.979bee57.js";import"./rtl.276c3f1b.js";import"./QFooter.b7b22f15.js";import"./QBtnDropdown.17175f2e.js";import"./QBtnGroup.6b9d07ee.js";import"./QMenu.df8dfc7c.js";import"./position-engine.46674690.js";import"./selection.0f785986.js";import"./haptics.57409bd0.js";import"./QBadge.0c3a126f.js";import"./QTooltip.a50ac131.js";const ke={class:"header-content"},be={class:"greeting"},we={class:"header-icons"},Ce={class:"player-container"},Pe={class:"player-profile-layout"},Ne={class:"profile-header"},xe=["src"],Qe={class:"q-ma-none player-name"},Ie={key:1},qe={key:1,class:"follow-section q-my-sm"},je={class:"icon-buttons"},De={__name:"PlayerProfile",setup(Fe){const k=G(),{goToDashboard:Q}=ie(),p=O(),I=J(),f=de(),q=_(null),m=_(I.params.userId||k.userId),y=K(()=>m.value===k.userId),C=_(!1),E=_([]),b=_(!1),l=_({first_name:"",last_name:"",birth_date:"",phone:"",gender:"",preferred_hand:"",position:"",photo_url:null,category:"sexta",nationality:""}),B=async()=>{if(!m.value){console.error("No user ID provided for profile"),f.notify({type:"negative",message:"Error: No se pudo cargar el perfil del jugador"}),p.push("/player/inicio");return}const o=await oe(m.value);o?l.value=o:(f.notify({type:"negative",message:"No se pudo cargar la informaci\xF3n del jugador"}),p.push("/player/inicio"))},S=async()=>{if(!y.value)try{const o=await ne(k.userId);E.value=o,C.value=o.some(s=>s.user_id===m.value)}catch(o){console.error("Error loading following status:",o)}},M=async()=>{try{await ue(k.userId,m.value),C.value=!0,f.notify({type:"positive",message:"Ahora sigues a este jugador"})}catch(o){console.error("Error following player:",o),f.notify({type:"negative",message:"Error al seguir al jugador"})}},T=async()=>{try{await ce(k.userId,m.value),C.value=!1,f.notify({type:"positive",message:"Has dejado de seguir a este jugador"})}catch(o){console.error("Error unfollowing player:",o),f.notify({type:"negative",message:"Error al dejar de seguir al jugador"})}},z=()=>{q.value.click()},L=o=>{const s=o.target.files[0];s&&le(s,l.value)},H=()=>{const o="Descubre a este jugador.",s=window.location.href;se(o,s,"Echa un vistazo a este perfil.")},U=()=>{p.push("/player/editarinfo")};function P(o){return o?o.charAt(0).toUpperCase()+o.slice(1):"No especificado"}const V=()=>{p.push("/player/community")},A=()=>{p.push("/player/formasdepago")},R=()=>{p.push("/player/historial")};return W(()=>{I.query.from==="club"&&(b.value=!0),B(),S()}),(o,s)=>(t(),r(ee,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[e($,{elevated:"",class:"text-white"},{default:a(()=>[i("div",ke,[i("div",be,[i("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:s[0]||(s[0]=(...N)=>g(Q)&&g(Q)(...N))})]),i("div",we,[e(me),b.value?c("",!0):(t(),r(fe,{key:0})),b.value?(t(),r(ge,{key:1})):c("",!0)])]),e(ye)]),_:1}),b.value?c("",!0):(t(),r(_e,{key:0})),b.value?(t(),r(ve,{key:1})):c("",!0),e(ae,null,{default:a(()=>[e(Z,{class:"q-pa-md"},{default:a(()=>[i("div",Ce,[i("div",Pe,[e(j,{flat:"",bordered:"",class:"text-white profile-card main-profile"},{default:a(()=>[e(x,{class:"q-pb-none relative"},{default:a(()=>[e(n,{flat:"",round:"",dense:"",icon:"query_stats",class:"absolute-top-left"}),e(n,{flat:"",round:"",dense:"",icon:"o_share",class:"absolute-top-right",onClick:H}),i("div",Ne,[e(X,{size:"120px",class:D(["profile-avatar",{"clickable-avatar":y.value}]),onClick:s[1]||(s[1]=N=>y.value?z():null)},{default:a(()=>[l.value.photo_url?(t(),w("img",{key:0,src:l.value.photo_url,alt:"Foto del jugador"},null,8,xe)):(t(),r(n,{key:1,icon:"person",flat:"",dense:"",size:"70px"}))]),_:1},8,["class"]),i("h4",Qe,u(l.value.first_name),1),y.value?(t(),w("input",{key:0,type:"file",ref_key:"fileInput",ref:q,class:"hidden",accept:"image/*",onChange:L},null,544)):c("",!0)])]),_:1}),e(x,{class:"profile-details"},{default:a(()=>[e(Y,{dense:"",class:"text-white player-info-list"},{default:a(()=>[e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Categor\xEDa: "+u(P(l.value.category)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Fecha de nacimiento: "+u(g(te)(l.value.birth_date)),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("G\xE9nero: "+u(P(l.value.gender)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Mano dominante: "+u(P(l.value.preferred_hand)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[d("Posici\xF3n en pista: "+u(P(l.value.position)||"No especificado"),1)]),_:1})]),_:1}),l.value.nationality?(t(),r(h,{key:0},{default:a(()=>[e(v,null,{default:a(()=>[s[2]||(s[2]=d(" Nacionalidad: ",-1)),g(F)(l.value.nationality)?(t(),w("span",{key:0,class:D(`fi fi-${g(F)(l.value.nationality)}`),style:{"margin-right":"8px"}},null,2)):(t(),w("span",Ie,u(g(re)(l.value.nationality)),1)),d(" "+u(l.value.nationality),1)]),_:1})]),_:1})):c("",!0)]),_:1}),y.value?(t(),r(n,{key:0,flat:"",dense:"",color:"white",icon:"o_edit",label:"Editar",class:"q-my-sm edit-btn",stack:"",onClick:U})):(t(),w("div",qe,[C.value?(t(),r(n,{key:1,color:"red",label:"Dejar de seguir",icon:"person_remove",class:"unfollow-btn",onClick:T})):(t(),r(n,{key:0,color:"primary",label:"Seguir",icon:"person_add",class:"follow-btn",onClick:M}))]))]),_:1})]),_:1}),y.value?(t(),r(j,{key:0,flat:"",bordered:"",class:"text-white profile-card actions-card"},{default:a(()=>[e(x,{class:"q-pb-none"},{default:a(()=>[i("div",je,[e(n,{flat:"",dense:"",color:"white",icon:"o_group",label:"Comunidad",class:"q-my-sm action-btn",stack:"",onClick:V}),e(n,{flat:"",dense:"",color:"white",icon:"o_credit_card",label:"ForMas de pago",class:"q-my-sm action-btn",stack:"",onClick:A}),e(n,{flat:"",dense:"",color:"white",icon:"o_history",label:"Historial",class:"q-my-sm action-btn",stack:"",onClick:R})])]),_:1})]),_:1})):c("",!0)])])]),_:1})]),_:1}),e(pe)]),_:1}))}};var ya=he(De,[["__scopeId","data-v-75c258ae"]]);export{ya as default};
