import{Q as C}from"./QHeader.ba31fbfc.js";import{r as g,F as w,B as x,w as L,a8 as d,q as c,G as p,H as o,v as a,I as i,K as D,ae as P,s as _,ac as I,ad as q,ab as v,x as b,y as F}from"./index.51c094bf.js";import{Q as V,a as Q}from"./QItem.95562f69.js";import{Q as y}from"./QItemLabel.33c35bcd.js";import{Q as E}from"./QList.c488c87f.js";import{Q as M}from"./QPage.f861492a.js";import{Q as S,a as H}from"./QLayout.f5a48b53.js";import{u as U}from"./use-quasar.4acbf4df.js";import{g as N}from"./locationUtils.25dc967c.js";import{s as h,a as G}from"./clubs.fa0e7bcc.js";import{P as R}from"./PlayerNavigationMenu.bceade23.js";import{N as j}from"./NotificationBell.b96590cb.js";import{B as A}from"./BannerPromoScrolling.337b6ba8.js";import{D as K}from"./DesktopNavigation.9b1554c2.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.f1c0aad7.js";import"./QTabs.b1f69d81.js";import"./rtl.276c3f1b.js";import"./QFooter.db896c5f.js";import"./QBadge.9c0b45a2.js";import"./api.92f95132.js";import"./admin.dfdc6f99.js";import"./QTooltip.9cd83b24.js";import"./position-engine.f17d5623.js";import"./selection.563c686b.js";const z={components:{PlayerNavigationMenu:R,BannerPromoScrolling:A,NotificationBell:j,DesktopNavigation:K},setup(){const s=g([]),l=w(),f=g(""),e=g(!1),u=U();return x(async()=>{e.value=!0;try{console.log("Attempting to get user location...");const t=await N();console.log("User location obtained:",t),s.value=await h("",t),console.log("Nearby clubs found:",s.value)}catch(t){console.error("Geolocation error:",t.message),u.notify({type:"warning",message:"No se pudo obtener tu ubicaci\xF3n. Mostrando clubes generales.",icon:"location_off"});try{console.log("Fetching first 10 clubs as fallback..."),s.value=await G(10),console.log("Fallback clubs found:",s.value)}catch(n){console.error("Error fetching first clubs:",n),u.notify({type:"negative",message:"No se pudieron cargar los clubes."}),s.value=[]}}finally{e.value=!1}}),L(f,async t=>{e.value=!0;let n=null;try{n=await N()}catch(m){console.warn("Could not get location for search query:",t,m.message),u.notify({type:"info",message:"Buscando sin ubicaci\xF3n precisa."})}try{s.value=await h(t,n)}catch(m){console.error("Error al buscar clubes:",m.message),u.notify({type:"negative",message:"Error durante la b\xFAsqueda."}),s.value=[]}finally{e.value=!1}}),{clubs:s,searchClubs:h,searchQuery:f,searching:e,viewClubDetails:(t,n="reservations")=>{l.push({path:`/club/${t}`,query:{tab:n}})},goBack:()=>{l.back()}}}},J={class:"header-content"},O={class:"header-icons"},W={class:"search-bar"},X={class:"clubs-list"},Y=["src"],Z={key:1,class:"text-center"},$={key:2,class:"text-center"};function ee(s,l,f,e,u,B){const k=d("NotificationBell"),t=d("BannerPromoScrolling"),n=d("PlayerNavigationMenu"),m=d("DesktopNavigation");return c(),p(S,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:o(()=>[a(C,{elevated:"",class:"text-white"},{default:o(()=>[i("div",J,[l[1]||(l[1]=i("div",{class:"greeting"},[i("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),i("div",O,[a(k)])]),a(t)]),_:1}),a(H,null,{default:o(()=>[a(M,{class:"q-pa-md"},{default:o(()=>[i("div",W,[a(D,{modelValue:e.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=r=>e.searchQuery=r),filled:"",dense:"",placeholder:"Buscar por nombre o ubicaci\xF3n",onInput:e.searchClubs,class:"text-dark"},{prepend:o(()=>[a(P,{name:"search",class:"text-primary"})]),_:1},8,["modelValue","onInput"])]),i("div",X,[e.clubs.length>0?(c(),p(E,{key:0,class:"q-mt-md"},{default:o(()=>[(c(!0),_(q,null,I(e.clubs,r=>(c(),p(V,{key:r.id,clickable:"",onClick:ae=>e.viewClubDetails(r.id),class:"club-card"},{default:o(()=>[a(Q,{avatar:""},{default:o(()=>[i("img",{src:r.logo_url||"/logo.jpeg",alt:"Club Logo",class:"club-logo"},null,8,Y)]),_:2},1024),a(Q,null,{default:o(()=>[a(y,{class:"club-name"},{default:o(()=>[v(b(r.name),1)]),_:2},1024),a(y,{caption:""},{default:o(()=>[v(b(r.address),1)]),_:2},1024),r.distance?(c(),p(y,{key:0,caption:""},{default:o(()=>[v(" Distancia: "+b((r.distance/1e3).toFixed(2))+" km ",1)]),_:2},1024)):F("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):e.searching?(c(),_("div",Z,"Buscando...")):(c(),_("div",$,"No se encontraron clubes."))])]),_:1})]),_:1}),a(n),a(m)]),_:1})}var xe=T(z,[["render",ee]]);export{xe as default};
