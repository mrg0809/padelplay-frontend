import{Q as G}from"./QHeader.9d145f00.js";import{F as J,a7 as O,r as _,j as W,B as K,q as t,G as i,H as a,v as e,I as u,y as f,a9 as q,aa as N,J as c,bC as X,aQ as F,s as w,x as d,ab as m,bM as Q}from"./index.a1ce2d53.js";import{Q as v}from"./QItemLabel.c6dfb6ef.js";import{Q as h}from"./QItem.732812ed.js";import{Q as Y}from"./QList.2919e8db.js";import{Q as Z}from"./QPage.6605c4e6.js";import{Q as ee,a as ae}from"./QLayout.3cda2fb6.js";import{f as oe}from"./players.99a54fb3.js";import{c as te}from"./dateUtils.43ab2f48.js";import{a as re}from"./api.f1a1189d.js";import{u as j}from"./use-quasar.5ff78dbd.js";import{s as se}from"./shareUtils.d3bc1d2b.js";import{g as E,a as le}from"./countryUtils.790dc2a4.js";import{u as ie}from"./userStore.9db530aa.js";import{f as ne,c as ue,u as ce}from"./community.1fefa841.js";import{P as de}from"./PlayerNavigationMenu.34a77e26.js";import{P as pe}from"./PlayerTopMenu.01ddd71e.js";import{N as fe}from"./NotificationBell.5466255c.js";import{B as me}from"./BannerPromoScrolling.81df9bd0.js";import{D as ye}from"./DesktopNavigation.abef07ab.js";import{C as ge}from"./ClubTopMenu.4265189f.js";import{C as _e}from"./ClubNavigationMenu.a9f83cb2.js";import{_ as ve}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.5fdacb3a.js";import"./pinia.e7392a2a.js";import"./QTabs.479caf1e.js";import"./rtl.276c3f1b.js";import"./QFooter.97aa8ebd.js";import"./QBtnDropdown.a2172834.js";import"./QMenu.cd8dc468.js";import"./position-engine.a0b7645d.js";import"./selection.aef80a80.js";import"./QBadge.b6830e3e.js";import"./admin.5ab62d8c.js";import"./QTooltip.28ffdfc5.js";async function he(C,p){const l=j();if(C.size>2*1024*1024){l.notify({type:"negative",message:"El archivo es demasiado grande (m\xE1ximo 2MB)."});return}if(!C.type.startsWith("image/")){l.notify({type:"negative",message:"El archivo debe ser una imagen."});return}const b=new FormData;b.append("file",C);try{const n=await re.post("/players/upload-photo",b,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}});p.photo_url=n.data.photo_url,l.notify({type:"positive",message:"Foto de perfil actualizada exitosamente"})}catch(n){console.error("Error al subir foto de perfil:",n.message),l.notify({type:"negative",message:"Error al subir foto de perfil"})}}const be={class:"header-content"},ke={class:"header-icons"},we={class:"player-container"},Ce={class:"player-profile-layout"},Pe={class:"profile-header"},xe=["src"],Qe={class:"q-ma-none player-name"},Ne={key:1},Ie={key:1,class:"follow-section q-my-sm"},qe={class:"icon-buttons"},Fe={__name:"PlayerProfile",setup(C){const p=ie(),l=J(),b=O(),n=j(),I=_(null),y=_(b.params.userId||p.userId),g=W(()=>y.value===p.userId),P=_(!1),B=_([]),k=_(!1),r=_({first_name:"",last_name:"",birth_date:"",phone:"",gender:"",preferred_hand:"",position:"",photo_url:null,category:"sexta",nationality:""}),D=async()=>{if(!y.value){console.error("No user ID provided for profile"),n.notify({type:"negative",message:"Error: No se pudo cargar el perfil del jugador"}),l.push("/player/inicio");return}const o=await oe(y.value);o?r.value=o:(n.notify({type:"negative",message:"No se pudo cargar la informaci\xF3n del jugador"}),l.push("/player/inicio"))},M=async()=>{if(!g.value)try{const o=await ne(p.userId);B.value=o,P.value=o.some(s=>s.user_id===y.value)}catch(o){console.error("Error loading following status:",o)}},S=async()=>{try{await ue(p.userId,y.value),P.value=!0,n.notify({type:"positive",message:"Ahora sigues a este jugador"})}catch(o){console.error("Error following player:",o),n.notify({type:"negative",message:"Error al seguir al jugador"})}},z=async()=>{try{await ce(p.userId,y.value),P.value=!1,n.notify({type:"positive",message:"Has dejado de seguir a este jugador"})}catch(o){console.error("Error unfollowing player:",o),n.notify({type:"negative",message:"Error al dejar de seguir al jugador"})}},T=()=>{I.value.click()},H=o=>{const s=o.target.files[0];s&&he(s,r.value)},L=()=>{const o="Descubre a este jugador.",s=window.location.href;se(o,s,"Echa un vistazo a este perfil.")},U=()=>{l.push("/player/editarinfo")};function x(o){return o?o.charAt(0).toUpperCase()+o.slice(1):"No especificado"}const V=()=>{l.push("/player/community")},$=()=>{l.push("/player/formasdepago")},A=()=>{l.push("/player/historial")};return K(()=>{b.query.from==="club"&&(k.value=!0),D(),M()}),(o,s)=>(t(),i(ee,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:a(()=>[e(G,{elevated:"",class:"text-white"},{default:a(()=>[u("div",be,[s[1]||(s[1]=u("div",{class:"greeting"},[u("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),u("div",ke,[e(fe),k.value?f("",!0):(t(),i(pe,{key:0})),k.value?(t(),i(ge,{key:1})):f("",!0)])]),e(me)]),_:1}),k.value?f("",!0):(t(),i(ye,{key:0})),k.value?(t(),i(_e,{key:1})):f("",!0),e(ae,null,{default:a(()=>[e(Z,{class:"q-pa-md"},{default:a(()=>[u("div",we,[u("div",Ce,[e(q,{flat:"",bordered:"",class:"text-white profile-card main-profile"},{default:a(()=>[e(N,{class:"q-pb-none relative"},{default:a(()=>[e(c,{flat:"",round:"",dense:"",icon:"query_stats",class:"absolute-top-left"}),e(c,{flat:"",round:"",dense:"",icon:"o_share",class:"absolute-top-right",onClick:L}),u("div",Pe,[e(X,{size:"120px",class:F(["profile-avatar",{"clickable-avatar":g.value}]),onClick:s[0]||(s[0]=R=>g.value?T():null)},{default:a(()=>[r.value.photo_url?(t(),w("img",{key:0,src:r.value.photo_url,alt:"Foto del jugador"},null,8,xe)):(t(),i(c,{key:1,icon:"person",flat:"",dense:"",size:"70px"}))]),_:1},8,["class"]),u("h4",Qe,d(r.value.first_name),1),g.value?(t(),w("input",{key:0,type:"file",ref_key:"fileInput",ref:I,class:"hidden",onChange:H},null,544)):f("",!0)])]),_:1}),e(N,{class:"profile-details"},{default:a(()=>[e(Y,{dense:"",class:"text-white player-info-list"},{default:a(()=>[e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[m("Categor\xEDa: "+d(x(r.value.category)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[m("Fecha de nacimiento: "+d(Q(te)(r.value.birth_date)),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[m("G\xE9nero: "+d(x(r.value.gender)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[m("Mano dominante: "+d(x(r.value.preferred_hand)||"No especificado"),1)]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(v,null,{default:a(()=>[m("Posici\xF3n en pista: "+d(x(r.value.position)||"No especificado"),1)]),_:1})]),_:1}),r.value.nationality?(t(),i(h,{key:0},{default:a(()=>[e(v,null,{default:a(()=>[s[2]||(s[2]=m(" Nacionalidad: ")),Q(E)(r.value.nationality)?(t(),w("span",{key:0,class:F(`fi fi-${Q(E)(r.value.nationality)}`),style:{"margin-right":"8px"}},null,2)):(t(),w("span",Ne,d(Q(le)(r.value.nationality)),1)),m(" "+d(r.value.nationality),1)]),_:1})]),_:1})):f("",!0)]),_:1}),g.value?(t(),i(c,{key:0,flat:"",dense:"",color:"white",icon:"o_edit",label:"Editar",class:"q-my-sm edit-btn",stack:"",onClick:U})):(t(),w("div",Ie,[P.value?(t(),i(c,{key:1,color:"red",label:"Dejar de seguir",icon:"person_remove",class:"unfollow-btn",onClick:z})):(t(),i(c,{key:0,color:"primary",label:"Seguir",icon:"person_add",class:"follow-btn",onClick:S}))]))]),_:1})]),_:1}),g.value?(t(),i(q,{key:0,flat:"",bordered:"",class:"text-white profile-card actions-card"},{default:a(()=>[e(N,{class:"q-pb-none"},{default:a(()=>[u("div",qe,[e(c,{flat:"",dense:"",color:"white",icon:"o_group",label:"Comunidad",class:"q-my-sm action-btn",stack:"",onClick:V}),e(c,{flat:"",dense:"",color:"white",icon:"o_credit_card",label:"ForMas de pago",class:"q-my-sm action-btn",stack:"",onClick:$}),e(c,{flat:"",dense:"",color:"white",icon:"o_history",label:"Historial",class:"q-my-sm action-btn",stack:"",onClick:A})])]),_:1})]),_:1})):f("",!0)])])]),_:1})]),_:1}),e(de)]),_:1}))}};var pa=ve(Fe,[["__scopeId","data-v-0d0b53da"]]);export{pa as default};
