import{b as N,c as v}from"./index.7e1eb1fb.js";function P(e,t){if(e==null)return;let r=e;for(let i=0;i<t.length;i++){if(r===void 0||r[t[i]]===void 0)return;if(r===null||r[t[i]]===null)return null;r=r[t[i]]}return r}function y(e,t,r){if(r.length===0)return t;const i=r[0];return r.length>1&&(t=y(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,i)?Number.isInteger(Number(r[1]))?[]:{}:e[i],t,Array.prototype.slice.call(r,1))),Number.isInteger(Number(i))&&Array.isArray(e)?e.slice()[i]:Object.assign({},e,{[i]:t})}function A(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const r={};for(const i in e)r[i]=e[i];return delete r[t[0]],r}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const r={};for(const i in e)r[i]=e[i];return r}return y(e,A(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function S(e,t){return t.map(r=>r.split(".")).map(r=>[r,P(e,r)]).filter(r=>r[1]!==void 0).reduce((r,i)=>y(r,i[1],i[0]),{})}function $(e,t){return t.map(r=>r.split(".")).reduce((r,i)=>A(r,i),e)}function m(e,{storage:t,serializer:r,key:i,debug:s,pick:c,omit:u,beforeHydrate:n,afterHydrate:l},a,d=!0){try{d&&(n==null||n(a));const f=t.getItem(i);if(f){const g=r.deserialize(f),o=c?S(g,c):g,z=u?$(o,u):o;e.$patch(z)}d&&(l==null||l(a))}catch(f){s&&console.error("[pinia-plugin-persistedstate]",f)}}function p(e,{storage:t,serializer:r,key:i,debug:s,pick:c,omit:u}){try{const n=c?S(e,c):e,l=u?$(n,u):n,a=r.serialize(l);t.setItem(i,a)}catch(n){s&&console.error("[pinia-plugin-persistedstate]",n)}}function O(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function I(e,t,r){const{pinia:i,store:s,options:{persist:c=r}}=e;if(!c)return;// v8 ignore if -- @preserve
if(!(s.$id in i.state.value)){const n=i._s.get(s.$id.replace("__hot:",""));n&&Promise.resolve().then(()=>n.$persist());return}const u=(Array.isArray(c)?c:c===!0?[{}]:[c]).map(t);s.$hydrate=({runHooks:n=!0}={})=>{u.forEach(l=>{m(s,l,e,n)})},s.$persist=()=>{u.forEach(n=>{p(s.$state,n)})},u.forEach(n=>{m(s,n,e),s.$subscribe((l,a)=>p(a,n),{detached:!0})})}function _(e={}){return function(t){var r;I(t,i=>{var c,u,n,l,a,d,f,g;const s=O(i.key,t.store.$id);return{key:(e.key?e.key:o=>o)(s),debug:(u=(c=i.debug)!=null?c:e.debug)!=null?u:!1,serializer:(l=(n=i.serializer)!=null?n:e.serializer)!=null?l:{serialize:o=>JSON.stringify(o),deserialize:o=>JSON.parse(o)},storage:(d=(a=i.storage)!=null?a:e.storage)!=null?d:window.localStorage,beforeHydrate:(f=i.beforeHydrate)!=null?f:e.beforeHydrate,afterHydrate:(g=i.afterHydrate)!=null?g:e.afterHydrate,pick:i.pick,omit:i.omit}},(r=e.auto)!=null?r:!1)}}var k=_(),E=N(({app:e})=>{const t=v();t.use(k),e.use(t)});export{E as default};
