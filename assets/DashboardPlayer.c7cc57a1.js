import{Q as N}from"./QHeader.1501c452.js";import{bA as k,F as B,r as f,B as M,a8 as v,q as l,G as T,H as y,v as r,I as s,ab as b,x as p,s as _,ac as E,ad as x,ae as w}from"./index.71d630fb.js";import{Q as I,a as L}from"./QLayout.c08f0fa0.js";import{u as j}from"./use-quasar.0b14f354.js";import{N as D}from"./NotificationBell.04412d62.js";import{P as C}from"./PlayerNavigationMenu.4f189334.js";import{P as S}from"./PlayerTopMenu.3085ca09.js";import{B as Q}from"./BannerPromoScrolling.a6ccbb18.js";import{u as F}from"./userStore.0094877c.js";import{a as R}from"./api.f1a1189d.js";import{f as W}from"./dateUtils.de73fc69.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBadge.c68240da.js";import"./QTabs.00f0efae.js";import"./rtl.276c3f1b.js";import"./QFooter.a6cd6ca7.js";import"./QItem.be3e7c8c.js";import"./QList.9f9e73f9.js";import"./QBtnDropdown.131f956e.js";import"./QMenu.89f3ebb3.js";import"./position-engine.25e73adf.js";import"./selection.040452b6.js";import"./admin.5ab62d8c.js";import"./pinia.014ff78d.js";async function V(a,t,i=500,n={}){var d;if(!a||typeof((d=a.loading)==null?void 0:d.show)!="function"){console.error("runTaskWithMinLoading: Se requiere el objeto $q con el plugin Loading.");try{return await t()}catch(o){throw k.create({type:"negative",message:"Ocurri\xF3 un error inesperado.",caption:o.message}),o}}if(typeof t!="function"){const o=new Error('runTaskWithMinLoading: el par\xE1metro "task" debe ser una funci\xF3n as\xEDncrona.');return console.error(o),Promise.reject(o)}a.loading.show(n);const m=new Promise(o=>setTimeout(o,i));let u,c;const g=t().then(o=>{u=o}).catch(o=>{c=o,console.error("Error durante la ejecuci\xF3n de la tarea en runTaskWithMinLoading:",o),k.create({type:"negative",message:"Fall\xF3 la operaci\xF3n.",caption:(o==null?void 0:o.message)||"Error desconocido"})});try{await Promise.all([g,m])}finally{a.loading.hide()}if(c)throw c;return u}const q=async a=>{try{return(await R.get("/events/player/upcoming_events/")).data}catch(t){return console.error("Error fetching upcoming player events from API:",t),[]}};const z={name:"DashboardPlayer",components:{NotificationBell:D,NavigationMenu:C,PlayerTopMenu:S,BannerPromoScrolling:Q},setup(){const a=j(),t=B(),i=f([]),n=f(null),m=f(!0),u=F(),c=[{name:"Reserva tu cancha",icon:"edit_calendar",image_url:"/src/assets/menu/reserva.jpeg",route:"reservas"},{name:"\xDAnete a un partido",icon:"sports_tennis",image_url:"/src/assets/menu/unete.jpeg",route:"unete"},{name:"Inscr\xEDbete a torneos",icon:"o_emoji_events",image_url:"/src/assets/menu/torneos.jpeg",route:"torneos"},{name:"Clases de P\xE1del",icon:"o_school",image_url:"/src/assets/menu/clases.jpeg",route:"reservas"}],g=async()=>await q(u.userId),d=e=>{e.type==="match"?t.push(`/player/match/${e.id}`):e.type==="lesson"&&e.lesson_type==="private"?t.push(`/player/privatelesson/${e.id}`):e.type==="lesson"&&e.lesson_type==="public"&&t.push(`/player/detallessesion/${e.id}`)},o=e=>{t.push(`/player/${e}`)};return M(async()=>{m.value=!0,i.value=[];try{const e=await V(a,g,2e3);i.value=e||[]}catch(e){console.error("Error fetching upcoming events:",e),i.value=[]}finally{m.value=!1}}),{full_name:n,options:c,upcomingEvents:i,isInitiallyLoading:m,formatDate:W,goToEventDetails:d,navigateTo:o,userStore:u}}},A={class:"header-content"},O={class:"greeting"},U={class:"header-icons"},G={class:"player-container"},$={class:"home"},J={class:"options-grid"},K=["onClick"],X=["src"],Y={class:"next-events-section"},Z={class:"events-container"},ee={key:0,class:"empty-events"},oe={key:1,class:"events-carousel"},se=["onClick"],te={class:"event-info"},ne={class:"event-date"},ae={class:"event-time"},re={class:"event-club"},ie={class:"event-court"};function ce(a,t,i,n,m,u){const c=v("NotificationBell"),g=v("PlayerTopMenu"),d=v("BannerPromoScrolling"),o=v("NavigationMenu");return l(),T(I,{view:"hHh lpR fFf"},{default:y(()=>[r(N,{elevated:"",class:"text-white"},{default:y(()=>[s("div",A,[s("div",O,[t[0]||(t[0]=s("img",{src:"/src/assets/padelplay.png",alt:"Logo",class:"logo-icon"},null,-1)),b(" Bienvenido "+p(n.userStore.fullName),1)]),s("div",U,[r(c),r(g)])]),r(d)]),_:1}),r(L,null,{default:y(()=>[s("div",G,[s("div",$,[s("div",J,[(l(!0),_(x,null,E(n.options,e=>(l(),_("div",{key:e.name,class:"option-card",onClick:h=>n.navigateTo(e.route)},[s("img",{src:e.image_url,alt:"Option Image",class:"option-image"},null,8,X),s("h3",null,p(e.name),1),r(w,{name:e.icon,size:"xl",class:"option-icon"},null,8,["name"])],8,K))),128))]),s("div",Y,[t[2]||(t[2]=s("div",{class:"next-events"},[s("h4",null,"Mis Eventos:")],-1)),s("div",Z,[n.upcomingEvents.length===0&&!n.isInitiallyLoading?(l(),_("div",ee,t[1]||(t[1]=[s("div",{class:"q-pa-md text-center text-grey"}," No tienes pr\xF3ximos eventos registrados. ",-1)]))):(l(),_("div",oe,[(l(!0),_(x,null,E(n.upcomingEvents,e=>{var h,P;return l(),_("div",{key:e.id,class:"event-card",onClick:le=>n.goToEventDetails(e)},[r(w,{name:e.type==="match"?e.tournament_id?"emoji_events":"sports_tennis":"o_school",class:"event-icon material-icons-outlined",size:"35px"},null,8,["name"]),s("div",te,[s("p",ne,p(n.formatDate(e.match_date||e.lesson_date)),1),s("p",ae,p(e.match_time||e.lesson_time),1),s("p",re,p((h=e.clubs)==null?void 0:h.name),1),s("p",ie,p((P=e.courts)==null?void 0:P.name),1)])],8,se)}),128))]))])])])])]),_:1}),r(o)]),_:1})}var Ce=H(z,[["render",ce],["__scopeId","data-v-10718fe1"]]);export{Ce as default};
