import{Q as E}from"./QHeader.bd213683.js";import{bC as x,F as T,r as f,B as M,aa as h,q as c,G as B,H as y,v as n,I as o,x as p,s as _,ae as w,af as b,bt as N,aW as C,ag as P}from"./index.b86c8e6e.js";import{Q as S,a as D}from"./QLayout.af46a9b3.js";import{u as L}from"./use-quasar.a2b20f07.js";import{N as j}from"./NotificationBell.53a18a75.js";import{P as I}from"./PlayerNavigationMenu.5cc1aa48.js";import{P as Q}from"./PlayerTopMenu.ddf1801b.js";import{B as W}from"./BannerPromoScrolling.9204dca7.js";import{u as z}from"./userStore.80f0bb99.js";import{a as F}from"./api.e96a150b.js";import{f as R}from"./dateUtils.d1f141b5.js";import{f as q}from"./hourUtils.51636ade.js";import{u as H}from"./useMeta.e956e4ee.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import"./QBadge.232753f6.js";import"./QTabs.273ef540.js";import"./rtl.276c3f1b.js";import"./QFooter.99f9350d.js";import"./QItem.bb8cfc8e.js";import"./QList.d2fcba6f.js";import"./QBtnDropdown.2d10f5d2.js";import"./QBtnGroup.d0b6eea5.js";import"./QMenu.98088be6.js";import"./position-engine.d601497f.js";import"./selection.d155da32.js";import"./admin.48eb7fea.js";import"./pinia.65a0a7d6.js";import"./index.c98ef0da.js";async function V(r,t,i=500,a={}){var u;if(!r||typeof((u=r.loading)==null?void 0:u.show)!="function"){console.error("runTaskWithMinLoading: Se requiere el objeto $q con el plugin Loading.");try{return await t()}catch(s){throw x.create({type:"negative",message:"Ocurri\xF3 un error inesperado.",caption:s.message}),s}}if(typeof t!="function"){const s=new Error('runTaskWithMinLoading: el par\xE1metro "task" debe ser una funci\xF3n as\xEDncrona.');return console.error(s),Promise.reject(s)}r.loading.show(a);const m=new Promise(s=>setTimeout(s,i));let d,l;const v=t().then(s=>{d=s}).catch(s=>{l=s,console.error("Error durante la ejecuci\xF3n de la tarea en runTaskWithMinLoading:",s),x.create({type:"negative",message:"Fall\xF3 la operaci\xF3n.",caption:(s==null?void 0:s.message)||"Error desconocido"})});try{await Promise.all([v,m])}finally{r.loading.hide()}if(l)throw l;return d}const $=async r=>{try{return(await F.get("/events/player/upcoming_events/")).data}catch(t){return console.error("Error fetching upcoming player events from API:",t),[]}};const A={name:"DashboardPlayer",components:{NotificationBell:j,NavigationMenu:I,PlayerTopMenu:Q,BannerPromoScrolling:W},setup(){H({title:"Dashboard"});const r=L(),t=T(),i=f([]),a=f(null),m=f(!0),d=z(),l=[{name:"Reservar cancha",icon:"edit_calendar",image_url:"/menu/reserva.jpeg",route:"reservas"},{name:"Unirse a un partido",icon:"sports_tennis",image_url:"/menu/unirse.jpeg",route:"unete"},{name:"Torneos",icon:"o_emoji_events",image_url:"/menu/torneo.jpeg",route:"torneos"},{name:"Clases de P\xE1del",icon:"o_school",image_url:"/menu/clases.jpeg",route:"reservas"}],v=async()=>await $(d.userId),u=e=>{e.type==="match"?t.push(`/player/match/${e.id}`):e.type==="lesson"&&e.lesson_type==="private"?t.push(`/player/privatelesson/${e.id}`):e.type==="lesson"&&e.lesson_type==="public"&&t.push(`/player/detallessesion/${e.id}`)},s=e=>{e.name==="Clases de P\xE1del"?t.push({path:`/player/${e.route}`,query:{from:"lessons"}}):t.push(`/player/${e.route}`)};return M(async()=>{m.value=!0,i.value=[];try{const e=await V(r,v,2e3);i.value=e||[]}catch(e){console.error("Error fetching upcoming events:",e),i.value=[]}finally{m.value=!1}}),{full_name:a,options:l,upcomingEvents:i,isInitiallyLoading:m,formatDate:R,formatTimeWithoutSeconds:q,goToEventDetails:u,navigateTo:s,userStore:d}}},G={class:"header-content"},O={class:"greeting"},J={class:"greeting-text"},K={class:"text-grey"},X={class:"header-icons"},Y={class:"player-container"},Z={class:"home"},ee={class:"options-grid"},oe=["onClick"],te=["onClick"],se={class:"option-overlay"},ae={class:"overlay-left"},ne={class:"overlay-icon"},re={class:"overlay-text"},ie={class:"overlay-title"},le={class:"next-events-section"},ce={class:"events-container"},me={key:0,class:"empty-events"},de={key:1,class:"events-carousel"},ue=["onClick"],pe={class:"event-info"},_e={class:"event-date"},ve={class:"event-time"},ge={class:"event-club"},he={class:"event-court"};function fe(r,t,i,a,m,d){const l=h("NotificationBell"),v=h("PlayerTopMenu"),u=h("BannerPromoScrolling"),s=h("NavigationMenu");return c(),B(S,{view:"hHh lpR fFf"},{default:y(()=>[n(E,{elevated:"",class:"text-white"},{default:y(()=>[o("div",G,[o("div",O,[t[1]||(t[1]=o("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"},null,-1)),o("div",J,[t[0]||(t[0]=o("p",null,"Bienvenido",-1)),o("p",K,p(a.userStore.fullName),1)])]),o("div",X,[n(l),n(v)])]),n(u)]),_:1}),n(D,null,{default:y(()=>[o("div",Y,[o("div",Z,[o("div",ee,[(c(!0),_(b,null,w(a.options,e=>(c(),_("div",{key:e.name,class:"option-card",style:N({backgroundImage:`url(${e.image_url})`}),onClick:g=>a.navigateTo(e)},[o("div",{class:"option-arrow",onClick:C(g=>a.navigateTo(e),["stop"])},[n(P,{name:"arrow_forward",size:"18px"})],8,te),o("div",se,[o("div",ae,[o("div",ne,[n(P,{name:e.icon,size:"48px"},null,8,["name"])]),o("div",re,[o("div",ie,p(e.name),1)])])])],12,oe))),128))]),o("div",le,[t[3]||(t[3]=o("div",{class:"next-events bg-primary"},[o("h4",{class:"text-black text-weight-bold"},"Mis Eventos:")],-1)),o("div",ce,[a.upcomingEvents.length===0&&!a.isInitiallyLoading?(c(),_("div",me,t[2]||(t[2]=[o("div",{class:"q-pa-md text-center text-grey text-weight-bold"}," No tienes pr\xF3ximos eventos registrados. ",-1)]))):(c(),_("div",de,[(c(!0),_(b,null,w(a.upcomingEvents,e=>{var g,k;return c(),_("div",{key:e.id,class:"event-card",onClick:ye=>a.goToEventDetails(e)},[n(P,{name:e.type==="match"?e.tournament_id?"emoji_events":"sports_tennis":"o_school",class:"event-icon material-icons-outlined",size:"35px"},null,8,["name"]),o("div",pe,[o("p",_e,p(a.formatDate(e.match_date||e.lesson_date)),1),o("p",ve,p(a.formatTimeWithoutSeconds(e.match_time||e.lesson_time)),1),o("p",ge,p((g=e.clubs)==null?void 0:g.name),1),o("p",he,p((k=e.courts)==null?void 0:k.name),1)])],8,ue)}),128))]))])])])])]),_:1}),n(s)]),_:1})}var Oe=U(A,[["render",fe],["__scopeId","data-v-3f0f2a70"]]);export{Oe as default};
