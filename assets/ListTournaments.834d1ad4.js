import{Q as O}from"./QHeader.0d454933.js";import{F as G,r as u,w as U,B as H,aa as w,q as d,G as P,H as s,v as o,I as n,ag as m,ad as r,s as c,Q as R,af as Q,ae as h,aO as j,ab as N,ac as D,y as J,x as p}from"./index.44dfb542.js";import{Q as C,a as q}from"./QItem.ce9b680d.js";import{Q as k}from"./QSelect.1420a5db.js";import{Q as z}from"./QBadge.797aa0dd.js";import{Q as K}from"./QSpinnerGears.076636a2.js";import{Q as W}from"./QPage.1698e478.js";import{Q as X,a as Y}from"./QLayout.f534ad89.js";import{f as Z}from"./tournaments.6aa332dc.js";import{n as $}from"./navigationUtils.2c4b9dee.js";import{f as ee}from"./commun.b8158ebf.js";import{P as oe}from"./PlayerNavigationMenu.0afc6623.js";import{B as te}from"./BannerPromoScrolling.ff516f9b.js";import{D as le}from"./DesktopNavigation.a6ab08fe.js";import{a as ne}from"./api.e96a150b.js";import{_ as ae}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.9ce42c7b.js";import"./QItemLabel.a9393408.js";import"./QMenu.0503986d.js";import"./position-engine.154a5bb3.js";import"./selection.28b53dc5.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./supabase.a8148869.js";import"./QTabs.3e576845.js";import"./QFooter.ee772579.js";import"./admin.48eb7fea.js";import"./QTooltip.57680f54.js";import"./index.c98ef0da.js";const se={name:"ListTournaments",components:{PlayerNavigationMenu:oe,BannerPromoScrolling:te,DesktopNavigation:le},setup(){const y=G(),e=u([]),b=u([]),l=u({city:null,category:null,gender:null}),f=u([]),v=u([]),_=u(["primera","segunda","tercera","cuarta","quinta","libre","otro","open"]),T=u(["mixto","varonil","femenil"]),x=u(!1),t=u(!1),g=async()=>{x.value=!0;try{e.value=await Z(l.value)}catch(a){console.error("Error loading tournaments:",a),e.value=[]}finally{x.value=!1}},V=async()=>{var a;t.value=!0;try{console.log("Fetching Padelite tournaments...");const{data:i}=await ne.get("/padelite/player/tournaments");console.log("Padelite tournaments response:",i),b.value=i.data||[],console.log("Padelite tournaments loaded:",b.value.length)}catch(i){console.error("Error loading Padelite tournaments:",i),console.error("Error details:",(a=i.response)==null?void 0:a.data),b.value=[]}finally{t.value=!1}},B=async()=>{try{const a=await ee();f.value=a.map(i=>typeof i=="string"?i:i.value||i.label||i),v.value=f.value}catch(a){console.error("Error loading cities:",a),f.value=[],v.value=[]}},S=(a,i)=>{if(a===""){i(()=>{v.value=f.value});return}i(()=>{const A=a.toLowerCase();v.value=f.value.filter(M=>M.toLowerCase().indexOf(A)>-1)})},E=a=>y.push({name:"TournamentDetails",params:{tournamentId:a}}),F=()=>y.push("/padelite"),L=a=>{y.push(`/padelite/team/${a.team_id}`)},I=a=>a&&a.charAt(0).toUpperCase()+a.slice(1);return U(l,g,{deep:!0}),H(()=>{g(),B(),V()}),{tournaments:e,padeliteTournaments:b,loadingTournaments:x,loadingPadelite:t,filters:l,cityOptions:v,categories:_,genders:T,goToTournamentDetails:E,goToPadeliteTournament:L,goToPadelite:F,filterCityFn:S,capitalizeText:I,goToDashboard:()=>{$(y,userStore)}}}},re={class:"header-content"},ie={class:"greeting"},de={class:"row q-col-gutter-md q-mb-lg"},me={class:"col-12 col-sm-4"},ce={class:"col-12 col-sm-4"},ue={class:"col-12 col-sm-4"},pe={class:"q-mb-lg"},ge={class:"text-h6 tennis-yellow q-mb-md"},fe={key:0,class:"text-center q-pa-md"},ve={key:1,class:"row q-col-gutter-md"},ye={class:"row items-center q-mb-sm"},be={class:"tennis-yellow q-mt-none q-mb-sm"},xe={class:"q-mb-xs"},_e={key:2,class:"text-center text-grey-6 q-pa-md"},Te={key:0,class:"text-center q-pa-xl"},we={key:1,class:"text-center text-grey-5 q-pa-xl"},Ce={key:2,class:"tournaments-list row q-col-gutter-md"},qe={class:"tennis-yellow q-mt-none q-mb-sm"},ke={class:"q-mb-xs"};function Pe(y,e,b,l,f,v){const _=w("BannerPromoScrolling"),T=w("PlayerNavigationMenu"),x=w("DesktopNavigation");return d(),P(X,{view:"hHh lpR fFf",class:"text-white"},{default:s(()=>[o(O,{elevated:"",class:"text-white"},{default:s(()=>[n("div",re,[n("div",ie,[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:e[0]||(e[0]=(...t)=>l.goToDashboard&&l.goToDashboard(...t))})]),e[7]||(e[7]=n("div",{class:"header-icons"},null,-1))]),o(_)]),_:1}),o(Y,null,{default:s(()=>[o(W,{class:"q-pa-md"},{default:s(()=>[n("div",de,[n("div",me,[o(k,{modelValue:l.filters.city,"onUpdate:modelValue":e[1]||(e[1]=t=>l.filters.city=t),options:l.cityOptions,label:"Ciudad",outlined:"",dense:"","options-dense":"",clearable:"",onFilter:l.filterCityFn,onClear:e[2]||(e[2]=t=>l.filters.city=null),"label-color":"white","popup-content-class":"text-white"},{prepend:s(()=>[o(m,{name:"location_on",color:"white"})]),"no-option":s(()=>[o(C,null,{default:s(()=>[o(q,{class:"text-white"},{default:s(()=>e[8]||(e[8]=[r(" No hay ciudades disponibles ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),n("div",ce,[o(k,{modelValue:l.filters.category,"onUpdate:modelValue":e[3]||(e[3]=t=>l.filters.category=t),options:l.categories,label:"Categor\xEDa",outlined:"",dense:"","options-dense":"",clearable:"","label-color":"white","popup-content-class":"text-white",onClear:e[4]||(e[4]=t=>l.filters.category=null)},{prepend:s(()=>[o(m,{name:"category",color:"white"})]),"no-option":s(()=>[o(C,null,{default:s(()=>[o(q,{class:"text-white"},{default:s(()=>e[9]||(e[9]=[r(" No hay categor\xEDas ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),n("div",ue,[o(k,{modelValue:l.filters.gender,"onUpdate:modelValue":e[5]||(e[5]=t=>l.filters.gender=t),options:l.genders,label:"G\xE9nero",outlined:"",dense:"","options-dense":"",clearable:"","label-color":"white","popup-content-class":"text-white",onClear:e[6]||(e[6]=t=>l.filters.gender=null)},{prepend:s(()=>[o(m,{name:"wc",color:"white"})]),"no-option":s(()=>[o(C,null,{default:s(()=>[o(q,{class:"text-white"},{default:s(()=>e[10]||(e[10]=[r(" No hay g\xE9neros ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),n("div",pe,[n("div",ge,[o(m,{name:"emoji_events"}),e[11]||(e[11]=r(" Mis Torneos PADELITE "))]),l.loadingPadelite?(d(),c("div",fe,[o(R,{color:"primary",size:"40px"}),e[12]||(e[12]=n("p",{class:"q-mt-sm"},"Cargando torneos Padelite...",-1))])):l.padeliteTournaments.length>0?(d(),c("div",ve,[(d(!0),c(Q,null,h(l.padeliteTournaments,t=>(d(),c("div",{key:t.id,class:"col-12 col-sm-6 col-md-4"},[o(N,{class:"tournament-card padelite-card full-height",clickable:"",bordered:"",onClick:g=>l.goToPadeliteTournament(t)},{default:s(()=>[o(D,null,{default:s(()=>[n("div",ye,[t.is_captain?(d(),P(z,{key:0,color:"primary",label:"CAPIT\xC1N",class:"q-mr-sm"})):J("",!0),o(z,{color:"positive",label:"PADELITE"})]),n("h4",be,p(t.name),1),n("p",xe,[n("strong",null,[o(m,{name:"group",size:"xs"}),e[13]||(e[13]=r(" Equipo:"))]),r(" "+p(t.team_name)+" ",1),e[15]||(e[15]=n("br",null,null,-1)),n("strong",null,[o(m,{name:"mdi-calendar",size:"xs"}),e[14]||(e[14]=r(" Fecha:"))]),r(" "+p(t.start_date),1)])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])):(d(),c("div",_e,[o(m,{name:"info",size:"32px"}),e[16]||(e[16]=n("p",null,"No est\xE1s inscrito en ning\xFAn torneo Padelite",-1))])),o(j,{class:"q-my-lg"})]),l.loadingTournaments?(d(),c("div",Te,[o(K,{color:"primary",size:"xl"}),e[17]||(e[17]=n("p",{class:"q-mt-md"},"Buscando torneos...",-1))])):l.tournaments.length===0?(d(),c("div",we,[o(m,{name:"event_busy",size:"64px"}),e[18]||(e[18]=n("p",null,"No se encontraron torneos con los filtros seleccionados.",-1))])):(d(),c("div",Ce,[(d(!0),c(Q,null,h(l.tournaments,t=>(d(),c("div",{key:t.id,class:"col-12 col-sm-6 col-md-4"},[o(N,{class:"tournament-card full-height",clickable:"",bordered:"",onClick:g=>l.goToTournamentDetails(t.id)},{default:s(()=>[o(D,null,{default:s(()=>{var g;return[n("h4",qe,p(t.name),1),n("p",ke,[n("strong",null,[o(m,{name:"mdi-calendar",size:"xs"}),e[19]||(e[19]=r(" Fecha:"))]),r(" "+p(t.start_date)+" ",1),e[23]||(e[23]=n("br",null,null,-1)),n("strong",null,[o(m,{name:"mdi-map-marker",size:"xs"}),e[20]||(e[20]=r(" Ciudad:"))]),r(" "+p(((g=t.clubs)==null?void 0:g.city)||t.city||"N/A")+" ",1),e[24]||(e[24]=n("br",null,null,-1)),n("strong",null,[o(m,{name:"mdi-trophy-variant-outline",size:"xs"}),e[21]||(e[21]=r(" Cat:"))]),r(" "+p(l.capitalizeText(t.category))+" ",1),e[25]||(e[25]=n("br",null,null,-1)),n("strong",null,[o(m,{name:"mdi-gender-male-female",size:"xs"}),e[22]||(e[22]=r(" Gen:"))]),r(" "+p(l.capitalizeText(t.gender)),1)])]}),_:2},1024)]),_:2},1032,["onClick"])]))),128))]))]),_:1})]),_:1}),o(T),o(x)]),_:1})}var lo=ae(se,[["render",Pe],["__scopeId","data-v-134ae95b"]]);export{lo as default};
