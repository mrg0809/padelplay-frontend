import{Q as T}from"./QHeader.289f0645.js";import{x as P,r as d,f as z,h as D,w as F,a6 as h,o as n,z as g,A as a,d as e,B as r,a7 as y,a8 as b,Q as I,a as m,ac as H,ab as L,a9 as w,t as p,e as V,aa as O,bE as U}from"./index.687b44e8.js";import{Q as j}from"./QSelect.8af2919e.js";import{Q as G,a as N}from"./QItem.eb9291fb.js";import{Q as E}from"./QItemLabel.bbebea39.js";import{Q as J}from"./QList.1288e946.js";import{Q as K}from"./QPage.fcc9aae1.js";import{Q as W,a as X}from"./QLayout.30990248.js";import{u as Y}from"./use-quasar.ba375293.js";import{A as Z,a as $}from"./AssociationTopMenu.c2c9d0dc.js";import{N as ee}from"./NotificationBell.9fdba392.js";import{B as ae}from"./BannerPromoScrolling.1700e538.js";import{a as te,n as oe}from"./association.b92d73c6.js";import{_ as se}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.c9b5cbc6.js";import"./QMenu.df8dfc7c.js";import"./position-engine.46674690.js";import"./selection.0f785986.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./QTabs.979bee57.js";import"./QFooter.b7b22f15.js";import"./QBtnDropdown.17175f2e.js";import"./QBtnGroup.6b9d07ee.js";import"./haptics.57409bd0.js";import"./QBadge.0c3a126f.js";import"./api.1c42dce4.js";const ne={name:"AssociationRanking",components:{AssociationNavigationMenu:Z,AssociationTopMenu:$,NotificationBell:ee,BannerPromoScrolling:ae},setup(){const S=Y(),o=P(),k=d(!0),t=d([]),A=d(null),f=d(null),c=d([]),_=d(!1),u=d(""),B=z(()=>t.value),s=()=>o.push("/dashboard/association"),x=async()=>{var l,v;k.value=!0;try{const i=await te();t.value=i.data||[]}catch(i){console.error("Error loading leagues:",i),S.notify({type:"negative",message:((v=(l=i.response)==null?void 0:l.data)==null?void 0:v.detail)||"Error al cargar ligas"}),t.value=[]}finally{k.value=!1}},R=async l=>{var v,i,q,C;if(!l){c.value=[],f.value=null,u.value="";return}_.value=!0,u.value="";try{const Q=await oe(l);f.value=((v=Q.data)==null?void 0:v.league)||null,c.value=((i=Q.data)==null?void 0:i.ranking)||[]}catch(Q){u.value=((C=(q=Q.response)==null?void 0:q.data)==null?void 0:C.detail)||"No se pudo cargar el ranking",c.value=[],f.value=null}finally{_.value=!1}},M=l=>{R(l)};return D(async()=>{await x()}),F(A,l=>{l&&R(l)}),{goToDashboard:s,loadingLeagues:k,leagues:t,leagueOptions:B,selectedLeagueId:A,selectedLeague:f,ranking:c,loadingRanking:_,rankingError:u,onLeagueSelected:M}}},le={class:"header-content"},re={class:"greeting"},ie={class:"header-icons"},de={class:"text-h6"},ce={key:0,class:"text-caption text-grey"},ue={key:0,class:"text-grey text-center q-mt-md"};function ge(S,o,k,t,A,f){const c=h("NotificationBell"),_=h("AssociationTopMenu"),u=h("BannerPromoScrolling"),B=h("AssociationNavigationMenu");return n(),g(W,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[e(T,{elevated:"",class:"text-white"},{default:a(()=>[r("div",le,[r("div",re,[r("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:o[0]||(o[0]=(...s)=>t.goToDashboard&&t.goToDashboard(...s))}),o[2]||(o[2]=r("span",{class:"text-subtitle1"},"Ranking",-1))]),r("div",ie,[e(c),e(_)])]),e(u)]),_:1}),e(X,null,{default:a(()=>[e(K,{class:"q-pa-md"},{default:a(()=>[o[5]||(o[5]=r("div",{class:"text-h5 q-mb-md"},"Ranking de ligas",-1)),t.loadingLeagues?(n(),g(y,{key:0,flat:"",bordered:"",class:"bg-grey-9 text-white"},{default:a(()=>[e(b,{class:"text-center"},{default:a(()=>[e(I,{color:"primary",size:"40px"})]),_:1})]),_:1})):(n(),m(L,{key:1},[e(j,{modelValue:t.selectedLeagueId,"onUpdate:modelValue":[o[1]||(o[1]=s=>t.selectedLeagueId=s),t.onLeagueSelected],options:t.leagueOptions,label:"Selecciona una liga",outlined:"",dark:"",dense:"","emit-value":"","map-options":"","option-value":"id","option-label":"name",class:"q-mb-md"},null,8,["modelValue","options","onUpdate:modelValue"]),t.selectedLeagueId?(n(),m(L,{key:1},[t.loadingRanking?(n(),g(y,{key:0,flat:"",bordered:"",class:"bg-grey-9 text-white"},{default:a(()=>[e(b,{class:"text-center"},{default:a(()=>[e(I,{color:"primary",size:"40px"})]),_:1})]),_:1})):t.rankingError?(n(),g(y,{key:1,flat:"",bordered:"",class:"bg-grey-9 text-white"},{default:a(()=>[e(b,{class:"text-center text-negative"},{default:a(()=>[w(p(t.rankingError),1)]),_:1})]),_:1})):(n(),m(L,{key:2},[e(y,{flat:"",bordered:"",class:"q-mb-md bg-grey-9 text-white"},{default:a(()=>[e(b,null,{default:a(()=>{var s,x;return[r("div",de,p((s=t.selectedLeague)==null?void 0:s.name),1),(x=t.selectedLeague)!=null&&x.description?(n(),m("div",ce,p(t.selectedLeague.description),1)):V("",!0)]}),_:1})]),_:1}),o[4]||(o[4]=r("div",{class:"text-subtitle1 q-mb-sm"},"Clasificaci\xF3n",-1)),e(J,{bordered:"",class:"rounded-borders bg-transparent"},{default:a(()=>[(n(!0),m(L,null,O(t.ranking,s=>(n(),g(G,{key:s.player_id,class:"q-mb-sm bg-grey-9"},{default:a(()=>[e(N,{avatar:""},{default:a(()=>[e(U,{color:"primary","text-color":"white"},{default:a(()=>[w(p(s.position),1)]),_:2},1024)]),_:2},1024),e(N,null,{default:a(()=>[e(E,null,{default:a(()=>[w(p(s.full_name),1)]),_:2},1024)]),_:2},1024),e(N,{side:""},{default:a(()=>[e(E,{class:"text-weight-bold"},{default:a(()=>[w(p(s.points)+" pts",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t.ranking.length?V("",!0):(n(),m("p",ue,"A\xFAn no hay puntos en esta liga."))],64))],64)):(n(),g(y,{key:0,flat:"",bordered:"",class:"bg-grey-9 text-white"},{default:a(()=>[e(b,{class:"text-center text-grey"},{default:a(()=>[e(H,{name:"o_leaderboard",size:"64px",class:"q-mb-md"}),o[3]||(o[3]=r("p",null,"Selecciona una liga para ver su ranking de jugadores.",-1))]),_:1})]),_:1}))],64))]),_:1})]),_:1}),e(B)]),_:1})}var De=se(ne,[["render",ge],["__scopeId","data-v-6a73639a"]]);export{De as default};
