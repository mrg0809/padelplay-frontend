import{Q as H}from"./QHeader.802cd4d1.js";import{Q as Y}from"./QSpinnerDots.59a16d6b.js";import{a7 as G,F as K,r as p,B as O,bB as z,a8 as v,q as o,G as c,H as i,v as l,I as t,y as V,s as d,a9 as N,aa as B,J as g,ae as J,ab as Q,x as n,bC as j,ad as T,ac as A,K as E,af as W,ag as X,ah as Z}from"./index.a39c4dc5.js";import{Q as $}from"./QPage.5832dc0d.js";import{Q as ee,a as ae}from"./QLayout.4dd7e8db.js";import{C as te}from"./ClosePopup.b06081ee.js";import{a as S}from"./api.92f95132.js";import{u as oe}from"./use-quasar.74fe5150.js";import{P as le}from"./PlayerNavigationMenu.a144d338.js";import{B as re}from"./BannerPromoScrolling.aabd5b24.js";import{N as se}from"./NotificationBell.090cf4d4.js";import{P as ie}from"./PlayerTopMenu.60b3dc9d.js";import{D as ne}from"./DesktopNavigation.c710b1ec.js";import{C as de}from"./ClubTopMenu.7325494c.js";import{C as me}from"./ClubNavigationMenu.512cef8b.js";import{_ as ce}from"./plugin-vue_export-helper.21dcd24c.js";import"./QTabs.adf13df0.js";import"./rtl.276c3f1b.js";import"./QFooter.bbb29d47.js";import"./admin.dfdc6f99.js";import"./QBadge.622bed3c.js";import"./QItem.061e6110.js";import"./QList.ca2b4f16.js";import"./QBtnDropdown.546bbc0a.js";import"./QMenu.ebb4d86d.js";import"./position-engine.3e047e6f.js";import"./selection.ce16caff.js";import"./userStore.0887039c.js";import"./pinia.79675abb.js";import"./QTooltip.d6c969ee.js";const ue={components:{BannerPromoScrolling:re,NotificationBell:se,PlayerNavigationMenu:le,PlayerTopMenu:ie,DesktopNavigation:ne,ClubTopMenu:de,ClubNavigationMenu:me},setup(){const u=G(),a=K(),m=oe(),e=p(null),_=p([]),y=p([]),b=p(!0),h=p(""),x=p(null),w=p(null),k=p(!1),P=p([{name:"Set 1",team1score:0,team2score:0},{name:"Set 2",team1score:0,team2score:0},{name:"Set 3",team1score:0,team2score:0}]),D=async()=>{try{const r=await S.get(`/matches/match/${u.params.matchId}`);e.value=r.data,_.value=r.data.team1_players||[],y.value=r.data.team2_players||[]}catch(r){console.error("Error al cargar los detalles del partido:",r.message),m.notify({type:"negative",message:"Error al cargar los detalles del partido."})}finally{b.value=!1}},s={primera:"1\xBA",segunda:"2\xBA",tercera:"3\xBA",cuarta:"4\xBA",quinta:"5\xBA",sexta:"6\xBA"};function f(r){return s[r==null?void 0:r.toLowerCase()]||r}const C=r=>{if(!r){console.warn("Cannot navigate to player profile: playerId is undefined"),m.notify({type:"warning",message:"No se puede acceder al perfil de este jugador"});return}q.value?a.push(`/player/${r}?from=club`):a.push(`/player/${r}`)},I=(r,M)=>{x.value=r,w.value=M,h.value="",k.value=!0},U=async()=>{try{const r={email_or_phone:h.value,match_id:u.params.matchId,team:x.value,position:w.value,club_name:e.value.club_name||"No especificado",player_name:_.value[0]||"Jugador desconocido",match_date:e.value.match_date||"Fecha desconocida",match_time:e.value.match_time||"Hora desconocida"},M=await S.post("/matches/add-player",r);M.data.status==="success"?(m.notify({type:"positive",message:"Jugador agregado exitosamente."}),D()):M.data.status==="invited"&&m.notify({type:"info",message:"Jugador invitado a unirse a PadelPlay."}),k.value=!1}catch(r){console.error("Error al agregar jugador:",r.message),m.notify({type:"negative",message:"Error al agregar jugador."})}},F=async()=>{try{await S.put(`/matches/match/${u.params.matchId}`,{score:P.value}),m.notify({type:"positive",message:"Resultado guardado exitosamente."})}catch(r){console.error("Error al guardar el resultado:",r.message),m.notify({type:"negative",message:"Error al guardar el resultado."})}},R=async()=>{if(navigator.share)try{await navigator.share({title:"Te invitamos a este gran juego",url:window.location.href}),console.log("Encuentro compartido exitosamente")}catch(r){console.error("Error al compartir el partido:",r.message)}else alert("La funcionalidad de compartir no es compatible con este dispositivo.")},L=()=>{a.back()},q=p(!1);return O(()=>{u.query.from==="club"&&(q.value=!0),D()}),{matchDetails:e,team1:_,team2:y,loading:b,scoreTable:P,addPlayerDialog:k,searchInput:h,addPlayer:U,openAddPlayerDialog:I,saveScore:F,shareMatch:R,goBack:L,formatCategory:f,viewPlayerProfile:C,isClubView:q}},methods:{openChat(){this.$router.push(`/matches/${this.$route.params.matchId}/chat`)},formatDate(u){z.locale("es-mx");const a=z(u).format("dddd, D [de] MMMM [del] YYYY"),[m,e]=a.split(" de "),_=m.charAt(0).toUpperCase()+m.slice(1),y=e.charAt(0).toUpperCase()+e.slice(1);return _+" de "+y},goToMaps(){const u=this.matchDetails.latitude,a=this.matchDetails.longitude;if(u&&a){const m=`https://www.google.com/maps?q=${u},${a}`;window.open(m,"_blank")}else this.$q.notify({message:"Ubicaci\xF3n no disponible",color:"negative",position:"top"})}}},pe={class:"header-content"},ge={class:"header-icons"},ye={key:0,class:"text-center"},fe={key:1},ve={class:"row items-center",style:{position:"relative",width:"100%","margin-bottom":"20px"}},_e={class:"row",style:{position:"absolute",right:"0"}},he={class:"court-container"},ke={class:"court"},Ce={class:"player team1-player1"},be=["src"],xe={key:1},we={class:"text-caption"},Pe={class:"player team1-player2"},De=["src"],Me={key:1},Ve={class:"text-caption"},Ne={class:"player team2-player1"},Be=["src"],Qe={key:1},je={class:"text-caption"},qe={class:"player team2-player2"},Te=["src"],Ae={key:1},Ee={class:"text-caption"},Se={class:"score-grid"};function ze(u,a,m,e,_,y){const b=v("NotificationBell"),h=v("PlayerTopMenu"),x=v("ClubTopMenu"),w=v("BannerPromoScrolling"),k=v("DesktopNavigation"),P=v("ClubNavigationMenu"),D=v("PlayerNavigationMenu");return o(),c(ee,{view:"hHh lpR fFf",class:"bg-dark text-white"},{default:i(()=>[l(H,{elevated:"",class:"text-white"},{default:i(()=>[t("div",pe,[a[10]||(a[10]=t("div",{class:"greeting"},[t("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"})],-1)),t("div",ge,[l(b),e.isClubView?V("",!0):(o(),c(h,{key:0})),e.isClubView?(o(),c(x,{key:1})):V("",!0)])]),l(w)]),_:1}),e.isClubView?V("",!0):(o(),c(k,{key:0})),e.isClubView?(o(),c(P,{key:1})):V("",!0),l(ae,null,{default:i(()=>[l($,{class:"q-pa-md"},{default:i(()=>[e.loading?(o(),d("div",ye,[l(Y,{color:"primary",size:"xl"})])):(o(),d("div",fe,[l(N,{class:"text-white q-pa-md match-card"},{default:i(()=>[l(B,null,{default:i(()=>[t("div",ve,[l(g,{flat:"",onClick:e.shareMatch,style:{position:"absolute",left:"0"}},{default:i(()=>[l(J,{name:"o_share",size:"md"})]),_:1},8,["onClick"]),a[11]||(a[11]=t("h3",{class:"text-h5 text-white",style:{flex:"1",margin:"0","text-align":"center"}},"Reserva",-1)),t("div",_e,[l(g,{flat:"",onClick:y.openChat},{default:i(()=>[l(J,{name:"o_chat",size:"md"})]),_:1},8,["onClick"])])]),t("p",null,[Q(" Juegas en el club "+n(e.matchDetails.club_name||"No disponible")+" ",1),l(g,{size:"sm",flat:"",round:"",color:"orange",icon:"o_location_on",onClick:y.goToMaps},null,8,["onClick"]),Q(" el dia "+n(y.formatDate(e.matchDetails.match_date))+" a las "+n(e.matchDetails.match_time.slice(0,5))+" hrs. En la cancha "+n(e.matchDetails.court_name||"No disponible")+". ",1)]),a[12]||(a[12]=t("p",null,[Q("Categoria jugadores: Abierto"),t("br"),Q(" Tipo de partido: Cerrado"),t("br")],-1))]),_:1})]),_:1}),l(N,{class:"match-card text-white q-pa-md"},{default:i(()=>[l(B,{class:"q-mt-md"},{default:i(()=>[a[19]||(a[19]=t("h3",{class:"text-center text-white"},"Jugadores",-1)),t("div",he,[t("div",ke,[t("div",Ce,[e.team1[0]?(o(),d("div",{key:0,onClick:a[0]||(a[0]=s=>e.viewPlayerProfile(e.team1[0].user_id)),class:"clickable-player"},[e.team1[0].photo_url?(o(),c(j,{key:0,size:"40px"},{default:i(()=>[t("img",{src:e.team1[0].photo_url,alt:"Foto del jugador"},null,8,be)]),_:1})):(o(),d("span",xe,n(e.team1[0].first_name||"Jugador 1 Equipo 1"),1)),t("div",we,n(e.team1[0].first_name)+" - "+n(e.formatCategory(e.team1[0].category)),1)])):(o(),c(g,{key:1,flat:"",round:"",icon:"o_person_add",onClick:a[1]||(a[1]=s=>e.openAddPlayerDialog(1,0))}))]),t("div",Pe,[e.team1[1]?(o(),d("div",{key:0,onClick:a[2]||(a[2]=s=>e.viewPlayerProfile(e.team1[1].user_id)),class:"clickable-player"},[e.team1[1].photo_url?(o(),c(j,{key:0,size:"40px"},{default:i(()=>[t("img",{src:e.team1[1].photo_url,alt:"Foto del jugador"},null,8,De)]),_:1})):(o(),d("span",Me,n(e.team1[1].first_name||"Jugador 2 Equipo 1"),1)),t("div",Ve,n(e.team1[1].first_name)+" - "+n(e.formatCategory(e.team1[1].category)),1)])):(o(),c(g,{key:1,flat:"",round:"",icon:"o_person_add",onClick:a[3]||(a[3]=s=>e.openAddPlayerDialog(1,1))}))]),t("div",Ne,[e.team2[0]?(o(),d("div",{key:0,onClick:a[4]||(a[4]=s=>e.viewPlayerProfile(e.team2[0].user_id)),class:"clickable-player"},[e.team2[0].photo_url?(o(),c(j,{key:0,size:"40px"},{default:i(()=>[t("img",{src:e.team2[0].photo_url,alt:"Foto del jugador"},null,8,Be)]),_:1})):(o(),d("span",Qe,n(e.team2[0].first_name||"Jugador 1 Equipo 2"),1)),t("div",je,n(e.team2[0].first_name)+" - "+n(e.formatCategory(e.team2[0].category)),1)])):(o(),c(g,{key:1,flat:"",round:"",icon:"o_person_add",onClick:a[5]||(a[5]=s=>e.openAddPlayerDialog(2,0))}))]),t("div",qe,[e.team2[1]?(o(),d("div",{key:0,onClick:a[6]||(a[6]=s=>e.viewPlayerProfile(e.team2[1].user_id)),class:"clickable-player"},[e.team2[1].photo_url?(o(),c(j,{key:0,size:"40px"},{default:i(()=>[t("img",{src:e.team2[1].photo_url,alt:"Foto del jugador"},null,8,Te)]),_:1})):(o(),d("span",Ae,n(e.team2[1].first_name||"Jugador 2 Equipo 2"),1)),t("div",Ee,n(e.team2[1].first_name)+" - "+n(e.formatCategory(e.team2[1].category)),1)])):(o(),c(g,{key:1,flat:"",round:"",icon:"o_person_add",onClick:a[7]||(a[7]=s=>e.openAddPlayerDialog(2,1))}))]),a[13]||(a[13]=t("div",{class:"line1"},null,-1)),a[14]||(a[14]=t("div",{class:"player parejaA vertical-text"},"Pareja A",-1)),a[15]||(a[15]=t("div",{class:"net"},null,-1)),a[16]||(a[16]=t("div",{class:"line2"},null,-1)),a[17]||(a[17]=t("div",{class:"player parejaB vertical-text"},"Pareja B",-1)),a[18]||(a[18]=t("div",{class:"horizontal-line"},null,-1))])])]),_:1})]),_:1}),l(N,{class:"match-card text-white q-pa-md"},{default:i(()=>[l(B,{class:"score-input"},{default:i(()=>[a[23]||(a[23]=t("h3",{class:"text-center text-white"},"Resultado",-1)),t("div",Se,[a[20]||(a[20]=t("div",{class:"header"},null,-1)),(o(!0),d(T,null,A(e.scoreTable,(s,f)=>(o(),d("div",{class:"header",key:"header-"+f}," Set "+n(f+1),1))),128)),a[21]||(a[21]=t("div",{class:"team-label"},"Pareja A",-1)),(o(!0),d(T,null,A(e.scoreTable,(s,f)=>(o(),d("div",{key:"team1-"+f,class:"score-cell"},[l(E,{modelValue:s.team1score,"onUpdate:modelValue":C=>s.team1score=C,modelModifiers:{number:!0},dense:"",outlined:"",type:"number",min:0,max:7,class:"text-white",style:{"max-width":"60px","text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]))),128)),a[22]||(a[22]=t("div",{class:"team-label"},"Pareja B",-1)),(o(!0),d(T,null,A(e.scoreTable,(s,f)=>(o(),d("div",{key:"team2-"+f,class:"score-cell"},[l(E,{modelValue:s.team2score,"onUpdate:modelValue":C=>s.team2score=C,modelModifiers:{number:!0},dense:"",outlined:"",type:"number",min:0,max:7,class:"text-white",style:{"max-width":"60px","text-align":"center"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),l(g,{label:"Guardar Resultado",color:"primary",class:"q-mt-md",onClick:e.saveScore},null,8,["onClick"])]),_:1})]),_:1})]))]),_:1})]),_:1}),l(Z,{modelValue:e.addPlayerDialog,"onUpdate:modelValue":a[9]||(a[9]=s=>e.addPlayerDialog=s)},{default:i(()=>[l(N,null,{default:i(()=>[l(B,null,{default:i(()=>[a[24]||(a[24]=t("div",{class:"text-h6"},"Agregar Jugador",-1)),l(E,{modelValue:e.searchInput,"onUpdate:modelValue":a[8]||(a[8]=s=>e.searchInput=s),label:"Buscar por email o tel\xE9fono",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),l(W,{align:"right"},{default:i(()=>[X(l(g,{flat:"",label:"Cancelar",color:"negative"},null,512),[[te]]),l(g,{flat:"",label:"Agregar",color:"positive",onClick:e.addPlayer},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(D)]),_:1})}var ya=ce(ue,[["render",ze],["__scopeId","data-v-930566aa"]]);export{ya as default};
