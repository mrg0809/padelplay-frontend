import{a8 as N,q as _,G as V,H as i,v as r,I as n,ab as s,J as u,s as m,ac as I,ad as c,a9 as k,aa as h,x as d,K as f,aK as b,af as D,ag as v,ah as x,y as C,aU as S}from"./index.a05546fd.js";import{Q as B}from"./QHeader.3518b267.js";import{Q as L,a as w}from"./QItem.e38a8786.js";import{Q}from"./QItemLabel.3b94dbaa.js";import{Q as q}from"./QList.f969f6a2.js";import{Q as H,a as P}from"./QLayout.46a61ef3.js";import{C as T}from"./ClosePopup.2375f5fe.js";import{a as g,g as U}from"./api.2af71db3.js";import{C as F}from"./ClubNavigationMenu.7c7c2736.js";import{u as A}from"./userStore.2b3b6ba3.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import"./QTabs.b249ec85.js";import"./rtl.276c3f1b.js";import"./QFooter.216d5ed8.js";import"./pinia.eaa32ff8.js";const G={data(){return{courts:[],isDialogOpen:!1,isDeleteDialogOpen:!1,dialogTitle:"Agregar Cancha",form:{id:null,name:"",price_per_hour:null,enable_price_per_hour:!1,price_per_hour_and_half:null,enable_price_per_hour_and_half:!1,price_per_two_hour:null,enable_price_per_two_hour:!1,is_indoor:!1,club_id:null}}},components:{ClubNavigationMenu:F},setup(){return{userStore:A()}},methods:{async fetchCourts(){try{const l=await g.get("/courts/");this.courts=l.data}catch(l){console.error("Error al obtener las canchas:",l)}},openCourtDialog(){this.resetForm(),this.dialogTitle="Agregar Cancha",this.isDialogOpen=!0},editCourt(l){this.form={...l,enable_price_per_hour:l.price_per_hour!==null,enable_price_per_hour_and_half:l.price_per_hour_and_half!==null,enable_price_per_two_hour:l.price_per_two_hour!==null},this.dialogTitle="Editar Cancha",this.isDialogOpen=!0},async saveCourt(){try{const l={name:this.form.name,price_per_hour:this.form.enable_price_per_hour?this.form.price_per_hour:null,price_per_hour_and_half:this.form.enable_price_per_hour_and_half?this.form.price_per_hour_and_half:null,price_per_two_hour:this.form.enable_price_per_two_hour?this.form.price_per_two_hour:null,is_indoor:this.form.is_indoor,club_id:this.form.club_id};this.form.id?await g.put(`/courts/${this.form.id}`,l):await g.post("/courts",l),this.isDialogOpen=!1,await this.fetchCourts()}catch(l){console.error("Error al guardar la cancha:",l)}},confirmDelete(l){this.courtToDelete=l,this.isDeleteDialogOpen=!0},async deleteCourt(){var l,e;try{await g.delete(`/courts/${this.courtToDelete}`),this.courts=this.courts.filter(p=>p.id!==this.courtToDelete),this.isDeleteDialogOpen=!1,this.$q.notify({type:"positive",message:"La cancha ha sido eliminada con \xE9xito.",position:"top"})}catch(p){console.error("Error al eliminar la cancha:",p);const y=((e=(l=p.response)==null?void 0:l.data)==null?void 0:e.detail)||"No se pudo eliminar la cancha. Int\xE9ntalo nuevamente.";this.$q.notify({type:"negative",message:y,position:"bottom"})}},resetForm(){const l=U();this.form={id:null,name:"",price_per_hour:null,enable_price_per_hour:!1,price_per_hour_and_half:null,enable_price_per_hour_and_half:!1,price_per_two_hour:null,enable_price_per_two_hour:!1,is_indoor:!1,club_id:l?l.club_id:null}},goBack(){this.$router.back()},goToDashboard(){var e;const l=(e=this.userStore)==null?void 0:e.userType;l==="player"?this.$router.push("/dashboard/player"):l==="club"?this.$router.push("/dashboard/club"):l==="admin"?this.$router.push("/dashboard/admin"):this.$router.back()}},mounted(){const l=U();l&&(this.form.club_id=l.club_id),this.fetchCourts()}},K={class:"header-content"},R={class:"greeting"},J={class:"header-icons"},j={class:"row-number"},W={class:"text-h6"};function X(l,e,p,y,a,t){const O=N("ClubNavigationMenu");return _(),V(H,{view:"hHh lpR fFf",class:"body"},{default:i(()=>[r(B,{elevated:"",class:"bg-primary text-white"},{default:i(()=>[n("div",K,[n("div",R,[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:e[0]||(e[0]=(...o)=>t.goToDashboard&&t.goToDashboard(...o))}),e[11]||(e[11]=s(" Listado de canchas "))]),n("div",J,[r(u,{flat:"",round:"",icon:"close",onClick:t.goBack},null,8,["onClick"])])])]),_:1}),r(P,null,{default:i(()=>[e[13]||(e[13]=n("div",{class:"q-mt-xl"},null,-1)),r(q,{class:"court-list"},{default:i(()=>[(_(!0),m(c,null,I(a.courts,(o,E)=>(_(),V(L,{key:o.id,clickable:"",onClick:M=>t.editCourt(o),class:"text-black court-item"},{default:i(()=>[r(w,{avatar:""},{default:i(()=>[n("div",j,d(E+1),1)]),_:2},1024),r(w,null,{default:i(()=>[r(Q,null,{default:i(()=>[s(d(o.name),1)]),_:2},1024),r(Q,{caption:"",class:"text-black"},{default:i(()=>[e[12]||(e[12]=s(" PRECIOS: ")),o.price_per_hour?(_(),m(c,{key:0},[s("1 hora: $"+d(o.price_per_hour),1)],64)):C("",!0),o.price_per_hour_and_half?(_(),m(c,{key:1},[s(" | 1 1/2 hora: $"+d(o.price_per_hour_and_half),1)],64)):C("",!0),o.price_per_two_hour?(_(),m(c,{key:2},[s(" | 2 horas: $"+d(o.price_per_two_hour),1)],64)):C("",!0)]),_:2},1024)]),_:2},1024),r(w,{side:""},{default:i(()=>[r(u,{flat:"",icon:"o_delete",color:"black",size:"lg",onClick:S(M=>t.confirmDelete(o.id),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),r(u,{glossy:"",round:"",size:"lg",color:"black",icon:"add",onClick:t.openCourtDialog,class:"fixed-bottom-right q-mb-xl"},null,8,["onClick"])]),_:1}),r(x,{modelValue:a.isDialogOpen,"onUpdate:modelValue":e[9]||(e[9]=o=>a.isDialogOpen=o)},{default:i(()=>[r(k,{class:"bg-black text-white",style:{"min-width":"400px"}},{default:i(()=>[r(h,null,{default:i(()=>[n("div",W,d(a.dialogTitle),1)]),_:1}),r(h,null,{default:i(()=>[r(f,{modelValue:a.form.name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.form.name=o),label:"Nombre de la cancha",outlined:"",dense:"",color:"white"},null,8,["modelValue"]),r(b,{modelValue:a.form.enable_price_per_hour,"onUpdate:modelValue":e[2]||(e[2]=o=>a.form.enable_price_per_hour=o),label:"\xBFHabilitar precio por hora?",dense:"",color:"white"},null,8,["modelValue"]),r(f,{modelValue:a.form.price_per_hour,"onUpdate:modelValue":e[3]||(e[3]=o=>a.form.price_per_hour=o),modelModifiers:{number:!0},label:"Precio por hora",outlined:"",dense:"",type:"number",disable:!a.form.enable_price_per_hour,color:"white"},null,8,["modelValue","disable"]),r(b,{modelValue:a.form.enable_price_per_hour_and_half,"onUpdate:modelValue":e[4]||(e[4]=o=>a.form.enable_price_per_hour_and_half=o),label:"\xBFHabilitar precio por hora y media?",dense:"",color:"white"},null,8,["modelValue"]),r(f,{modelValue:a.form.price_per_hour_and_half,"onUpdate:modelValue":e[5]||(e[5]=o=>a.form.price_per_hour_and_half=o),modelModifiers:{number:!0},label:"Precio por hora y media",outlined:"",dense:"",type:"number",disable:!a.form.enable_price_per_hour_and_half,color:"white"},null,8,["modelValue","disable"]),r(b,{modelValue:a.form.enable_price_per_two_hour,"onUpdate:modelValue":e[6]||(e[6]=o=>a.form.enable_price_per_two_hour=o),label:"\xBFHabilitar precio por dos horas?",dense:"",color:"white"},null,8,["modelValue"]),r(f,{modelValue:a.form.price_per_two_hour,"onUpdate:modelValue":e[7]||(e[7]=o=>a.form.price_per_two_hour=o),modelModifiers:{number:!0},label:"Precio por dos horas",outlined:"",dense:"",type:"number",disable:!a.form.enable_price_per_two_hour,color:"white"},null,8,["modelValue","disable"]),r(b,{modelValue:a.form.is_indoor,"onUpdate:modelValue":e[8]||(e[8]=o=>a.form.is_indoor=o),label:"\xBFEs indoor?",dense:"",color:"white"},null,8,["modelValue"])]),_:1}),r(D,{align:"right"},{default:i(()=>[v(r(u,{flat:"",label:"Cancelar",color:"red"},null,512),[[T]]),r(u,{flat:"",label:"Guardar",color:"green",onClick:t.saveCourt},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(x,{modelValue:a.isDeleteDialogOpen,"onUpdate:modelValue":e[10]||(e[10]=o=>a.isDeleteDialogOpen=o)},{default:i(()=>[r(k,{class:"bg-dark text-white"},{default:i(()=>[r(h,{class:"text-h6"},{default:i(()=>e[14]||(e[14]=[s(" Confirmar eliminaci\xF3n ")])),_:1}),r(h,null,{default:i(()=>e[15]||(e[15]=[s(" \xBFEst\xE1s seguro de que deseas eliminar esta cancha? Esta acci\xF3n no se puede deshacer. ")])),_:1}),r(D,{align:"right"},{default:i(()=>[v(r(u,{flat:"",label:"Cancelar",color:"primary"},null,512),[[T]]),r(u,{flat:"",label:"Eliminar",color:"negative",onClick:t.deleteCourt},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(O)]),_:1})}var pe=z(G,[["render",X],["__scopeId","data-v-2d876688"]]);export{pe as default};
