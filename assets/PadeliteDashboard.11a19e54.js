import{x as F,r as m,h as j,o as c,z as y,A as a,d as e,B as r,D as k,a7 as b,a8 as d,t as f,a as E,e as H,ad as B,ac as g,Q as G,aa as K,ab as X,af as J,E as D,ae as W,a9 as u,aK as Y,_ as Z}from"./index.44d6004f.js";import{Q as ee}from"./QHeader.8ed599dc.js";import{Q as T}from"./QItemLabel.30a3dfed.js";import{Q as x,a as n}from"./QItem.cafd0d6f.js";import{Q as ae}from"./QChip.d99417f0.js";import{Q as q}from"./QList.8f6ea51c.js";import{Q as te}from"./QPage.069cc100.js";import{Q as oe,a as le}from"./QLayout.bdadfe99.js";import{Q as re}from"./QDrawer.1ef53893.js";import{C as se}from"./ClosePopup.8579e57c.js";import{u as ne}from"./use-quasar.00fa2d0c.js";import{a as h}from"./api.dcb17b1f.js";import{N as ie}from"./NotificationBell.03dce8ef.js";import{B as de}from"./BannerPromoScrolling.0ad337b6.js";import{P as ue}from"./PadeliteNavigationMenu.48673642.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";import"./TouchPan.14df6e61.js";import"./touch.9135741d.js";import"./selection.ab0d7921.js";import"./format.de7e9769.js";import"./QBadge.182a08f3.js";import"./QTabs.02ad9b81.js";import"./rtl.276c3f1b.js";import"./QFooter.dec25843.js";const ce={class:"header-content"},pe={class:"header-icons"},fe={class:"text-h5"},ge={key:0,class:"text-caption"},ve={class:"row q-col-gutter-md q-mb-md"},_e={class:"col-12 col-md-6"},ye={class:"col-12 col-md-6"},be={class:"text-h6"},xe={__name:"PadeliteDashboard",setup(ke){const p=F(),v=ne(),s=m(null),w=m([]),Q=m(!1),_=m(!1),C=m(!1),z=m(!1),i=m({name:"",description:"",logo_url:""});j(async()=>{await P(),await I()});const P=async()=>{try{const{data:l}=await h.get("/associations/padelite/organization");s.value=l.data,s.value&&(i.value={name:s.value.name,description:s.value.description||"",logo_url:s.value.logo_url||""})}catch(l){console.error("Error fetching organization:",l)}},I=async()=>{Q.value=!0;try{const{data:l}=await h.get("/padelite/tournaments");w.value=l.data||[]}catch(l){console.error("Error fetching tournaments:",l),v.notify({type:"negative",message:"Error al cargar torneos"})}finally{Q.value=!1}},L=async()=>{var l,t;z.value=!0;try{s.value?(await h.put("/associations/padelite/organization",i.value),v.notify({type:"positive",message:"Organizaci\xF3n actualizada exitosamente"})):(await h.post("/associations/padelite/organization",i.value),v.notify({type:"positive",message:"Organizaci\xF3n creada exitosamente"})),_.value=!1,await P()}catch(o){console.error("Error saving organization:",o),v.notify({type:"negative",message:((t=(l=o.response)==null?void 0:l.data)==null?void 0:t.detail)||"Error al guardar organizaci\xF3n"})}finally{z.value=!1}},N=()=>{if(!s.value){v.notify({type:"warning",message:"Por favor, crea tu organizaci\xF3n primero"}),_.value=!0;return}p.push("/padelite/tournaments/create")},M=()=>{p.push("/padelite/dashboard")},O=()=>{p.push("/padelite/tournaments")},S=()=>{p.push("/padelite/revenue")},R=l=>{p.push(`/padelite/tournaments/${l}`)},U=async()=>{const{storage:l}=await Z(()=>import("./index.44d6004f.js").then(function(t){return t.b_}),["assets/index.44d6004f.js","assets/index.993c6714.css"]);await l.removeItem("token"),p.push("/")},$=l=>l?new Date(l).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}):"",A=l=>{switch(l){case"open":return"positive";case"closed":return"negative";case"in_progress":return"warning";default:return"grey"}};return(l,t)=>(c(),y(oe,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[e(ee,{elevated:"",class:"text-white"},{default:a(()=>[r("div",ce,[t[7]||(t[7]=r("div",{class:"greeting"},[r("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon"}),r("div",{class:"greeting-text"},[r("p",null,"Bienvenido"),r("p",{class:"text-grey"},"Dashboard Padelite")])],-1)),r("div",pe,[e(ie),e(k,{flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=o=>C.value=!0)})])]),e(de)]),_:1}),e(le,null,{default:a(()=>[e(te,{class:"q-pa-md"},{default:a(()=>[e(b,{flat:"",bordered:"",class:"q-mb-md bg-transparent text-white"},{default:a(()=>[e(d,null,{default:a(()=>{var o,V;return[r("div",fe,f(((o=s.value)==null?void 0:o.name)||"Mi Organizaci\xF3n"),1),(V=s.value)!=null&&V.description?(c(),E("div",ge,f(s.value.description),1)):H("",!0)]}),_:1}),e(B,null,{default:a(()=>[e(k,{flat:"",color:"primary",label:"Editar Organizaci\xF3n",onClick:t[1]||(t[1]=o=>_.value=!0)})]),_:1})]),_:1}),r("div",ve,[r("div",_e,[e(b,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:N},{default:a(()=>[e(d,{class:"text-center"},{default:a(()=>[e(g,{name:"add_circle",size:"48px",color:"primary"}),t[8]||(t[8]=r("div",{class:"text-h6 q-mt-md"},"Crear Torneo Padelite",-1))]),_:1})]),_:1})]),r("div",ye,[e(b,{flat:"",bordered:"",class:"bg-transparent text-white clickable",onClick:O},{default:a(()=>[e(d,{class:"text-center"},{default:a(()=>[e(g,{name:"emoji_events",size:"48px",color:"primary"}),t[9]||(t[9]=r("div",{class:"text-h6 q-mt-md"},"Mis Torneos",-1))]),_:1})]),_:1})])]),e(b,{flat:"",bordered:"",class:"bg-transparent text-white"},{default:a(()=>[e(d,null,{default:a(()=>[...t[10]||(t[10]=[r("div",{class:"text-h6"},"Torneos Recientes",-1)])]),_:1}),Q.value?(c(),y(d,{key:0},{default:a(()=>[e(G,{color:"primary",size:"50px"})]),_:1})):w.value.length>0?(c(),y(q,{key:1,separator:""},{default:a(()=>[(c(!0),E(X,null,K(w.value,o=>(c(),y(x,{key:o.id,clickable:"",onClick:V=>R(o.id)},{default:a(()=>[e(n,null,{default:a(()=>[e(T,null,{default:a(()=>[u(f(o.name),1)]),_:2},1024),e(T,{caption:""},{default:a(()=>[u(f($(o.start_date)),1)]),_:2},1024)]),_:2},1024),e(n,{side:""},{default:a(()=>[e(ae,{color:A(o.status),"text-color":"white"},{default:a(()=>[u(f(o.status),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(c(),y(d,{key:2},{default:a(()=>[...t[11]||(t[11]=[r("div",{class:"text-center text-grey"}," No hay torneos recientes ",-1)])]),_:1}))]),_:1}),e(J,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o)},{default:a(()=>[e(b,{style:{"min-width":"400px"},class:"bg-dark text-white"},{default:a(()=>[e(d,null,{default:a(()=>[r("div",be,f(s.value?"Editar Organizaci\xF3n":"Crear Organizaci\xF3n"),1)]),_:1}),e(d,null,{default:a(()=>[e(D,{modelValue:i.value.name,"onUpdate:modelValue":t[2]||(t[2]=o=>i.value.name=o),label:"Nombre de la Organizaci\xF3n",outlined:"",dense:"",dark:"",class:"q-mb-md"},null,8,["modelValue"]),e(D,{modelValue:i.value.description,"onUpdate:modelValue":t[3]||(t[3]=o=>i.value.description=o),label:"Descripci\xF3n",type:"textarea",outlined:"",dense:"",dark:"",rows:"3",class:"q-mb-md"},null,8,["modelValue"]),e(D,{modelValue:i.value.logo_url,"onUpdate:modelValue":t[4]||(t[4]=o=>i.value.logo_url=o),label:"URL del Logo",outlined:"",dense:"",dark:""},null,8,["modelValue"])]),_:1}),e(B,{align:"right"},{default:a(()=>[W(e(k,{flat:"",label:"Cancelar",color:"grey"},null,512),[[se]]),e(k,{flat:"",label:"Guardar",color:"primary",onClick:L,loading:z.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ue),e(re,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o),side:"right",overlay:"",behavior:"mobile",class:"bg-dark text-white"},{default:a(()=>[e(q,null,{default:a(()=>[e(T,{header:""},{default:a(()=>[...t[12]||(t[12]=[u("Men\xFA",-1)])]),_:1}),e(x,{clickable:"",onClick:M},{default:a(()=>[e(n,{avatar:""},{default:a(()=>[e(g,{name:"home"})]),_:1}),e(n,null,{default:a(()=>[...t[13]||(t[13]=[u("Dashboard",-1)])]),_:1})]),_:1}),e(x,{clickable:"",onClick:O},{default:a(()=>[e(n,{avatar:""},{default:a(()=>[e(g,{name:"emoji_events"})]),_:1}),e(n,null,{default:a(()=>[...t[14]||(t[14]=[u("Mis Torneos",-1)])]),_:1})]),_:1}),e(x,{clickable:"",onClick:S},{default:a(()=>[e(n,{avatar:""},{default:a(()=>[e(g,{name:"attach_money"})]),_:1}),e(n,null,{default:a(()=>[...t[15]||(t[15]=[u("Ingresos",-1)])]),_:1})]),_:1}),e(Y),e(x,{clickable:"",onClick:U},{default:a(()=>[e(n,{avatar:""},{default:a(()=>[e(g,{name:"logout"})]),_:1}),e(n,null,{default:a(()=>[...t[16]||(t[16]=[u("Cerrar Sesi\xF3n",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var He=me(xe,[["__scopeId","data-v-95244ea8"]]);export{He as default};
