import{Q as J}from"./QHeader.bad00686.js";import{F as O,a9 as W,r as h,j as K,B as X,q as t,G as l,H as a,v as e,I as n,bI as b,y as f,ab as F,ac as q,J as u,bE as Y,aS as j,s as P,x as c,ad as m}from"./index.188957e1.js";import{Q as k}from"./QItemLabel.c3c7305b.js";import{Q as w}from"./QItem.11f55c39.js";import{Q as Z}from"./QList.7c68295a.js";import{Q as ee}from"./QPage.d6b4f804.js";import{Q as ae,a as oe}from"./QLayout.841981cf.js";import{f as te}from"./players.705eaa86.js";import{d as re}from"./dateUtils.795ba59f.js";import{a as se}from"./api.2af71db3.js";import{u as B}from"./use-quasar.51ce0ad1.js";import{s as le}from"./shareUtils.df2201c3.js";import{g as D,a as ie}from"./countryUtils.f07e8a77.js";import{u as ne}from"./userStore.551ce0f9.js";import{u as ue}from"./useDashboardNavigation.d2d7a880.js";import{f as ce,c as de,u as pe}from"./community.d71ea6ae.js";import{P as fe}from"./PlayerNavigationMenu.5400ec1d.js";import{P as me}from"./PlayerTopMenu.56e8c076.js";import{N as ye}from"./NotificationBell.b24bce23.js";import{B as ge}from"./BannerPromoScrolling.6ad8f16b.js";import{D as _e}from"./DesktopNavigation.c284328f.js";import{C as ve}from"./ClubTopMenu.afb0132b.js";import{C as he}from"./ClubNavigationMenu.f091f89e.js";import{_ as be}from"./plugin-vue_export-helper.21dcd24c.js";import"./supabase.beb006d9.js";import"./pinia.db3bcbf1.js";import"./QTabs.8d68553c.js";import"./rtl.276c3f1b.js";import"./QFooter.716e353a.js";import"./QBtnDropdown.dabb9b27.js";import"./QBtnGroup.35e02539.js";import"./QMenu.2b07856c.js";import"./position-engine.41ccacd1.js";import"./selection.b10b4da7.js";import"./QBadge.b27da0c4.js";import"./admin.c99b9bfe.js";import"./QTooltip.9f2ef863.js";async function ke(x,d){const p=B();if(x.size>2*1024*1024){p.notify({type:"negative",message:"El archivo es demasiado grande (m\xE1ximo 2MB)."});return}if(!x.type.startsWith("image/")){p.notify({type:"negative",message:"El archivo debe ser una imagen."});return}const i=new FormData;i.append("file",x);try{const y=await se.post("/players/upload-photo",i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}});d.photo_url=y.data.photo_url,p.notify({type:"positive",message:"Foto de perfil actualizada exitosamente"})}catch(y){console.error("Error al subir foto de perfil:",y.message),p.notify({type:"negative",message:"Error al subir foto de perfil"})}}const we={class:"header-content"},Ce={class:"greeting"},Pe={class:"header-icons"},xe={class:"player-container"},Ne={class:"player-profile-layout"},Qe={class:"profile-header"},Ie=["src"],qe={class:"q-ma-none player-name"},Ee={key:1},Fe={key:1,class:"follow-section q-my-sm"},je={class:"icon-buttons"},De={__name:"PlayerProfile",setup(x){const d=ne(),{goToDashboard:p}=ue(),i=O(),y=W(),g=B(),E=h(null),_=h(y.params.userId||d.userId),v=K(()=>_.value===d.userId),N=h(!1),S=h([]),C=h(!1),r=h({first_name:"",last_name:"",birth_date:"",phone:"",gender:"",preferred_hand:"",position:"",photo_url:null,category:"sexta",nationality:""}),M=async()=>{if(!_.value){console.error("No user ID provided for profile"),g.notify({type:"negative",message:"Error: No se pudo cargar el perfil del jugador"}),i.push("/player/inicio");return}const o=await te(_.value);o?r.value=o:(g.notify({type:"negative",message:"No se pudo cargar la informaci\xF3n del jugador"}),i.push("/player/inicio"))},z=async()=>{if(!v.value)try{const o=await ce(d.userId);S.value=o,N.value=o.some(s=>s.user_id===_.value)}catch(o){console.error("Error loading following status:",o)}},T=async()=>{try{await de(d.userId,_.value),N.value=!0,g.notify({type:"positive",message:"Ahora sigues a este jugador"})}catch(o){console.error("Error following player:",o),g.notify({type:"negative",message:"Error al seguir al jugador"})}},H=async()=>{try{await pe(d.userId,_.value),N.value=!1,g.notify({type:"positive",message:"Has dejado de seguir a este jugador"})}catch(o){console.error("Error unfollowing player:",o),g.notify({type:"negative",message:"Error al dejar de seguir al jugador"})}},L=()=>{E.value.click()},U=o=>{const s=o.target.files[0];s&&ke(s,r.value)},V=()=>{const o="Descubre a este jugador.",s=window.location.href;le(o,s,"Echa un vistazo a este perfil.")},$=()=>{i.push("/player/editarinfo")};function Q(o){return o?o.charAt(0).toUpperCase()+o.slice(1):"No especificado"}const A=()=>{i.push("/player/community")},R=()=>{i.push("/player/formasdepago")},G=()=>{i.push("/player/historial")};return X(()=>{y.query.from==="club"&&(C.value=!0),M(),z()}),(o,s)=>(t(),l(ae,{view:"hHh lpR fFf",class:"text-white"},{default:a(()=>[e(J,{elevated:"",class:"text-white"},{default:a(()=>[n("div",we,[n("div",Ce,[n("img",{src:"/padelplay.png",alt:"Logo",class:"logo-icon clickable-logo",onClick:s[0]||(s[0]=(...I)=>b(p)&&b(p)(...I))})]),n("div",Pe,[e(ye),C.value?f("",!0):(t(),l(me,{key:0})),C.value?(t(),l(ve,{key:1})):f("",!0)])]),e(ge)]),_:1}),C.value?f("",!0):(t(),l(_e,{key:0})),C.value?(t(),l(he,{key:1})):f("",!0),e(oe,null,{default:a(()=>[e(ee,{class:"q-pa-md"},{default:a(()=>[n("div",xe,[n("div",Ne,[e(F,{flat:"",bordered:"",class:"text-white profile-card main-profile"},{default:a(()=>[e(q,{class:"q-pb-none relative"},{default:a(()=>[e(u,{flat:"",round:"",dense:"",icon:"query_stats",class:"absolute-top-left"}),e(u,{flat:"",round:"",dense:"",icon:"o_share",class:"absolute-top-right",onClick:V}),n("div",Qe,[e(Y,{size:"120px",class:j(["profile-avatar",{"clickable-avatar":v.value}]),onClick:s[1]||(s[1]=I=>v.value?L():null)},{default:a(()=>[r.value.photo_url?(t(),P("img",{key:0,src:r.value.photo_url,alt:"Foto del jugador"},null,8,Ie)):(t(),l(u,{key:1,icon:"person",flat:"",dense:"",size:"70px"}))]),_:1},8,["class"]),n("h4",qe,c(r.value.first_name),1),v.value?(t(),P("input",{key:0,type:"file",ref_key:"fileInput",ref:E,class:"hidden",accept:"image/*",onChange:U},null,544)):f("",!0)])]),_:1}),e(q,{class:"profile-details"},{default:a(()=>[e(Z,{dense:"",class:"text-white player-info-list"},{default:a(()=>[e(w,null,{default:a(()=>[e(k,null,{default:a(()=>[m("Categor\xEDa: "+c(Q(r.value.category)||"No especificado"),1)]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(k,null,{default:a(()=>[m("Fecha de nacimiento: "+c(b(re)(r.value.birth_date)),1)]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(k,null,{default:a(()=>[m("G\xE9nero: "+c(Q(r.value.gender)||"No especificado"),1)]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(k,null,{default:a(()=>[m("Mano dominante: "+c(Q(r.value.preferred_hand)||"No especificado"),1)]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(k,null,{default:a(()=>[m("Posici\xF3n en pista: "+c(Q(r.value.position)||"No especificado"),1)]),_:1})]),_:1}),r.value.nationality?(t(),l(w,{key:0},{default:a(()=>[e(k,null,{default:a(()=>[s[2]||(s[2]=m(" Nacionalidad: ")),b(D)(r.value.nationality)?(t(),P("span",{key:0,class:j(`fi fi-${b(D)(r.value.nationality)}`),style:{"margin-right":"8px"}},null,2)):(t(),P("span",Ee,c(b(ie)(r.value.nationality)),1)),m(" "+c(r.value.nationality),1)]),_:1})]),_:1})):f("",!0)]),_:1}),v.value?(t(),l(u,{key:0,flat:"",dense:"",color:"white",icon:"o_edit",label:"Editar",class:"q-my-sm edit-btn",stack:"",onClick:$})):(t(),P("div",Fe,[N.value?(t(),l(u,{key:1,color:"red",label:"Dejar de seguir",icon:"person_remove",class:"unfollow-btn",onClick:H})):(t(),l(u,{key:0,color:"primary",label:"Seguir",icon:"person_add",class:"follow-btn",onClick:T}))]))]),_:1})]),_:1}),v.value?(t(),l(F,{key:0,flat:"",bordered:"",class:"text-white profile-card actions-card"},{default:a(()=>[e(q,{class:"q-pb-none"},{default:a(()=>[n("div",je,[e(u,{flat:"",dense:"",color:"white",icon:"o_group",label:"Comunidad",class:"q-my-sm action-btn",stack:"",onClick:A}),e(u,{flat:"",dense:"",color:"white",icon:"o_credit_card",label:"ForMas de pago",class:"q-my-sm action-btn",stack:"",onClick:R}),e(u,{flat:"",dense:"",color:"white",icon:"o_history",label:"Historial",class:"q-my-sm action-btn",stack:"",onClick:G})])]),_:1})]),_:1})):f("",!0)])])]),_:1})]),_:1}),e(fe)]),_:1}))}};var _a=be(De,[["__scopeId","data-v-75c258ae"]]);export{_a as default};
